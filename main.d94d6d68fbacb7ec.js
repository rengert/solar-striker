(self.webpackChunksolar_striker=self.webpackChunksolar_striker||[]).push([[179],{494:(Ce,pe,z)=>{"use strict";function A(t){return"function"==typeof t}function te(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const ce=te(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function oe(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class J{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(A(r))try{r()}catch(s){e=s instanceof ce?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{he(s)}catch(o){e=e??[],o instanceof ce?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ce(e)}}add(e){var n;if(e&&e!==this)if(this.closed)he(e);else{if(e instanceof J){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&oe(n,e)}remove(e){const{_finalizers:n}=this;n&&oe(n,e),e instanceof J&&e._removeParent(this)}}J.EMPTY=(()=>{const t=new J;return t.closed=!0,t})();const ne=J.EMPTY;function re(t){return t instanceof J||t&&"closed"in t&&A(t.remove)&&A(t.add)&&A(t.unsubscribe)}function he(t){A(t)?t():t.unsubscribe()}const de={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Me={setTimeout(t,e,...n){const{delegate:r}=Me;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Me;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ye(t){Me.setTimeout(()=>{const{onUnhandledError:e}=de;if(!e)throw t;e(t)})}function ge(){}const Te=ve("C",void 0,void 0);function ve(t,e,n){return{kind:t,value:e,error:n}}let L=null;function I(t){if(de.useDeprecatedSynchronousErrorHandling){const e=!L;if(e&&(L={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=L;if(L=null,n)throw r}}else t()}class $ extends J{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,re(e)&&e.add(this)):this.destination=at}static create(e,n,r){return new ue(e,n,r)}next(e){this.isStopped?He(function Ie(t){return ve("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?He(function G(t){return ve("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?He(Te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ae=Function.prototype.bind;function ie(t,e){return ae.call(t,e)}class O{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){C(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){C(r)}else C(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){C(n)}}}class ue extends ${constructor(e,n,r){let i;if(super(),A(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&de.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ie(e.next,s),error:e.error&&ie(e.error,s),complete:e.complete&&ie(e.complete,s)}):i=e}this.destination=new O(i)}}function C(t){de.useDeprecatedSynchronousErrorHandling?function j(t){de.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=t)}(t):ye(t)}function He(t,e){const{onStoppedNotification:n}=de;n&&Me.setTimeout(()=>n(t,e))}const at={closed:!0,next:ge,error:function Ge(t){throw t},complete:ge},q="function"==typeof Symbol&&Symbol.observable||"@@observable";function S(t){return t}let x=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function T(t){return t&&t instanceof $||function R(t){return t&&A(t.next)&&A(t.error)&&A(t.complete)}(t)&&re(t)}(n)?n:new ue(n,r,i);return I(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=D(r))((i,s)=>{const o=new ue({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[q](){return this}pipe(...n){return function b(t){return 0===t.length?S:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=D(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function D(t){var e;return null!==(e=t??de.Promise)&&void 0!==e?e:Promise}const P=te(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let B=(()=>{class t extends x{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new ee(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new P}next(n){I(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){I(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){I(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?ne:(this.currentObservers=null,s.push(n),new J(()=>{this.currentObservers=null,oe(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new x;return n.source=this,n}}return t.create=(e,n)=>new ee(e,n),t})();class ee extends B{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:ne}}function X(t){return e=>{if(function se(t){return A(t?.lift)}(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(t,e,n,r,i){return new we(t,e,n,r,i)}class we extends ${constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function bt(t){return this instanceof bt?(this.v=t,this):new bt(t)}function Pn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Li(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}(a,l,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Vo=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Vi(t){return A(t?.then)}function zn(t){return A(t[q])}function fl(t){return Symbol.asyncIterator&&A(t?.[Symbol.asyncIterator])}function pl(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const gs=function nc(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Go(t){return A(t?.[gs])}function zs(t){return function tn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(f){return new Promise(function(p,g){s.push([d,f,p,g])>1||a(d,f)})})}function a(d,f){try{!function l(d){d.value instanceof bt?Promise.resolve(d.value.v).then(u,c):h(s[0][2],d)}(r[d](f))}catch(p){h(s[0][3],p)}}function u(d){a("next",d)}function c(d){a("throw",d)}function h(d,f){d(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield bt(n.read());if(i)return yield bt(void 0);yield yield bt(r)}}finally{n.releaseLock()}})}function jo(t){return A(t?.getReader)}function lr(t){if(t instanceof x)return t;if(null!=t){if(zn(t))return function rc(t){return new x(e=>{const n=t[q]();if(A(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Vo(t))return function ic(t){return new x(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Vi(t))return function gl(t){return new x(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ye)})}(t);if(fl(t))return $o(t);if(Go(t))return function sc(t){return new x(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(jo(t))return function oc(t){return $o(zs(t))}(t)}throw pl(t)}function $o(t){return new x(e=>{(function _f(t,e){var n,r,i,s;return function or(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Pn(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function br(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Ws(t,e,n=1/0){return A(e)?Ws((r,i)=>function Oe(t,e){return X((n,r)=>{let i=0;n.subscribe(le(r,s=>{r.next(t.call(e,s,i++))}))})}((s,o)=>e(r,s,i,o))(lr(t(r,i))),n):("number"==typeof e&&(n=e),X((r,i)=>function ms(t,e,n,r,i,s,o,a){const l=[];let u=0,c=0,h=!1;const d=()=>{h&&!l.length&&!u&&e.complete()},f=g=>u<r?p(g):l.push(g),p=g=>{s&&e.next(g),u++;let m=!1;lr(n(g,c++)).subscribe(le(e,y=>{i?.(y),s?f(y):e.next(y)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;l.length&&u<r;){const y=l.shift();o?br(e,o,()=>p(y)):p(y)}d()}catch(y){e.error(y)}}))};return t.subscribe(le(e,f,()=>{h=!0,d()})),()=>{a?.()}}(r,i,t,n)))}const ml=new x(t=>t.complete());function vf(t){return t[t.length-1]}function Qy(t){return function mI(t){return t&&A(t.schedule)}(vf(t))?t.pop():void 0}function Jy(t,e=0){return X((n,r)=>{n.subscribe(le(r,i=>br(r,t,()=>r.next(i),e),()=>br(r,t,()=>r.complete(),e),i=>br(r,t,()=>r.error(i),e)))})}function ev(t,e=0){return X((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function tv(t,e){if(!t)throw new Error("Iterable cannot be null");return new x(n=>{br(n,e,()=>{const r=t[Symbol.asyncIterator]();br(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function nv(t,e){return e?function EI(t,e){if(null!=t){if(zn(t))return function yI(t,e){return lr(t).pipe(ev(e),Jy(e))}(t,e);if(Vo(t))return function wI(t,e){return new x(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Vi(t))return function vI(t,e){return lr(t).pipe(ev(e),Jy(e))}(t,e);if(fl(t))return tv(t,e);if(Go(t))return function xI(t,e){return new x(n=>{let r;return br(n,e,()=>{r=t[gs](),br(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>A(r?.return)&&r.return()})}(t,e);if(jo(t))return function bI(t,e){return tv(zs(t),e)}(t,e)}throw pl(t)}(t,e):lr(t)}function TI(...t){const e=Qy(t),n=function _I(t,e){return"number"==typeof vf(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?lr(r[0]):function yf(t=1/0){return Ws(S,t)}(n)(nv(r,e)):ml}class wf extends B{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function rv(t={}){const{connector:e=(()=>new B),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,l,u=0,c=!1,h=!1;const d=()=>{a?.unsubscribe(),a=void 0},f=()=>{d(),o=l=void 0,c=h=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return X((g,m)=>{u++,!h&&!c&&d();const y=l=l??e();m.add(()=>{u--,0===u&&!h&&!c&&(a=xf(p,i))}),y.subscribe(m),!o&&u>0&&(o=new ue({next:v=>y.next(v),error:v=>{h=!0,d(),a=xf(f,n,v),y.error(v)},complete:()=>{c=!0,d(),a=xf(f,r),y.complete()}}),lr(g).subscribe(o))})(s)}}function xf(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new ue({next:()=>{r.unsubscribe(),t()}});return lr(e(...n)).subscribe(r)}function bf(t,e=S){return t=t??SI,X((n,r)=>{let i,s=!0;n.subscribe(le(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function SI(t,e){return t===e}function Dt(t){for(let e in t)if(t[e]===Dt)return e;throw Error("Could not find renamed property on target object.")}function an(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(an).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Ef(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const II=Dt({__forward_ref__:Dt});function Tf(t){return t.__forward_ref__=Tf,t.toString=function(){return an(this())},t}function ze(t){return function Df(t){return"function"==typeof t&&t.hasOwnProperty(II)&&t.__forward_ref__===Tf}(t)?t():t}function Cf(t){return t&&!!t.\u0275providers}class Ee extends Error{constructor(e,n){super(function lc(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Et(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function We(t){return"string"==typeof t?t:null==t?"":String(t)}(t)}function Sf(t,e){throw new Ee(-201,!1)}function Er(t,e){null==t&&function je(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Ct(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function zo(t){return{providers:t.providers||[],imports:t.imports||[]}}function uc(t){return sv(t,hc)||sv(t,ov)}function sv(t,e){return t.hasOwnProperty(e)?t[e]:null}function cc(t){return t&&(t.hasOwnProperty(If)||t.hasOwnProperty(FI))?t[If]:null}const hc=Dt({\u0275prov:Dt}),If=Dt({\u0275inj:Dt}),ov=Dt({ngInjectableDef:Dt}),FI=Dt({ngInjectorDef:Dt});var ct=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ct||{});let Af;function Wn(t){const e=Af;return Af=t,e}function lv(t,e,n){const r=uc(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ct.Optional?null:void 0!==e?e:void Sf(an(t))}const St=globalThis,_l={},Of="__NG_DI_FLAG__",dc="ngTempTokenPath",BI=/\n/gm,cv="__source";let Wo;function _s(t){const e=Wo;return Wo=t,e}function VI(t,e=ct.Default){if(void 0===Wo)throw new Ee(-203,!1);return null===Wo?lv(t,void 0,e):Wo.get(t,e&ct.Optional?null:void 0,e)}function ht(t,e=ct.Default){return(function av(){return Af}()||VI)(ze(t),e)}function Rt(t,e=ct.Default){return ht(t,fc(e))}function fc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ff(t){const e=[];for(let n=0;n<t.length;n++){const r=ze(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Ee(900,!1);let i,s=ct.Default;for(let o=0;o<r.length;o++){const a=r[o],l=GI(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(ht(i,s))}else e.push(ht(r))}return e}function GI(t){return t[Of]}function Gi(t){return{toString:t}.toString()}var pc=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(pc||{}),Ur=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ur||{});const ui={},yt=[],gc=Dt({\u0275cmp:Dt}),Lf=Dt({\u0275dir:Dt}),kf=Dt({\u0275pipe:Dt}),dv=Dt({\u0275mod:Dt}),ji=Dt({\u0275fac:Dt}),vl=Dt({__NG_ELEMENT_ID__:Dt}),fv=Dt({__NG_ENV_ID__:Dt});function pv(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Bf(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];mv(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function gv(t){return 3===t||4===t||6===t}function mv(t){return 64===t.charCodeAt(0)}function wl(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||_v(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function _v(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const yv="ng-template";function zI(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if("string"==typeof s&&i){const o=t[r++];if(n&&"class"===s&&-1!==pv(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<t.length&&"string"==typeof(s=t[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function vv(t){return 4===t.type&&t.value!==yv}function WI(t,e,n){return e===(4!==t.type||n?t.value:yv)}function XI(t,e,n){let r=4;const i=t.attrs||[],s=function ZI(t){for(let e=0;e<t.length;e++)if(gv(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!WI(t,l,n)||""===l&&1===e.length){if(Hr(r))return!1;o=!0}}else{const u=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!zI(t.attrs,u,n)){if(Hr(r))return!1;o=!0}continue}const h=YI(8&r?"class":l,i,vv(t),n);if(-1===h){if(Hr(r))return!1;o=!0;continue}if(""!==u){let d;d=h>s?"":i[h+1].toLowerCase();const f=8&r?d:null;if(f&&-1!==pv(f,u,0)||2&r&&u!==d){if(Hr(r))return!1;o=!0}}}}else{if(!o&&!Hr(r)&&!Hr(l))return!1;if(o&&Hr(l))continue;o=!1,r=l|1&r}}return Hr(r)||o}function Hr(t){return 0==(1&t)}function YI(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function KI(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function wv(t,e,n=!1){for(let r=0;r<e.length;r++)if(XI(t,e[r],n))return!0;return!1}function xv(t,e){return t?":not("+e.trim()+")":e}function JI(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Hr(o)&&(e+=xv(s,i),i=""),r=o,s=s||!Hr(r);n++}return""!==i&&(e+=xv(s,i)),e}function Uf(t){return Gi(()=>{const e=function Ev(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ui,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||yt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bv(t.inputs,e),outputs:bv(t.outputs)}}(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===pc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ur.Emulated,styles:t.styles||yt,_:null,schemas:t.schemas||null,tView:null,id:""};!function Tv(t){t.features?.forEach(e=>e(t))}(n);const r=t.dependencies;return n.directiveDefs=mc(r,!1),n.pipeDefs=mc(r,!0),n.id=function aA(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function rA(t){return ft(t)||pn(t)}function iA(t){return null!==t}function xl(t){return Gi(()=>({type:t.type,bootstrap:t.bootstrap||yt,declarations:t.declarations||yt,imports:t.imports||yt,exports:t.exports||yt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function bv(t,e){if(null==t)return ui;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}function ft(t){return t[gc]||null}function pn(t){return t[Lf]||null}function On(t){return t[kf]||null}function mc(t,e){if(!t)return null;const n=e?On:rA;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(iA)}const Wt=0,me=1,qe=2,Lt=3,Vr=4,El=5,En=6,Xo=7,Zt=8,ys=9,Yo=10,Xe=11,Tl=12,Dv=13,qo=14,Kt=15,Dl=16,Zo=17,ci=18,Cl=19,Cv=20,vs=21,$i=22,_c=23,yc=24,ut=25,Hf=1,Sv=2,hi=7,Ko=9,gn=11;function Yn(t){return Array.isArray(t)&&"object"==typeof t[Hf]}function Fn(t){return Array.isArray(t)&&!0===t[Hf]}function Vf(t){return 0!=(4&t.flags)}function Ys(t){return t.componentOffset>-1}function Gr(t){return!!t.template}function Gf(t){return 0!=(512&t[qe])}function qs(t,e){return t.hasOwnProperty(ji)?t[ji]:null}let fA=St.WeakRef??class dA{constructor(e){this.ref=e}deref(){return this.ref}},gA=0,di=null,xc=!1;function hn(t){const e=di;return di=t,e}class Rv{constructor(){this.id=gA++,this.ref=function pA(t){return new fA(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const r=n.producerNode.deref();if(null!=r&&n.atTrackingVersion===this.trackingVersion){if(r.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),r?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=xc;xc=!0;try{for(const[n,r]of this.consumers){const i=r.consumerNode.deref();null!=i&&i.trackingVersion===r.atTrackingVersion?i.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),i?.producers.delete(this.id))}}finally{xc=e}}producerAccessed(){if(xc)throw new Error("");if(null===di)return;let e=di.producers.get(this.id);void 0===e?(e={consumerNode:di.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:di.trackingVersion},di.producers.set(this.id,e),this.consumers.set(di.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=di.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==di?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let Nv=null;const Fv=()=>{};class vA extends Rv{constructor(e,n,r){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=Fv,this.registerOnCleanup=i=>{this.cleanupFn=i},this.consumerAllowSignalWrites=r}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=hn(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Fv,this.watch(this.registerOnCleanup)}finally{hn(e)}}cleanup(){this.cleanupFn()}}class wA{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Lv(t){return t.type.prototype.ngOnChanges&&(t.setInput=bA),xA}function xA(){const t=Bv(this),e=t?.current;if(e){const n=t.previous;if(n===ui)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function bA(t,e,n,r){const i=this.declaredInputs[n],s=Bv(t)||function EA(t,e){return t[kv]=e}(t,{previous:ui,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new wA(l&&l.currentValue,e,a===ui),t[r]=e}const kv="__ngSimpleChanges__";function Bv(t){return t[kv]||null}const fi=function(t,e,n){};function Nt(t){for(;Array.isArray(t);)t=t[Wt];return t}function qn(t,e){return Nt(e[t.index])}function hr(t,e){const n=e[t];return Yn(n)?n:n[Wt]}function ws(t,e){return null==e?null:t[e]}function Gv(t){t[Zo]=0}function AA(t){1024&t[qe]||(t[qe]|=1024,$v(t,1))}function jv(t){1024&t[qe]&&(t[qe]&=-1025,$v(t,-1))}function $v(t,e){let n=t[Lt];if(null===n)return;n[El]+=e;let r=n;for(n=n[Lt];null!==n&&(1===e&&1===r[El]||-1===e&&0===r[El]);)n[El]+=e,r=n,n=n[Lt]}const $e={lFrame:t0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Xv(){return $e.bindingsEnabled}function Z(){return $e.lFrame.lView}function pt(){return $e.lFrame.tView}function mn(){let t=Yv();for(;null!==t&&64===t.type;)t=t.parent;return t}function Yv(){return $e.lFrame.currentTNode}function pi(t,e){const n=$e.lFrame;n.currentTNode=t,n.isParent=e}function qf(){return $e.lFrame.isParent}function jA(t,e){const n=$e.lFrame;n.bindingIndex=n.bindingRootIndex=t,Kf(e)}function Kf(t){$e.lFrame.currentDirectiveIndex=t}function Jf(t){$e.lFrame.currentQueryIndex=t}function zA(t){const e=t[me];return 2===e.type?e.declTNode:1===e.type?t[En]:null}function Jv(t,e,n){if(n&ct.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&ct.Host||(i=zA(s),null===i||(s=s[qo],10&i.type))););if(null===i)return!1;e=i,t=s}const r=$e.lFrame=e0();return r.currentTNode=e,r.lView=t,!0}function ep(t){const e=e0(),n=t[me];$e.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function e0(){const t=$e.lFrame,e=null===t?null:t.child;return null===e?t0(t):e}function t0(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function n0(){const t=$e.lFrame;return $e.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const r0=n0;function tp(){const t=n0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Zs(t){$e.lFrame.selectedIndex=t}let o0=!0;function Sc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),null!=c&&(t.destroyHooks??=[]).push(n,c)}}function Ic(t,e,n){a0(t,e,3,n)}function Ac(t,e,n,r){(3&t[qe])===n&&a0(t,e,n,r)}function np(t,e){let n=t[qe];(3&n)===e&&(n&=8191,n+=1,t[qe]=n)}function a0(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&t[Zo]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(t[Zo]+=65536),(a<s||-1==s)&&(JA(t,n,e,l),t[Zo]=(4294901760&t[Zo])+l+2),l++}function l0(t,e){fi(4,t,e);const n=hn(null);try{e.call(t)}finally{hn(n),fi(5,t,e)}}function JA(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[qe]>>13<t[Zo]>>16&&(3&t[qe])===e&&(t[qe]+=8192,l0(a,s)):l0(a,s)}const ta=-1;class Al{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Ml(t){return 32767&t}function Pl(t,e){let n=function rM(t){return t>>16}(t),r=e;for(;n>0;)r=r[qo],n--;return r}let sp=!0;function Mc(t){const e=sp;return sp=t,e}const u0=255,c0=5;let iM=0;const gi={};function Pc(t,e){const n=h0(t,e);if(-1!==n)return n;const r=e[me];r.firstCreatePass&&(t.injectorIndex=e.length,op(r.data,t),op(e,null),op(r.blueprint,null));const i=Rc(t,e),s=t.injectorIndex;if(function ip(t){return t!==ta}(i)){const o=Ml(i),a=Pl(i,e),l=a[me].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function op(t,e){t.push(0,0,0,0,0,0,0,0,e)}function h0(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Rc(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=y0(i),null===r)return ta;if(n++,i=i[qo],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ta}function ap(t,e,n){!function sM(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(vl)&&(r=n[vl]),null==r&&(r=n[vl]=iM++);const i=r&u0;e.data[t+(i>>c0)]|=1<<i}(t,e,n)}function d0(t,e,n){if(n&ct.Optional||void 0!==t)return t;Sf()}function f0(t,e,n,r){if(n&ct.Optional&&void 0===r&&(r=null),!(n&(ct.Self|ct.Host))){const i=t[ys],s=Wn(void 0);try{return i?i.get(e,r,n&ct.Optional):lv(e,r,n&ct.Optional)}finally{Wn(s)}}return d0(r,0,n)}function p0(t,e,n,r=ct.Default,i){if(null!==t){if(2048&e[qe]&&!(r&ct.Self)){const o=function dM(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[qe]&&!(512&o[qe]);){const a=g0(s,o,n,r|ct.Self,gi);if(a!==gi)return a;let l=s.parent;if(!l){const u=o[Cv];if(u){const c=u.get(n,gi,r);if(c!==gi)return c}l=y0(o),o=o[qo]}s=l}return i}(t,e,n,r,gi);if(o!==gi)return o}const s=g0(t,e,n,r,gi);if(s!==gi)return s}return f0(e,n,r,i)}function g0(t,e,n,r,i){const s=function lM(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(vl)?t[vl]:void 0;return"number"==typeof e?e>=0?e&u0:cM:e}(n);if("function"==typeof s){if(!Jv(e,t,r))return r&ct.Host?d0(i,0,r):f0(e,n,r,i);try{let o;if(o=s(r),null!=o||r&ct.Optional)return o;Sf()}finally{r0()}}else if("number"==typeof s){let o=null,a=h0(t,e),l=ta,u=r&ct.Host?e[Kt][En]:null;for((-1===a||r&ct.SkipSelf)&&(l=-1===a?Rc(t,e):e[a+8],l!==ta&&_0(r,!1)?(o=e[me],a=Ml(l),e=Pl(l,e)):a=-1);-1!==a;){const c=e[me];if(m0(s,a,c.data)){const h=aM(a,e,n,o,r,u);if(h!==gi)return h}l=e[a+8],l!==ta&&_0(r,e[me].data[a+8]===u)&&m0(s,a,e)?(o=c,a=Ml(l),e=Pl(l,e)):a=-1}}return i}function aM(t,e,n,r,i,s){const o=e[me],a=o.data[t+8],c=function Nc(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,l=t.directiveStart,c=s>>20,d=i?a+c:t.directiveEnd;for(let f=r?a:a+c;f<d;f++){const p=o[f];if(f<l&&n===p||f>=l&&p.type===n)return f}if(i){const f=o[l];if(f&&Gr(f)&&f.type===n)return l}return null}(a,o,n,null==r?Ys(a)&&sp:r!=o&&0!=(3&a.type),i&ct.Host&&s===a);return null!==c?Ks(e,o,c,a):gi}function Ks(t,e,n,r){let i=t[n];const s=e.data;if(function eM(t){return t instanceof Al}(i)){const o=i;o.resolving&&function AI(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Ee(-200,`Circular dependency in DI detected for ${t}${n}`)}(Et(s[n]));const a=Mc(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?Wn(o.injectImpl):null;Jv(t,r,ct.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function QA(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Lv(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==u&&Wn(u),Mc(a),o.resolving=!1,r0()}}return i}function m0(t,e,n){return!!(n[e+(t>>c0)]&1<<t)}function _0(t,e){return!(t&ct.Self||t&ct.Host&&e)}class Bn{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return p0(this._tNode,this._lView,e,fc(r),n)}}function cM(){return new Bn(mn(),Z())}function y0(t){const e=t[me],n=e.type;return 2===n?e.declTNode:1===n?t[En]:null}function aa(t,e){t.forEach(n=>Array.isArray(n)?aa(n,e):e(n))}function Oc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var bs=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(bs||{});const yp=new Map;let jM=0;const wp="__ngContext__";function Tn(t,e){Yn(e)?(t[wp]=e[Cl],function zM(t){yp.set(t[Cl],t)}(e)):t[wp]=e}let xp;function bp(t,e){return xp(t,e)}function kl(t){const e=t[Lt];return Fn(e)?e[Lt]:e}function V0(t){return j0(t[Tl])}function G0(t){return j0(t[Vr])}function j0(t){for(;null!==t&&!Fn(t);)t=t[Vr];return t}function ha(t,e,n,r,i){if(null!=r){let s,o=!1;Fn(r)?s=r:Yn(r)&&(o=!0,r=r[Wt]);const a=Nt(r);0===t&&null!==n?null==i?X0(e,n,a):Qs(e,n,a,i||null,!0):1===t&&null!==n?Qs(e,n,a,i||null,!0):2===t?function Xc(t,e,n){const r=function zc(t,e){return t.parentNode(e)}(t,e);r&&function cP(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function fP(t,e,n,r,i){const s=n[hi];s!==Nt(n)&&ha(e,t,r,s,i);for(let a=gn;a<n.length;a++){const l=n[a];Ul(l[me],l,t,e,r,s)}}(e,t,s,n,i)}}function jc(t,e,n){return t.createElement(e,n)}function z0(t,e){const n=t[Ko],r=n.indexOf(e);jv(e),n.splice(r,1)}function Dp(t,e){if(!(256&e[qe])){e[qe]&=-129,e[qe]|=256,function uP(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Al)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];fi(4,a,l);try{l.call(a)}finally{fi(5,a,l)}}else{fi(4,i,s);try{s.call(i)}finally{fi(5,i,s)}}}}}(t,e),function lP(t,e){const n=t.cleanup,r=e[Xo];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[Xo]=null);const i=e[vs];if(null!==i){e[vs]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[me].type&&e[Xe].destroy();const n=e[Dl];if(null!==n&&Fn(e[Lt])){n!==e[Lt]&&z0(n,e);const r=e[ci];null!==r&&r.detachView(t)}!function WM(t){yp.delete(t[Cl])}(e)}}function Cp(t,e,n){return function W0(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[Wt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Ur.None||s===Ur.Emulated)return null}return qn(r,n)}}(t,e.parent,n)}function Qs(t,e,n,r,i){t.insertBefore(e,n,r,i)}function X0(t,e,n){t.appendChild(e,n)}function Y0(t,e,n,r,i){null!==r?Qs(t,e,n,r,i):X0(t,e,n)}let Sp,Pp,K0=function Z0(t,e,n){return 40&t.type?qn(t,n):null};function Wc(t,e,n,r){const i=Cp(t,r,e),s=e[Xe],a=function q0(t,e,n){return K0(t,e,n)}(r.parent||e[En],r,e);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)Y0(s,i,n[l],a,!1);else Y0(s,i,n,a,!1);void 0!==Sp&&Sp(s,r,e,n,i)}function J0(t,e){return null!==e?t[Kt][En].projection[e.projection]:null}function Ap(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],l=n.type;if(o&&0===e&&(a&&Tn(Nt(a),r),n.flags|=2),32!=(32&n.flags))if(8&l)Ap(t,e,n.child,r,i,s,!1),ha(e,t,i,a,s);else if(32&l){const u=bp(n,r);let c;for(;c=u();)ha(e,t,i,c,s);ha(e,t,i,a,s)}else 16&l?tw(t,e,r,n,i,s):ha(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ul(t,e,n,r,i,s){Ap(n,r,t.firstChild,e,i,s,!1)}function tw(t,e,n,r,i,s){const o=n[Kt],l=o[En].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)ha(e,t,i,l[u],s);else{let u=l;const c=o[Lt];(function Hc(t){return 128==(128&t.flags)})(r)&&(u.flags|=128),Ap(t,e,u,c,i,s,!0)}}function nw(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function rw(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Bf(t,e,r),null!==i&&nw(t,e,i),null!==s&&function gP(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}class Ze{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ct({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Kc=new Ze("ENVIRONMENT_INITIALIZER"),mw=new Ze("INJECTOR",-1),_w=new Ze("INJECTOR_DEF_TYPES");class kp{get(e,n=_l){if(n===_l){const r=new Error(`NullInjectorError: No provider for ${an(e)}!`);throw r.name="NullInjectorError",r}return n}}function jP(...t){return{\u0275providers:vw(0,t),\u0275fromNgModule:!0}}function vw(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return aa(e,o=>{const a=o;Qc(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&ww(i,s),n}function ww(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];Bp(i,s=>{e(s,r)})}}function Qc(t,e,n,r){if(!(t=ze(t)))return!1;let i=null,s=cc(t);const o=!s&&ft(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const l=t.ngModule;if(s=cc(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of l)Qc(u,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{aa(s.imports,c=>{Qc(c,e,n,r)&&(u||=[],u.push(c))})}finally{}void 0!==u&&ww(u,e)}if(!a){const u=qs(i)||(()=>new i);e({provide:i,useFactory:u,deps:yt},i),e({provide:_w,useValue:i,multi:!0},i),e({provide:Kc,useValue:()=>ht(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const u=t;Bp(l,c=>{e(c,u)})}}}return i!==t&&void 0!==t.providers}function Bp(t,e){for(let n of t)Cf(n)&&(n=n.\u0275providers),Array.isArray(n)?Bp(n,e):e(n)}const $P=Dt({provide:String,useValue:Dt});function Up(t){return null!==t&&"object"==typeof t&&$P in t}function Js(t){return"function"==typeof t}const Hp=new Ze("Set Injector scope."),Jc={},WP={};let Vp;function eh(){return void 0===Vp&&(Vp=new kp),Vp}class Yi{}class th extends Yi{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jp(e,o=>this.processProvider(o)),this.records.set(mw,ga(void 0,this)),i.has("environment")&&this.records.set(Yi,ga(void 0,this));const s=this.records.get(Hp);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(_w.multi,yt,ct.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=_s(this),r=Wn(void 0);try{return e()}finally{_s(n),Wn(r)}}get(e,n=_l,r=ct.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(fv))return e[fv](this);r=fc(r);const s=_s(this),o=Wn(void 0);try{if(!(r&ct.SkipSelf)){let l=this.records.get(e);if(void 0===l){const u=function KP(t){return"function"==typeof t||"object"==typeof t&&t instanceof Ze}(e)&&uc(e);l=u&&this.injectableDefInScope(u)?ga(Gp(e),Jc):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&ct.Self?eh():this.parent).get(e,n=r&ct.Optional&&n===_l?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[dc]=a[dc]||[]).unshift(an(e)),s)throw a;return function jI(t,e,n,r){const i=t[dc];throw e[cv]&&i.unshift(e[cv]),t.message=function $I(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=an(e);if(Array.isArray(e))i=e.map(an).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):an(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(BI,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[dc]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Wn(o),_s(s)}}resolveInjectorInitializers(){const e=_s(this),n=Wn(void 0);try{const i=this.get(Kc.multi,yt,ct.Self);for(const s of i)s()}finally{_s(e),Wn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(an(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ee(205,!1)}processProvider(e){let n=Js(e=ze(e))?e:ze(e&&e.provide);const r=function YP(t){return Up(t)?ga(void 0,t.useValue):ga(Ew(t),Jc)}(e);if(Js(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=ga(void 0,Jc,!0),i.factory=()=>Ff(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Jc&&(n.value=WP,n.value=n.factory()),"object"==typeof n.value&&n.value&&function ZP(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=ze(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Gp(t){const e=uc(t),n=null!==e?e.factory:qs(t);if(null!==n)return n;if(t instanceof Ze)throw new Ee(204,!1);if(t instanceof Function)return function XP(t){const e=t.length;if(e>0)throw function Ol(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new Ee(204,!1);const n=function OI(t){return t&&(t[hc]||t[ov])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Ee(204,!1)}function Ew(t,e,n){let r;if(Js(t)){const i=ze(t);return qs(i)||Gp(i)}if(Up(t))r=()=>ze(t.useValue);else if(function bw(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Ff(t.deps||[]));else if(function xw(t){return!(!t||!t.useExisting)}(t))r=()=>ht(ze(t.useExisting));else{const i=ze(t&&(t.useClass||t.provide));if(!function qP(t){return!!t.deps}(t))return qs(i)||Gp(i);r=()=>new i(...Ff(t.deps))}return r}function ga(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function jp(t,e){for(const n of t)Array.isArray(n)?jp(n,e):n&&Cf(n)?jp(n.\u0275providers,e):e(n)}const nh=new Ze("AppId",{providedIn:"root",factory:()=>QP}),QP="ng",Tw=new Ze("Platform Initializer"),ma=new Ze("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Dw=new Ze("CSP nonce",{providedIn:"root",factory:()=>function fa(){if(void 0!==Pp)return Pp;if(typeof document<"u")return document;throw new Ee(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Cw=(t,e,n)=>null;function Kp(t,e,n=!1){return Cw(t,e,n)}class lR{}class Aw{}class cR{resolveComponentFactory(e){throw function uR(t){const e=Error(`No component factory found for ${an(t)}.`);return e.ngComponent=t,e}(e)}}let lh=(()=>{class e{}return e.NULL=new cR,e})();function hR(){return va(mn(),Z())}function va(t,e){return new eo(qn(t,e))}let eo=(()=>{class e{constructor(r){this.nativeElement=r}}return e.__NG_ELEMENT_ID__=hR,e})();class Pw{}let pR=(()=>{var t;class e{}return(t=e).\u0275prov=Ct({token:t,providedIn:"root",factory:()=>null}),e})();class eg{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const gR=new eg("16.2.3"),tg={};function Lw(t,e=null,n=null,r){const i=kw(t,e,n,r);return i.resolveInjectorInitializers(),i}function kw(t,e=null,n=null,r,i=new Set){const s=[n||yt,jP(t)];return r=r||("object"==typeof t?void 0:an(t)),new th(s,e||eh(),r||null,i)}let mi=(()=>{var t;class e{static create(r,i){if(Array.isArray(r))return Lw({name:""},i,r,"");{const s=r.name??"";return Lw({name:s},r.parent,r.providers,s)}}}return(t=e).THROW_IF_NOT_FOUND=_l,t.NULL=new kp,t.\u0275prov=Ct({token:t,providedIn:"any",factory:()=>ht(mw)}),t.__NG_ELEMENT_ID__=-1,e})();function ig(t){return e=>{setTimeout(t,void 0,e)}}const qi=class bR extends B{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=ig(s),i&&(i=ig(i)),o&&(o=ig(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof J&&e.add(a),a}};function Bw(...t){}class Vt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qi(!1),this.onMicrotaskEmpty=new qi(!1),this.onStable=new qi(!1),this.onError=new qi(!1),typeof Zone>"u")throw new Ee(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function ER(){const t="function"==typeof St.requestAnimationFrame;let e=St[t?"requestAnimationFrame":"setTimeout"],n=St[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function CR(t){const e=()=>{!function DR(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(St,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,og(t),t.isCheckStableRunning=!0,sg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),og(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Uw(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Hw(t)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return Uw(t),n.invoke(i,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),Hw(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,og(t),sg(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vt.isInAngularZone())throw new Ee(909,!1)}static assertNotInAngularZone(){if(Vt.isInAngularZone())throw new Ee(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,TR,Bw,Bw);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const TR={};function sg(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function og(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Uw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Hw(t){t._nesting--,sg(t)}class SR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qi,this.onMicrotaskEmpty=new qi,this.onStable=new qi,this.onError=new qi}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const Vw=new Ze("",{providedIn:"root",factory:Gw});function Gw(){const t=Rt(Vt);let e=!0;return TI(new x(i=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{i.next(e),i.complete()})}),new x(i=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{Vt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=t.onUnstable.subscribe(()=>{Vt.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(rv()))}let ag=(()=>{var t;class e{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new Ee(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const r of this.callbacks)r.invoke()}finally{this.runningCallbacks=!1;for(const r of this.deferredCallbacks)this.callbacks.add(r);this.deferredCallbacks.clear()}}register(r){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(r)}unregister(r){this.callbacks.delete(r),this.deferredCallbacks.delete(r)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}}return(t=e).\u0275prov=Ct({token:t,providedIn:"root",factory:()=>new t}),e})();function zl(t){for(;t;){t[qe]|=64;const e=kl(t);if(Gf(t)&&!e)return t;t=e}return null}function lg(t){return t.ngOriginalError}class to{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&lg(e);for(;n&&lg(n);)n=lg(n);return n||null}}const Xw=new Ze("",{providedIn:"root",factory:()=>!1});class Kw extends Rv{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){zl(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,r){const i=hn(this);this.trackingVersion++;try{e(n,r)}finally{hn(i)}}destroy(){this.trackingVersion++}}let ch=null;function Qw(){return ch??=new Kw,ch}function Jw(t,e){return t[e]??Qw()}function ex(t,e){const n=Qw();n.hasReadASignal&&(t[e]=ch,n.lView=t,ch=new Kw)}const Ke={};function nt(t,e=ct.Default){const n=Z();return null===n?ht(t,e):p0(mn(),n,ze(t),e)}function hh(t,e,n,r,i,s,o,a,l,u,c){const h=e.blueprint.slice();return h[Wt]=i,h[qe]=140|r,(null!==u||t&&2048&t[qe])&&(h[qe]|=2048),Gv(h),h[Lt]=h[qo]=t,h[Zt]=n,h[Yo]=o||t&&t[Yo],h[Xe]=a||t&&t[Xe],h[ys]=l||t&&t[ys]||null,h[En]=s,h[Cl]=function $M(){return jM++}(),h[$i]=c,h[Cv]=u,h[Kt]=2==e.type?t[Kt]:h,h}function ba(t,e,n,r,i){let s=t.data[e];if(null===s)s=function ug(t,e,n,r,i){const s=Yv(),o=qf(),l=t.data[e]=function WR(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Jo(){return null!==$e.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(t,e,n,r,i),function GA(){return $e.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Il(){const t=$e.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return pi(s,!0),s}function Wl(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function nx(t,e,n,r,i){const s=Jw(e,_c),o=function kn(){return $e.lFrame.selectedIndex}(),a=2&r;try{if(Zs(-1),a&&e.length>ut&&function tx(t,e,n,r){if(!r)if(3==(3&e[qe])){const s=t.preOrderCheckHooks;null!==s&&Ic(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Ac(e,s,0,n)}Zs(n)}(t,e,ut,!1),fi(a?2:0,i),a)s.runInContext(n,r,i);else{const u=hn(null);try{n(r,i)}finally{hn(u)}}}finally{a&&null===e[_c]&&ex(e,_c),Zs(o),fi(a?3:1,i)}}function cg(t,e,n){if(Vf(e)){const r=hn(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{hn(r)}}}function rx(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=fg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function fg(t,e,n,r,i,s,o,a,l,u,c){const h=ut+r,d=h+i,f=function HR(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ke);return n}(h,d),p="function"==typeof u?u():u;return f[me]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:c}}let ix=t=>null;function sx(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?ox(n,e,i,s):r.hasOwnProperty(i)&&ox(n,e,r[i],s)}return n}function ox(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function ax(t,e,n,r,i,s){for(let u=0;u<r.length;u++)ap(Pc(n,e),t,r[u].type);!function iN(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let u=0;u<r.length;u++){const c=r[u];c.providersResolver&&c.providersResolver(c)}let o=!1,a=!1,l=Wl(t,e,r.length,null);for(let u=0;u<r.length;u++){const c=r[u];n.mergedAttrs=wl(n.mergedAttrs,c.hostAttrs),sN(t,n,e,l,c),rN(l,c,i),null!==c.contentQueries&&(n.flags|=4),(null!==c.hostBindings||null!==c.hostAttrs||0!==c.hostVars)&&(n.flags|=64);const h=c.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}!function XR(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let l=null,u=null;for(let c=e.directiveStart;c<i;c++){const h=s[c],d=n?n.get(h):null,p=d?d.outputs:null;l=sx(h.inputs,c,l,d?d.inputs:null),u=sx(h.outputs,c,u,p);const g=null===l||null===o||vv(e)?null:lN(l,c,o);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}(t,n,s)}function lx(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function $A(){return $e.lFrame.currentDirectiveIndex}();try{Zs(s);for(let a=r;a<i;a++){const l=t.data[a],u=e[a];Kf(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&eN(l,u)}}finally{Zs(-1),Kf(o)}}function eN(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function gg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function rN(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Gr(e)&&(n[""]=t)}}function sN(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=qs(i.type)),o=new Al(s,Gr(i),nt);t.blueprint[r]=o,n[r]=o,function KR(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function QR(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,Wl(t,n,i.hostVars,Ke),i)}function aN(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)ux(r,n,o[a++],o[a++],o[a++])}function ux(t,e,n,r,i){const s=hn(null);try{const o=t.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==t.setInput?t.setInput(e,i,n,r):e[r]=i}finally{hn(s)}}function lN(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function hx(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];Jf(n[r]),o.contentQueries(2,e[s],s)}}}function dh(t,e){return t[Tl]?t[Dv][Vr]=e:t[Tl]=e,t[Dv]=e,e}function _g(t,e,n){Jf(0);const r=hn(null);try{e(t,n)}finally{hn(r)}}function yg(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];ux(t.data[o],e[o],r,a,i)}}function uN(t,e){const n=hr(e,t),r=n[me];!function cN(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[Wt];null!==i&&null===n[$i]&&(n[$i]=Kp(i,n[ys])),vg(r,n,n[Zt])}function vg(t,e,n){ep(e);try{const r=t.viewQuery;null!==r&&_g(1,r,n);const i=t.template;null!==i&&nx(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&hx(t,e),t.staticViewQueries&&_g(2,t.viewQuery,n);const s=t.components;null!==s&&function hN(t,e){for(let n=0;n<e.length;n++)uN(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[qe]&=-5,tp()}}let mx=(()=>{var t;class e{constructor(){this.all=new Set,this.queue=new Map}create(r,i,s){const o=typeof Zone>"u"?null:Zone.current,a=new vA(r,c=>{this.all.has(c)&&this.queue.set(c,o)},s);let l;this.all.add(a),a.notify();const u=()=>{a.cleanup(),l?.(),this.all.delete(a),this.queue.delete(a)};return l=i?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[r,i]of this.queue)this.queue.delete(r),i?i.run(()=>r.run()):r.run()}get isQueueEmpty(){return 0===this.queue.size}}return(t=e).\u0275prov=Ct({token:t,providedIn:"root",factory:()=>new t}),e})();function fh(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Ef(i,a):2==s&&(r=Ef(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Xl(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];null!==s&&r.push(Nt(s)),Fn(s)&&_x(s,r);const o=n.type;if(8&o)Xl(t,e,n.child,r);else if(32&o){const a=bp(n,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=J0(e,n);if(Array.isArray(a))r.push(...a);else{const l=kl(e[Kt]);Xl(l[me],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function _x(t,e){for(let n=gn;n<t.length;n++){const r=t[n],i=r[me].firstChild;null!==i&&Xl(r[me],r,i,e)}t[hi]!==t[Wt]&&e.push(t[hi])}function ph(t,e,n,r=!0){const i=e[Yo],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{yx(t,e,t.template,n)}catch(l){throw r&&function gx(t,e){const n=t[ys],r=n?n.get(to,null):null;r&&r.handleError(e)}(e,l),l}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function yx(t,e,n,r){const i=e[qe];if(256!=(256&i)){e[Yo].effectManager?.flush(),ep(e);try{Gv(e),function Zv(t){return $e.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&nx(t,e,n,2,r);const o=3==(3&i);if(o){const u=t.preOrderCheckHooks;null!==u&&Ic(e,u,null)}else{const u=t.preOrderHooks;null!==u&&Ac(e,u,0,null),np(e,0)}if(function pN(t){for(let e=V0(t);null!==e;e=G0(e)){if(!e[Sv])continue;const n=e[Ko];for(let r=0;r<n.length;r++){AA(n[r])}}}(e),vx(e,2),null!==t.contentQueries&&hx(t,e),o){const u=t.contentCheckHooks;null!==u&&Ic(e,u)}else{const u=t.contentHooks;null!==u&&Ac(e,u,1),np(e,1)}!function UR(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const r=Jw(e,yc);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)Zs(~s);else{const o=s,a=n[++i],l=n[++i];jA(a,o),r.runInContext(l,2,e[o])}}}finally{null===e[yc]&&ex(e,yc),Zs(-1)}}(t,e);const a=t.components;null!==a&&xx(e,a,0);const l=t.viewQuery;if(null!==l&&_g(2,l,r),o){const u=t.viewCheckHooks;null!==u&&Ic(e,u)}else{const u=t.viewHooks;null!==u&&Ac(e,u,2),np(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[qe]&=-73,jv(e)}finally{tp()}}}function vx(t,e){for(let n=V0(t);null!==n;n=G0(n))for(let r=gn;r<n.length;r++)wx(n[r],e)}function gN(t,e,n){wx(hr(e,t),n)}function wx(t,e){if(!function SA(t){return 128==(128&t[qe])}(t))return;const n=t[me];if(80&t[qe]&&0===e||1024&t[qe]||2===e)yx(n,t,n.template,t[Zt]);else if(t[El]>0){vx(t,1);const i=t[me].components;null!==i&&xx(t,i,1)}}function xx(t,e,n){for(let r=0;r<e.length;r++)gN(t,e[r],n)}class Yl{get rootNodes(){const e=this._lView,n=e[me];return Xl(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Zt]}set context(e){this._lView[Zt]=e}get destroyed(){return 256==(256&this._lView[qe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Lt];if(Fn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(function $c(t,e){if(t.length<=gn)return;const n=gn+e,r=t[n];if(r){const i=r[Dl];null!==i&&i!==t&&z0(i,r),e>0&&(t[n-1][Vr]=r[Vr]);const s=Oc(t,gn+e);!function nP(t,e){Ul(t,e,e[Xe],2,null,null),e[Wt]=null,e[En]=null}(r[me],r);const o=s[ci];null!==o&&o.detachView(s[me]),r[Lt]=null,r[Vr]=null,r[qe]&=-129}return r}(e,r),Oc(n,r))}this._attachedToViewContainer=!1}!function Tp(t,e){if(!(256&e[qe])){const n=e[Xe];e[_c]?.destroy(),e[yc]?.destroy(),n.destroyNode&&Ul(t,e,n,3,null,null),function sP(t){let e=t[Tl];if(!e)return Dp(t[me],t);for(;e;){let n=null;if(Yn(e))n=e[Tl];else{const r=e[gn];r&&(n=r)}if(!n){for(;e&&!e[Vr]&&e!==t;)Yn(e)&&Dp(e[me],e),e=e[Lt];null===e&&(e=t),Yn(e)&&Dp(e[me],e),n=e&&e[Vr]}e=n}}(e)}}(this._lView[me],this._lView)}onDestroy(e){!function zv(t,e){if(256==(256&t[qe]))throw new Ee(911,!1);null===t[vs]&&(t[vs]=[]),t[vs].push(e)}(this._lView,e)}markForCheck(){zl(this._cdRefInjectingView||this._lView)}detach(){this._lView[qe]&=-129}reattach(){this._lView[qe]|=128}detectChanges(){ph(this._lView[me],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function iP(t,e){Ul(t,e,e[Xe],2,null,null)}(this._lView[me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ee(902,!1);this._appRef=e}}class mN extends Yl{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;ph(e[me],e,e[Zt],!1)}checkNoChanges(){}get context(){return null}}class bx extends lh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=ft(e);return new ql(n,this.ngModule)}}function Ex(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class yN{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=fc(r);const i=this.injector.get(e,tg,r);return i!==tg||n===tg?i:this.parentInjector.get(e,n,r)}}class ql extends Aw{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=Ex(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Ex(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function eA(t){return t.map(JI).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof Yi?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new yN(e,s):e,a=o.get(Pw,null);if(null===a)throw new Ee(407,!1);const h={rendererFactory:a,sanitizer:o.get(pR,null),effectManager:o.get(mx,null),afterRenderEventManager:o.get(ag,null)},d=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?function VR(t,e,n,r){const s=r.get(Xw,!1)||n===Ur.ShadowDom,o=t.selectRootElement(e,s);return function GR(t){ix(t)}(o),o}(d,r,this.componentDef.encapsulation,o):jc(d,f,function _N(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),y=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let v=null;null!==p&&(v=Kp(p,o,!0));const w=fg(0,null,null,1,0,null,null,null,null,null,null),E=hh(null,w,null,y,null,null,h,d,o,null,v);let M,H;ep(E);try{const k=this.componentDef;let F,V=null;k.findHostDirectiveDefs?(F=[],V=new Map,k.findHostDirectiveDefs(k,F,V),F.push(k)):F=[k];const W=function wN(t,e){const n=t[me],r=ut;return t[r]=e,ba(n,r,2,"#host",null)}(E,p),Q=function xN(t,e,n,r,i,s,o){const a=i[me];!function bN(t,e,n,r){for(const i of t)e.mergedAttrs=wl(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(fh(e,e.mergedAttrs,!0),null!==n&&rw(r,n,e))}(r,t,e,o);let l=null;null!==e&&(l=Kp(e,i[ys]));const u=s.rendererFactory.createRenderer(e,n);let c=16;n.signals?c=4096:n.onPush&&(c=64);const h=hh(i,rx(n),null,c,i[t.index],t,s,u,null,null,l);return a.firstCreatePass&&gg(a,t,r.length-1),dh(i,h),i[t.index]=h}(W,p,k,F,E,h,d);H=function Vv(t,e){return t.data[e]}(w,ut),p&&function TN(t,e,n,r){if(r)Bf(t,n,["ng-version",gR.full]);else{const{attrs:i,classes:s}=function tA(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Hr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Bf(t,n,i),s&&s.length>0&&nw(t,n,s.join(" "))}}(d,k,p,r),void 0!==n&&function DN(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(H,this.ngContentSelectors,n),M=function EN(t,e,n,r,i,s){const o=mn(),a=i[me],l=qn(o,i);ax(a,i,o,n,null,r);for(let c=0;c<n.length;c++)Tn(Ks(i,a,o.directiveStart+c,o),i);lx(a,i,o),l&&Tn(l,i);const u=Ks(i,a,o.directiveStart+o.componentOffset,o);if(t[Zt]=i[Zt]=u,null!==s)for(const c of s)c(u,e);return cg(a,o,t),u}(Q,k,F,V,E,[CN]),vg(w,E,null)}finally{tp()}return new vN(this.componentType,M,va(H,E),E,H)}}class vN extends lR{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new mN(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;yg(s[me],s,i,e,n),this.previousInputValues.set(e,n),zl(hr(this._tNode.index,s))}}get injector(){return new Bn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function CN(){const t=mn();Sc(Z()[me],t)}function Cg(t,e,n,r,i){const o=i?"class":"style";yg(t,n,e.inputs[o],o,r)}function Sg(t,e,n,r){const i=Z(),s=pt(),o=ut+t,a=i[Xe],l=s.firstCreatePass?function lO(t,e,n,r,i,s){const o=e.consts,l=ba(e,t,2,r,ws(o,i));return function pg(t,e,n,r){if(Xv()){const i=null===r?null:{"":-1},s=function tN(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(wv(e,o.selectors,!1))if(r||(r=[]),Gr(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),gg(t,e,a.length)}else r.unshift(o),gg(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&ax(t,e,n,o,i,a),i&&function nN(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new Ee(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=wl(n.mergedAttrs,n.attrs)}(e,n,l,ws(o,s)),null!==l.attrs&&fh(l,l.attrs,!1),null!==l.mergedAttrs&&fh(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,n,r):s.data[o],u=zx(s,i,l,a,e,t);i[o]=u;const c=function wc(t){return 1==(1&t.flags)}(l);return pi(l,!0),rw(a,u,l),32!=(32&l.flags)&&function Cc(){return o0}()&&Wc(s,i,u,l),0===function PA(){return $e.lFrame.elementDepthCount}()&&Tn(u,i),function RA(){$e.lFrame.elementDepthCount++}(),c&&(function hg(t,e,n){Xv()&&(function JR(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;Ys(n)&&function oN(t,e,n){const r=qn(e,t),i=rx(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=dh(t,hh(t,i,null,o,r,e,null,t[Yo].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Pc(n,e),Tn(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const l=t.data[a],u=Ks(e,t,a,n);Tn(u,e),null!==o&&aN(0,a-i,u,l,0,o),Gr(l)&&(hr(n.index,e)[Zt]=Ks(e,t,a,n))}}(t,e,n,qn(n,e)),64==(64&n.flags)&&lx(t,e,n))}(s,i,l),cg(s,l,i)),null!==r&&function dg(t,e,n=qn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}(i,l),Sg}function Ig(){let t=mn();qf()?function Zf(){$e.lFrame.isParent=!1}():(t=t.parent,pi(t,!1));const e=t;(function OA(t){return $e.skipHydrationRootTNode===t})(e)&&function BA(){$e.skipHydrationRootTNode=null}(),function NA(){$e.lFrame.elementDepthCount--}();const n=pt();return n.firstCreatePass&&(Sc(n,t),Vf(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function tM(t){return 0!=(8&t.flags)}(e)&&Cg(n,e,Z(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function nM(t){return 0!=(16&t.flags)}(e)&&Cg(n,e,Z(),e.stylesWithoutHost,!1),Ig}function Ag(t,e,n,r){return Sg(t,e,n,r),Ig(),Ag}let zx=(t,e,n,r,i,s)=>(function xs(t){o0=t}(!0),jc(r,i,function s0(){return $e.lFrame.currentNamespace}()));function Rg(t){return!!t&&"function"==typeof t.then}function Yx(t){return!!t&&"function"==typeof t.subscribe}const Oa="en-US";let Xb=Oa;function Vg(t,e,n,r,i){if(t=ze(t),Array.isArray(t))for(let s=0;s<t.length;s++)Vg(t[s],e,n,r,i);else{const s=pt(),o=Z(),a=mn();let l=Js(t)?t:ze(t.provide);const u=Ew(t),c=1048575&a.providerIndexes,h=a.directiveStart,d=a.providerIndexes>>20;if(Js(t)||!t.multi){const f=new Al(u,i,nt),p=jg(l,e,i?c:c+d,h);-1===p?(ap(Pc(a,o),s,l),Gg(s,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{const f=jg(l,e,c+d,h),p=jg(l,e,c,c+d),m=p>=0&&n[p];if(i&&!m||!i&&!(f>=0&&n[f])){ap(Pc(a,o),s,l);const y=function uL(t,e,n,r,i){const s=new Al(t,n,nt);return s.multi=[],s.index=e,s.componentProviders=0,yE(s,i,r&&!n),s}(i?lL:aL,n.length,i,r,u);!i&&m&&(n[p].providerFactory=y),Gg(s,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)}else Gg(s,t,f>-1?f:p,yE(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Gg(t,e,n,r){const i=Js(e),s=function zP(t){return!!t.useClass}(e);if(i||s){const l=(s?ze(e.useClass):e).prototype.ngOnDestroy;if(l){const u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const c=u.indexOf(n);-1===c?u.push(n,[r,l]):u[c+1].push(r,l)}else u.push(n,l)}}}function yE(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function jg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function aL(t,e,n,r){return $g(this.multi,[])}function lL(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ks(n,n[me],this.providerFactory.index,r);s=a.slice(0,o),$g(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],$g(i,s);return s}function $g(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function vE(t,e=[]){return n=>{n.providersResolver=(r,i)=>function oL(t,e,n){const r=pt();if(r.firstCreatePass){const i=Gr(t);Vg(n,r.data,r.blueprint,i,!0),Vg(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class so{}class cL{}class zg extends so{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new bx(this);const i=function cr(t,e){const n=t[dv]||null;if(!n&&!0===e)throw new Error(`Type ${an(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function Zi(t){return t instanceof Function?t():t}(i.bootstrap),this._r3Injector=kw(e,n,[{provide:so,useValue:this},{provide:lh,useValue:this.componentFactoryResolver},...r],an(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Wg extends cL{constructor(e){super(),this.moduleType=e}create(e){return new zg(this.moduleType,e,[])}}const Ok=new Ze("Application Initializer");let sm=(()=>{var t;class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=Rt(Ok,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const r=[];for(const s of this.appInits){const o=s();if(Rg(o))r.push(o);else if(Yx(o)){const a=new Promise((l,u)=>{o.subscribe({complete:l,error:u})});r.push(a)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),0===r.length&&i(),this.initialized=!0}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ct({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const Ji=new Ze("LocaleId",{providedIn:"root",factory:()=>Rt(Ji,ct.Optional|ct.SkipSelf)||function Lk(){return typeof $localize<"u"&&$localize.locale||Oa}()});let Uk=(()=>{var t;class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new wf(!1)}add(){this.hasPendingTasks.next(!0);const r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ct({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const dT=new Ze(""),Ph=new Ze("");let cm,lm=(()=>{var t;class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,cm||(function oB(t){cm=t}(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(r)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}}return(t=e).\u0275fac=function(r){return new(r||t)(ht(Vt),ht(um),ht(Ph))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),e})(),um=(()=>{var t;class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return cm?.findTestabilityInTree(this,r,i)??null}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ct({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})(),Ds=null;const fT=new Ze("AllowMultipleToken"),hm=new Ze("PlatformDestroyListeners"),pT=new Ze("appBootstrapListener");function _T(t,e,n=[]){const r=`Platform: ${e}`,i=new Ze(r);return(s=[])=>{let o=dm();if(!o||o.injector.get(fT,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function uB(t){if(Ds&&!Ds.get(fT,!1))throw new Ee(400,!1);(function gT(){!function _A(t){Nv=t}(()=>{throw new Ee(600,!1)})})(),Ds=t;const e=t.get(vT);(function mT(t){t.get(Tw,null)?.forEach(n=>n())})(t)}(function yT(t=[],e){return mi.create({name:e,providers:[{provide:Hp,useValue:"platform"},{provide:hm,useValue:new Set([()=>Ds=null])},...t]})}(a,r))}return function hB(t){const e=dm();if(!e)throw new Ee(401,!1);return e}()}}function dm(){return Ds?.get(vT)??null}let vT=(()=>{var t;class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){const s=function dB(t="zone.js",e){return"noop"===t?new SR:"zone.js"===t?new Vt(e):t}(i?.ngZone,function wT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return s.run(()=>{const o=function dL(t,e,n){return new zg(t,e,n)}(r.moduleType,this.injector,function DT(t){return[{provide:Vt,useFactory:t},{provide:Kc,multi:!0,useFactory:()=>{const e=Rt(pB,{optional:!0});return()=>e.initialize()}},{provide:TT,useFactory:fB},{provide:Vw,useFactory:Gw}]}(()=>s)),a=o.injector.get(to,null);return s.runOutsideAngular(()=>{const l=s.onError.subscribe({next:u=>{a.handleError(u)}});o.onDestroy(()=>{Rh(this._modules,o),l.unsubscribe()})}),function xT(t,e,n){try{const r=n();return Rg(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(a,s,()=>{const l=o.injector.get(sm);return l.runInitializers(),l.donePromise.then(()=>(function Yb(t){Er(t,"Expected localeId to be defined"),"string"==typeof t&&(Xb=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Ji,Oa)||Oa),this._moduleDoBootstrap(o),o))})})}bootstrapModule(r,i=[]){const s=bT({},i);return function aB(t,e,n){const r=new Wg(n);return Promise.resolve(r)}(0,0,r).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(r){const i=r.injector.get(cu);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(s=>i.bootstrap(s));else{if(!r.instance.ngDoBootstrap)throw new Ee(-403,!1);r.instance.ngDoBootstrap(i)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ee(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const r=this._injector.get(hm,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(t=e).\u0275fac=function(r){return new(r||t)(ht(mi))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac,providedIn:"platform"}),e})();function bT(t,e){return Array.isArray(e)?e.reduce(bT,t):{...t,...e}}let cu=(()=>{var t;class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Rt(TT),this.zoneIsStable=Rt(Vw),this.componentTypes=[],this.components=[],this.isStable=Rt(Uk).hasPendingTasks.pipe(function CI(t,e){return X((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(le(r,l=>{i?.unsubscribe();let u=0;const c=s++;lr(t(l,c)).subscribe(i=le(r,h=>r.next(e?e(l,h,c,u++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}(r=>r?function DI(...t){return nv(t,Qy(t))}(!1):this.zoneIsStable),bf(),rv()),this._injector=Rt(Yi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){const s=r instanceof Aw;if(!this._injector.get(sm).done)throw!s&&function bl(t){const e=ft(t)||pn(t)||On(t);return null!==e&&e.standalone}(r),new Ee(405,!1);let a;a=s?r:this._injector.get(lh).resolveComponentFactory(r),this.componentTypes.push(a.componentType);const l=function lB(t){return t.isBoundToModule}(a)?void 0:this._injector.get(so),c=a.create(mi.NULL,[],i||a.selector,l),h=c.location.nativeElement,d=c.injector.get(dT,null);return d?.registerApplication(h),c.onDestroy(()=>{this.detachView(c.hostView),Rh(this.components,c),d?.unregisterApplication(h)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new Ee(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}attachView(r){const i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){const i=r;Rh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);const i=this._injector.get(pT,[]);i.push(...this._bootstrapListeners),i.forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Rh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Ee(406,!1);const r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ct({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();function Rh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const TT=new Ze("",{providedIn:"root",factory:()=>Rt(to).handleError.bind(void 0)});function fB(){const t=Rt(Vt),e=Rt(to);return n=>t.runOutsideAngular(()=>e.handleError(n))}let pB=(()=>{var t;class e{constructor(){this.zone=Rt(Vt),this.applicationRef=Rt(cu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ct({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();const PB=_T(null,"core",[]);let RB=(()=>{var t;class e{constructor(r){}}return(t=e).\u0275fac=function(r){return new(r||t)(ht(cu))},t.\u0275mod=xl({type:t}),t.\u0275inj=zo({}),e})(),ym=null;function vm(){return ym}class zB{}const ao=new Ze("DocumentToken");let l3=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=xl({type:t}),t.\u0275inj=zo({}),e})();function iD(t){return"server"===t}class L3 extends zB{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Lm extends L3{static makeCurrent(){!function $B(t){ym||(ym=t)}(new Lm)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function k3(){return gu=gu||document.querySelector("base"),gu?gu.getAttribute("href"):null}();return null==n?null:function B3(t){qh=qh||document.createElement("a"),qh.setAttribute("href",t);const e=qh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){gu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function P2(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let qh,gu=null,H3=(()=>{var t;class e{build(){return new XMLHttpRequest}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),e})();const km=new Ze("EventManagerPlugins");let uD=(()=>{var t;class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new Ee(5101,!1);return this._eventNameToPlugin.set(r,i),i}}return(t=e).\u0275fac=function(r){return new(r||t)(ht(km),ht(Vt))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),e})();class cD{constructor(e){this._doc=e}}const Bm="ng-app-id";let hD=(()=>{var t;class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=iD(o),this.resetHostNodes()}addStyles(r){for(const i of r)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(r){for(const i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(const i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(const i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){const i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){const r=this.doc.head?.querySelectorAll(`style[${Bm}="${this.appId}"]`);if(r?.length){const i=new Map;return r.forEach(s=>{null!=s.textContent&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){const s=this.styleRef;if(s.has(r)){const o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){const s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Bm),o;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Bm,this.appId),a}}addStyleToHost(r,i){const s=this.getStyleElement(r,i);r.appendChild(s);const o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){const r=this.hostNodes;r.clear(),r.add(this.doc.head)}}return(t=e).\u0275fac=function(r){return new(r||t)(ht(ao),ht(nh),ht(Dw,8),ht(ma))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),e})();const Um={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hm=/%COMP%/g,$3=new Ze("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function fD(t,e){return e.map(n=>n.replace(Hm,t))}let pD=(()=>{var t;class e{constructor(r,i,s,o,a,l,u,c=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=iD(l),this.defaultRenderer=new Vm(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ur.ShadowDom&&(i={...i,encapsulation:Ur.Emulated});const s=this.getOrCreateRenderer(r,i);return s instanceof mD?s.applyToHost(r):s instanceof Gm&&s.applyStyles(),s}getOrCreateRenderer(r,i){const s=this.rendererByCompId;let o=s.get(i.id);if(!o){const a=this.doc,l=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Ur.Emulated:o=new mD(u,c,i,this.appId,h,a,l,d);break;case Ur.ShadowDom:return new Y3(u,c,r,i,a,l,this.nonce,d);default:o=new Gm(u,c,i,h,a,l,d)}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}}return(t=e).\u0275fac=function(r){return new(r||t)(ht(uD),ht(hD),ht(nh),ht($3),ht(ao),ht(ma),ht(Vt),ht(Dw))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),e})();class Vm{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Um[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(gD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(gD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new Ee(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=Um[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Um[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(bs.DashCase|bs.Important)?e.style.setProperty(n,r,i&bs.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&bs.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=vm().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function gD(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Y3 extends Vm{constructor(e,n,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=fD(i.id,i.styles);for(const c of u){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=c,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Gm extends Vm{constructor(e,n,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?fD(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class mD extends Gm{constructor(e,n,r,i,s,o,a,l){const u=i+"-"+r.id;super(e,n,r,s,o,a,l,u),this.contentAttr=function z3(t){return"_ngcontent-%COMP%".replace(Hm,t)}(u),this.hostAttr=function W3(t){return"_nghost-%COMP%".replace(Hm,t)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let q3=(()=>{var t;class e extends cD{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}}return(t=e).\u0275fac=function(r){return new(r||t)(ht(ao))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),e})();const _D=["alt","control","meta","shift"],Z3={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},K3={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Q3=(()=>{var t;class e extends cD{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,i,s){const o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vm().onAndCancel(r,o.domEventName,a))}static parseEventName(r){const i=r.toLowerCase().split("."),s=i.shift();if(0===i.length||"keydown"!==s&&"keyup"!==s)return null;const o=e._normalizeKey(i.pop());let a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),_D.forEach(c=>{const h=i.indexOf(c);h>-1&&(i.splice(h,1),a+=c+".")}),a+=o,0!=i.length||0===o.length)return null;const u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=Z3[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),_D.forEach(a=>{a!==s&&(0,K3[a])(r)&&(o+=a+".")}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return(t=e).\u0275fac=function(r){return new(r||t)(ht(ao))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),e})();const vD=[{provide:ma,useValue:"browser"},{provide:Tw,useValue:function J3(){Lm.makeCurrent()},multi:!0},{provide:ao,useFactory:function tU(){return function vP(t){Pp=t}(document),document},deps:[]}],nU=_T(PB,"browser",vD),rU=new Ze(""),wD=[{provide:Ph,useClass:class U3{addToWindow(e){St.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Ee(5103,!1);return s},St.getAllAngularTestabilities=()=>e.getAllTestabilities(),St.getAllAngularRootElements=()=>e.getAllRootElements(),St.frameworkStabilizers||(St.frameworkStabilizers=[]),St.frameworkStabilizers.push(r=>{const i=St.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?vm().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:dT,useClass:lm,deps:[Vt,um,Ph]},{provide:lm,useClass:lm,deps:[Vt,um,Ph]}],xD=[{provide:Hp,useValue:"root"},{provide:to,useFactory:function eU(){return new to},deps:[]},{provide:km,useClass:q3,multi:!0,deps:[ao,Vt,ma]},{provide:km,useClass:Q3,multi:!0,deps:[ao]},pD,hD,uD,{provide:Pw,useExisting:pD},{provide:class f3{},useClass:H3,deps:[]},[]];let iU=(()=>{var t;class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:nh,useValue:r.appId}]}}}return(t=e).\u0275fac=function(r){return new(r||t)(ht(rU,12))},t.\u0275mod=xl({type:t}),t.\u0275inj=zo({providers:[...xD,...wD],imports:[l3,RB]}),e})();typeof window<"u"&&window;const dU=(0,z(726).fo)("SplashScreen",{web:()=>z.e(485).then(z.bind(z,485)).then(t=>new t.SplashScreenWeb)});var De=z(861),lo=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(lo||{}),DD=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(DD||{}),$m=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))($m||{}),Ve=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(Ve||{}),bi=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(bi||{}),fe=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(fe||{}),Ba=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(Ba||{}),ke=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(ke||{}),zm=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(zm||{}),ns=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(ns||{}),Ss=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(Ss||{}),Ei=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(Ei||{}),Xr=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(Xr||{}),Ti=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(Ti||{}),Wm=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(Wm||{}),Ar=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(Ar||{}),cn=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(cn||{}),rn=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(rn||{}),Di=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(Di||{});const _e={ADAPTER:{createCanvas:(t,e)=>{const n=document.createElement("canvas");return n.width=t,n.height=e,n},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>(new DOMParser).parseFromString(t,"text/xml")},RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Xm=/iPhone/i,CD=/iPod/i,SD=/iPad/i,ID=/\biOS-universal(?:.+)Mac\b/i,Ym=/\bAndroid(?:.+)Mobile\b/i,AD=/Android/i,Ua=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Zh=/Silk/i,rs=/Windows Phone/i,MD=/\bWindows(?:.+)ARM\b/i,PD=/BlackBerry/i,RD=/BB10/i,ND=/Opera Mini/i,OD=/\b(CriOS|Chrome)(?:.+)Mobile/i,FD=/Mobile(?:.+)Firefox\b/i,LD=function(t){return typeof t<"u"&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&typeof MSStream>"u"};function kD(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var n=e.userAgent,r=n.split("[FBAN");typeof r[1]<"u"&&(n=r[0]),typeof(r=n.split("Twitter"))[1]<"u"&&(n=r[0]);var i=function pU(t){return function(e){return e.test(t)}}(n),s={apple:{phone:i(Xm)&&!i(rs),ipod:i(CD),tablet:!i(Xm)&&(i(SD)||LD(e))&&!i(rs),universal:i(ID),device:(i(Xm)||i(CD)||i(SD)||i(ID)||LD(e))&&!i(rs)},amazon:{phone:i(Ua),tablet:!i(Ua)&&i(Zh),device:i(Ua)||i(Zh)},android:{phone:!i(rs)&&i(Ua)||!i(rs)&&i(Ym),tablet:!i(rs)&&!i(Ua)&&!i(Ym)&&(i(Zh)||i(AD)),device:!i(rs)&&(i(Ua)||i(Zh)||i(Ym)||i(AD))||i(/\bokhttp\b/i)},windows:{phone:i(rs),tablet:i(MD),device:i(rs)||i(MD)},other:{blackberry:i(PD),blackberry10:i(RD),opera:i(ND),firefox:i(FD),chrome:i(OD),device:i(PD)||i(RD)||i(ND)||i(FD)||i(OD)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Mr=(kD.default??kD)(globalThis.navigator);_e.RETINA_PREFIX=/@([0-9\.]+)x/,_e.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var mu=z(472),gU=z(145),qm=z(445);const mU={parse:qm.Qc,format:qm.WU,resolve:qm.DB};function Yr(t){if("string"!=typeof t)throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function _u(t){return t.split("?")[0].split("#")[0]}const Cn={toPosix:t=>function yU(t,e,n){return t.replace(new RegExp(function _U(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(e),"g"),n)}(t,"\\","/"),isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:t=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t),hasProtocol(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol(t){Yr(t),t=this.toPosix(t);let e="";const n=/^file:\/\/\//.exec(t),r=/^[^/:]+:\/\//.exec(t),i=/^[^/:]+:\//.exec(t);if(n||r||i){const s=n?.[0]||r?.[0]||i?.[0];e=s,t=t.slice(s.length)}return e},toAbsolute(t,e,n){if(this.isDataUrl(t))return t;const r=_u(this.toPosix(e??_e.ADAPTER.getBaseUrl())),i=_u(this.toPosix(n??this.rootname(r)));return Yr(t),(t=this.toPosix(t)).startsWith("/")?Cn.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(r,t)},normalize(t){if(Yr(t=this.toPosix(t)),0===t.length)return".";let e="";const n=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const r=t.endsWith("/");return t=function vU(t,e){let n="",r=0,i=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(47===o)break;o=47}if(47===o){if(i!==a-1&&1!==s)if(i!==a-1&&2===s){if(n.length<2||2!==r||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){const l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(2===n.length||1===n.length){n="",r=0,i=a,s=0;continue}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+=`/${t.slice(i+1,a)}`:n=t.slice(i+1,a),r=a-i-1;i=a,s=0}else 46===o&&-1!==s?++s:s=-1}return n}(t,!1),t.length>0&&r&&(t+="/"),n?`/${t}`:e+t},isAbsolute(t){return Yr(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join(...t){if(0===t.length)return".";let e;for(let n=0;n<t.length;++n){const r=t[n];Yr(r),r.length>0&&(void 0===e?e=r:this.extname(t[n-1]??"")?e+=`/../${r}`:e+=`/${r}`)}return void 0===e?".":this.normalize(e)},dirname(t){if(Yr(t),0===t.length)return".";let e=(t=this.toPosix(t)).charCodeAt(0);const n=47===e;let r=-1,i=!0;const s=this.getProtocol(t),o=t;for(let a=(t=t.slice(s.length)).length-1;a>=1;--a)if(e=t.charCodeAt(a),47===e){if(!i){r=a;break}}else i=!1;return-1===r?n?"/":this.isUrl(o)?s+t:s:n&&1===r?"//":s+t.slice(0,r)},rootname(t){Yr(t);let e="";if(e=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){const n=t.indexOf("/",e.length);e=-1!==n?t.slice(0,n):t,e.endsWith("/")||(e+="/")}return e},basename(t,e){Yr(t),e&&Yr(e),t=_u(this.toPosix(t));let s,n=0,r=-1,i=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const l=t.charCodeAt(s);if(47===l){if(!i){n=s+1;break}}else-1===a&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?-1==--o&&(r=s):(o=-1,r=a))}return n===r?r=a:-1===r&&(r=t.length),t.slice(n,r)}for(s=t.length-1;s>=0;--s)if(47===t.charCodeAt(s)){if(!i){n=s+1;break}}else-1===r&&(i=!1,r=s+1);return-1===r?"":t.slice(n,r)},extname(t){Yr(t);let e=-1,n=0,r=-1,i=!0,s=0;for(let o=(t=_u(this.toPosix(t))).length-1;o>=0;--o){const a=t.charCodeAt(o);if(47!==a)-1===r&&(i=!1,r=o+1),46===a?-1===e?e=o:1!==s&&(s=1):-1!==e&&(s=-1);else if(!i){n=o+1;break}}return-1===e||-1===r||0===s||1===s&&e===r-1&&e===n+1?"":t.slice(e,r)},parse(t){Yr(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;let n=(t=_u(this.toPosix(t))).charCodeAt(0);const r=this.isAbsolute(t);let i;e.root=this.rootname(t),i=r||this.hasProtocol(t)?1:0;let o=-1,a=0,l=-1,u=!0,c=t.length-1,h=0;for(;c>=i;--c)if(n=t.charCodeAt(c),47!==n)-1===l&&(u=!1,l=c+1),46===n?-1===o?o=c:1!==h&&(h=1):-1!==o&&(h=-1);else if(!u){a=c+1;break}return-1===o||-1===l||0===h||1===h&&o===l-1&&o===a+1?-1!==l&&(e.base=e.name=t.slice(0===a&&r?1:a,l)):(0===a&&r?(e.name=t.slice(1,o),e.base=t.slice(1,l)):(e.name=t.slice(a,o),e.base=t.slice(a,l)),e.ext=t.slice(o,l)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"},BD={};function et(t,e,n=3){if(BD[e])return;let r=(new Error).stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}\nDeprecated since v${t}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`),console.warn(r))),BD[e]=!0}let Zm;var xU={grad:.9,turn:360,rad:360/(2*Math.PI)},is=function(t){return"string"==typeof t?t.length>0:"number"==typeof t},dn=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},Pr=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),t>n?n:t>e?t:e},UD=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},HD=function(t){return{r:Pr(t.r,0,255),g:Pr(t.g,0,255),b:Pr(t.b,0,255),a:Pr(t.a)}},Km=function(t){return{r:dn(t.r),g:dn(t.g),b:dn(t.b),a:dn(t.a,3)}},bU=/^#([0-9a-f]{3,8})$/i,Kh=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},VD=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},GD=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),o=r*(1-n),a=r*(1-(e-s)*n),l=r*(1-(1-e+s)*n),u=s%6;return{r:255*[r,a,o,o,l,r][u],g:255*[l,r,r,a,o,o][u],b:255*[o,o,l,r,r,a][u],a:i}},jD=function(t){return{h:UD(t.h),s:Pr(t.s,0,100),l:Pr(t.l,0,100),a:Pr(t.a)}},$D=function(t){return{h:dn(t.h),s:dn(t.s),l:dn(t.l),a:dn(t.a,3)}},zD=function(t){return GD((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},yu=function(t){return{h:(e=VD(t)).h,s:(i=(200-(n=e.s))*(r=e.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,r,i},EU=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,TU=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,DU=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,CU=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Qm={string:[[function(t){var e=bU.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?dn(parseInt(t[3]+t[3],16)/255,2):1}:6===t.length||8===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:8===t.length?dn(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=DU.exec(t)||CU.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:HD({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:void 0===e[7]?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=EU.exec(t)||TU.exec(t);if(!e)return null;var n,r,i=jD({h:(n=e[1],r=e[2],void 0===r&&(r="deg"),Number(n)*(xU[r]||1)),s:Number(e[3]),l:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)});return zD(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=void 0===i?1:i;return is(e)&&is(n)&&is(r)?HD({r:Number(e),g:Number(n),b:Number(r),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,i=t.a,s=void 0===i?1:i;if(!is(e)||!is(n)||!is(r))return null;var o=jD({h:Number(e),s:Number(n),l:Number(r),a:Number(s)});return zD(o)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,i=t.a,s=void 0===i?1:i;if(!is(e)||!is(n)||!is(r))return null;var a,o=(a={h:Number(e),s:Number(n),v:Number(r),a:Number(s)},{h:UD(a.h),s:Pr(a.s,0,100),v:Pr(a.v,0,100),a:Pr(a.a)});return GD(o)},"hsv"]]},WD=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},Jm=function(t,e){var n=yu(t);return{h:n.h,s:Pr(n.s+100*e,0,100),l:n.l,a:n.a}},e_=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},YD=function(t,e){var n=yu(t);return{h:n.h,s:n.s,l:Pr(n.l+100*e,0,100),a:n.a}},Qh=function(){function t(e){this.parsed=function(t){return"string"==typeof t?WD(t.trim(),Qm.string):"object"==typeof t&&null!==t?WD(t,Qm.object):[null,void 0]}(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return null!==this.parsed},t.prototype.brightness=function(){return dn(e_(this.rgba),2)},t.prototype.isDark=function(){return e_(this.rgba)<.5},t.prototype.isLight=function(){return e_(this.rgba)>=.5},t.prototype.toHex=function(){return n=(e=Km(this.rgba)).r,r=e.g,i=e.b,o=(s=e.a)<1?Kh(dn(255*s)):"","#"+Kh(n)+Kh(r)+Kh(i)+o;var e,n,r,i,s,o},t.prototype.toRgb=function(){return Km(this.rgba)},t.prototype.toRgbString=function(){return n=(e=Km(this.rgba)).r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+n+", "+r+", "+i+", "+s+")":"rgb("+n+", "+r+", "+i+")";var e,n,r,i,s},t.prototype.toHsl=function(){return $D(yu(this.rgba))},t.prototype.toHslString=function(){return n=(e=$D(yu(this.rgba))).h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+s+")":"hsl("+n+", "+r+"%, "+i+"%)";var e,n,r,i,s},t.prototype.toHsv=function(){return e=VD(this.rgba),{h:dn(e.h),s:dn(e.s),v:dn(e.v),a:dn(e.a,3)};var e},t.prototype.invert=function(){return Ci({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return void 0===e&&(e=.1),Ci(Jm(this.rgba,e))},t.prototype.desaturate=function(e){return void 0===e&&(e=.1),Ci(Jm(this.rgba,-e))},t.prototype.grayscale=function(){return Ci(Jm(this.rgba,-1))},t.prototype.lighten=function(e){return void 0===e&&(e=.1),Ci(YD(this.rgba,e))},t.prototype.darken=function(e){return void 0===e&&(e=.1),Ci(YD(this.rgba,-e))},t.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return"number"==typeof e?Ci({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):dn(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=yu(this.rgba);return"number"==typeof e?Ci({h:e,s:n.s,l:n.l,a:n.a}):dn(n.h)},t.prototype.isEqual=function(e){return this.toHex()===Ci(e).toHex()},t}(),Ci=function(t){return t instanceof Qh?t:new Qh(t)},qD=[];[function IU(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=r[this.toHex()];if(u)return u;if(o?.closest){var c=this.toRgb(),h=1/0,d="black";if(!s.length)for(var f in n)s[f]=new t(n[f]).toRgb();for(var p in n){var g=(a=c,l=s[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));g<h&&(h=g,d=p)}return d}},e.string.push([function(o){var a=o.toLowerCase(),l="transparent"===a?"#0000":n[a];return l?new t(l).toRgb():null},"name"])}].forEach(function(e){qD.indexOf(e)<0&&(e(Qh,Qm),qD.push(e))});const Ha=class{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Ha)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(null===t)throw new Error("Cannot set PIXI.Color#value to null");(null===this._value||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return"string"==typeof t||"number"==typeof t||t instanceof Number||null===t?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):"object"==typeof t&&null!==t?{...t}:t}isSourceEqual(t,e){const n=typeof t;if(n!==typeof e)return!1;if("number"===n||"string"===n||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length===e.length&&t.every((i,s)=>i===e[s]);if(null!==t&&null!==e){const i=Object.keys(t),s=Object.keys(e);return i.length===s.length&&i.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,n,r]=this._components;return{r:t,g:e,b:n,a:r}}toRgb(){const[t,e,n]=this._components;return{r:t,g:e,b:n}}toRgbaString(){const[t,e,n]=this.toUint8RgbArray();return`rgba(${t},${e},${n},${this.alpha})`}toUint8RgbArray(t){const[e,n,r]=this._components;return(t=t??[])[0]=Math.round(255*e),t[1]=Math.round(255*n),t[2]=Math.round(255*r),t}toRgbArray(t){t=t??[];const[e,n,r]=this._components;return t[0]=e,t[1]=n,t[2]=r,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(65280&t)+((255&t)<<16)}multiply(t){const[e,n,r,i]=Ha.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=n,this._components[2]*=r,this._components[3]*=i,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(1===t)return(255<<24)+this._int;if(0===t)return e?0:this._int;let n=this._int>>16&255,r=this._int>>8&255,i=255&this._int;return e&&(n=n*t+.5|0,r=r*t+.5|0,i=i*t+.5|0),(255*t<<24)+(n<<16)+(r<<8)+i}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,n,r]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(n*t)/t,this._components[2]=Math.round(r*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,n,r,i]=this._components;return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}normalize(t){let e,n,r,i;if(("number"==typeof t||t instanceof Number)&&t>=0&&t<=16777215)e=(t>>16&255)/255,n=(t>>8&255)/255,r=(255&t)/255,i=1;else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,n,r,i=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,n,r,i=255]=t,e/=255,n/=255,r/=255,i/=255;else if("string"==typeof t||"object"==typeof t){if("string"==typeof t){const o=Ha.HEX_PATTERN.exec(t);o&&(t=`#${o[2]}`)}const s=Ci(t);s.isValid()&&(({r:e,g:n,b:r,a:i}=s.rgba),e/=255,n/=255,r/=255)}if(void 0===e)throw new Error(`Unable to convert color ${t}`);this._components[0]=e,this._components[1]=n,this._components[2]=r,this._components[3]=i,this.refreshInt()}refreshInt(){this._clamp(this._components);const[t,e,n]=this._components;this._int=(255*t<<16)+(255*e<<8)+(255*n|0)}_clamp(t,e=0,n=1){return"number"==typeof t?Math.min(Math.max(t,e),n):(t.forEach((r,i)=>{t[i]=Math.min(Math.max(r,e),n)}),t)}};let mt=Ha;mt.shared=new Ha,mt.temp=new Ha,mt.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;const ZD=function PU(){const t=[],e=[];for(let r=0;r<32;r++)t[r]=r,e[r]=r;t[Ve.NORMAL_NPM]=Ve.NORMAL,t[Ve.ADD_NPM]=Ve.ADD,t[Ve.SCREEN_NPM]=Ve.SCREEN,e[Ve.NORMAL]=Ve.NORMAL_NPM,e[Ve.ADD]=Ve.ADD_NPM,e[Ve.SCREEN]=Ve.SCREEN_NPM;const n=[];return n.push(e),n.push(t),n}();function KD(t,e){return ZD[e?1:0][t]}function t_(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}function Jh(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)}function QD(t){return!(t&t-1||!t)}function JD(t){let e=(t>65535?1:0)<<4,n=((t>>>=e)>255?1:0)<<3;return e|=n,n=((t>>>=n)>15?1:0)<<2,e|=n,n=((t>>>=n)>3?1:0)<<1,e|=n,e|(t>>>=n)>>1}function Va(t,e,n){const r=t.length;let i;if(e>=r||0===n)return;const s=r-(n=e+n>r?r-e:n);for(i=e;i<s;++i)t[i]=t[i+n];t.length=s}function Is(t){return 0===t?0:t<0?-1:1}Float32Array,Uint32Array,Int32Array,Uint8Array;let FU=0;function uo(){return++FU}const eC=class{constructor(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let n_=eC;n_.EMPTY=new eC(0,0,0,0);const tC={},Jn=Object.create(null),Rr=Object.create(null);class LU{constructor(e,n,r){this._canvas=_e.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||_e.RESOLUTION,this.resize(e,n)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,n){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(n*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(null===this._canvas)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function nC(t,e,n){for(let r=0,i=4*n*e;r<e;++r,i+=4)if(0!==t[i+3])return!1;return!0}function rC(t,e,n,r,i){const s=4*e;for(let o=r,a=r*s+4*n;o<=i;++o,a+=s)if(0!==t[a+3])return!1;return!0}let ed;function As(t,e=1){const n=_e.RETINA_PREFIX?.exec(t);return n?parseFloat(n[1]):e}var xe=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(xe||{});const r_=t=>{if("function"==typeof t||"object"==typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={..."object"!=typeof t.extension?{type:t.extension}:t.extension,ref:t}}if("object"!=typeof t)throw new Error("Invalid extension type");return"string"==typeof(t={...t}).type&&(t.type=[t.type]),t},iC=(t,e)=>r_(t).priority??e,Fe={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(r_).forEach(e=>{e.type.forEach(n=>this._removeHandlers[n]?.(e))}),this},add(...t){return t.map(r_).forEach(e=>{e.type.forEach(n=>{const r=this._addHandlers,i=this._queue;r[n]?r[n](e):(i[n]=i[n]||[],i[n].push(e))})}),this},handle(t,e,n){const r=this._addHandlers,i=this._removeHandlers;if(r[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);r[t]=e,i[t]=n;const s=this._queue;return s[t]&&(s[t].forEach(o=>e(o)),delete s[t]),this},handleByMap(t,e){return this.handle(t,n=>{e[n.name]=n.ref},n=>{delete e[n.name]})},handleByList(t,e,n=-1){return this.handle(t,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((i,s)=>iC(s,n)-iC(i,n)))},r=>{const i=e.indexOf(r.ref);-1!==i&&e.splice(i,1)})}};class i_{constructor(e){this.rawBinaryData="number"==typeof e?new ArrayBuffer(e):e instanceof Uint8Array?e.buffer:e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const HU=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function VU(t){let e="";for(let n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+=`if(test == ${n}.0){}`);return e}class ss{constructor(){this.data=0,this.blendMode=Ve.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(e){!!(1&this.data)!==e&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(e){!!(2&this.data)!==e&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(e){!!(4&this.data)!==e&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(e){!!(8&this.data)!==e&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(e){!!(32&this.data)!==e&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(e){!!(16&this.data)!==e&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Ve.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new ss;return e.depthTest=!1,e.blend=!0,e}}const h_=[];function sC(t,e){if(!t)return null;let n="";if("string"==typeof t){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(let r=h_.length-1;r>=0;--r){const i=h_[r];if(i.test&&i.test(t,n))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class qr{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,n,r,i,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:c}=this;this._aliasCount++;for(let h=0,d=c.length;h<d;h++)c[h][u](e,n,r,i,s,o,a,l);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const n=this.items.indexOf(e);return-1!==n&&(this.ensureNonAliasedItems(),this.items.splice(n,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(qr.prototype,{dispatch:{value:qr.prototype.emit},run:{value:qr.prototype.emit}});class vu{constructor(e=0,n=0){this._width=e,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new qr("setRealSize"),this.onUpdate=new qr("update"),this.onError=new qr("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,n){(e!==this._width||n!==this._height)&&(this._width=e,this._height=n,this.onResize.emit(e,n))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,n,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,n){return!1}}class wu extends vu{constructor(e,n){const{width:r,height:i}=n||{};if(!r||!i)throw new Error("BufferResource width or height invalid");super(r,i),this.data=e}upload(e,n,r){const i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Xr.UNPACK);const s=n.realWidth,o=n.realHeight;return r.width===s&&r.height===o?i.texSubImage2D(n.target,0,0,0,s,o,n.format,r.type,this.data):(r.width=s,r.height=o,i.texImage2D(n.target,0,r.internalFormat,s,o,0,n.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}const jU={scaleMode:ns.NEAREST,format:fe.RGBA,alphaMode:Xr.NPM},Ga=class extends mu{constructor(t=null,e=null){super(),e=Object.assign({},Ga.defaultOptions,e);const{alphaMode:n,mipmap:r,anisotropicLevel:i,scaleMode:s,width:o,height:a,wrapMode:l,format:u,type:c,target:h,resolution:d,resourceOptions:f}=e;t&&!(t instanceof vu)&&((t=sC(t,f)).internal=!0),this.resolution=d||_e.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=r,this.anisotropicLevel=i,this._wrapMode=l,this._scaleMode=s,this.format=u,this.type=c,this.target=h,this.alphaMode=n,this.uid=uo(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let n;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this}setSize(t,e,n){return this.setRealSize(t*(n=n||this.resolution),e*n,n)}setRealSize(t,e,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=QD(this.realWidth)&&QD(this.realHeight)}setResolution(t){const e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Rr[this.cacheId],delete Jn[this.cacheId],this.cacheId=null),this.dispose(),Ga.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,n=_e.STRICT_TEXTURE_CACHE){const r="string"==typeof t;let i=null;r?i=t:(t._pixiId||(t._pixiId=`${e?.pixiIdPrefix||"pixiid"}_${uo()}`),i=t._pixiId);let s=Rr[i];if(r&&n&&!s)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return s||(s=new Ga(t,e),s.cacheId=i,Ga.addToCache(s,i)),s}static fromBuffer(t,e,n,r){t=t||new Float32Array(e*n*4);const i=new wu(t,{width:e,height:n}),s=t instanceof Float32Array?ke.FLOAT:ke.UNSIGNED_BYTE;return new Ga(i,Object.assign({},jU,{type:s},r))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Rr[e]&&Rr[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),Rr[e]=t)}static removeFromCache(t){if("string"==typeof t){const e=Rr[t];if(e){const n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete Rr[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete Rr[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let Qe=Ga;Qe.defaultOptions={mipmap:Ei.POW2,anisotropicLevel:0,scaleMode:ns.LINEAR,wrapMode:Ss.CLAMP,alphaMode:Xr.UNPACK,target:Ba.TEXTURE_2D,format:fe.RGBA,type:ke.UNSIGNED_BYTE},Qe._globalBatch=0;class d_{constructor(){this.texArray=null,this.blend=0,this.type=bi.TRIANGLES,this.start=0,this.size=0,this.data=null}}let $U=0;class Jt{constructor(e,n=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=n,this.id=$U++,this.disposeRunner=new qr("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Di.ELEMENT_ARRAY_BUFFER:Di.ARRAY_BUFFER}get index(){return this.type===Di.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new Jt(e)}}class td{constructor(e,n=0,r=!1,i=ke.FLOAT,s,o,a,l=1){this.buffer=e,this.size=n,this.normalized=r,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,n,r,i,s){return new td(e,n,r,i,s)}}const zU={Float32Array,Uint32Array,Int32Array,Uint8Array},oC={5126:4,5123:2,5121:1};let XU=0;const YU={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Ms{constructor(e=[],n={}){this.buffers=e,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=XU++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new qr("disposeGeometry"),this.refCount=0}addAttribute(e,n,r=0,i=!1,s,o,a,l=!1){if(!n)throw new Error("You must pass a buffer when creating an attribute");n instanceof Jt||(n instanceof Array&&(n=new Float32Array(n)),n=new Jt(n));const u=e.split("|");if(u.length>1){for(let h=0;h<u.length;h++)this.addAttribute(u[h],n,r,i,s);return this}let c=this.buffers.indexOf(n);return-1===c&&(this.buffers.push(n),c=this.buffers.length-1),this.attributes[e]=new td(c,r,i,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Jt||(e instanceof Array&&(e=new Uint16Array(e)),e=new Jt(e)),e.type=Di.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const e=[],n=[],r=new Jt;let i;for(i in this.attributes){const s=this.attributes[i];e.push(this.buffers[s.buffer].data),n.push(s.size*oC[s.type]/4),s.buffer=0}for(r.data=function WU(t,e){let n=0,r=0;const i={};for(let l=0;l<t.length;l++)r+=e[l],n+=t[l].length;const s=new ArrayBuffer(4*n);let o=null,a=0;for(let l=0;l<t.length;l++){const u=e[l],c=t[l],h=t_(c);i[h]||(i[h]=new zU[h](s)),o=i[h];for(let d=0;d<c.length;d++)o[(d/u|0)*r+a+d%u]=c[d];a+=u}return new Float32Array(s)}(e,n),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const n=this.attributes[e];return this.buffers[n.buffer].data.length/(n.stride/4||n.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Ms;for(let n=0;n<this.buffers.length;n++)e.buffers[n]=new Jt(this.buffers[n].data.slice(0));for(const n in this.attributes){const r=this.attributes[n];e.attributes[n]=new td(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Di.ELEMENT_ARRAY_BUFFER),e}static merge(e){const n=new Ms,r=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l]=i[l]||0,i[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)r[a]=new(YU[t_(o.buffers[a].data)])(i[a]),n.buffers[a]=new Jt(r[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)r[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(n.attributes=o.attributes,o.indexBuffer){n.indexBuffer=n.buffers[o.buffers.indexOf(o.indexBuffer)],n.indexBuffer.type=Di.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,c=0;for(let h=0;h<o.buffers.length;h++)if(o.buffers[h]!==o.indexBuffer){c=h;break}for(const h in o.attributes){const d=o.attributes[h];(0|d.buffer)===c&&(l+=d.size*oC[d.type]/4)}for(let h=0;h<e.length;h++){const d=e[h].indexBuffer.data;for(let f=0;f<d.length;f++)n.indexBuffer.data[f+u]+=a;a+=e[h].buffers[c].data.length/l,u+=d.length}}return n}}class aC extends Ms{constructor(e=!1){super(),this._buffer=new Jt(null,e,!1),this._indexBuffer=new Jt(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ke.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ke.FLOAT).addAttribute("aColor",this._buffer,4,!0,ke.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ke.FLOAT).addIndex(this._indexBuffer)}}const nd=2*Math.PI,qU=180/Math.PI,ZU=Math.PI/180;var _n=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(_n||{});class gt{constructor(e=0,n=0){this.x=0,this.y=0,this.x=e,this.y=n}clone(){return new gt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const rd=[new gt,new gt,new gt,new gt];class ot{constructor(e=0,n=0,r=0,i=0){this.x=Number(e),this.y=Number(n),this.width=Number(r),this.height=Number(i),this.type=_n.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new ot(0,0,0,0)}clone(){return new ot(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,n){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}intersects(e,n){if(!n)return!((this.right>e.right?e.right:this.right)<=(this.x<e.x?e.x:this.x))&&(this.bottom>e.bottom?e.bottom:this.bottom)>(this.y<e.y?e.y:this.y);const r=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=r||o<=s)return!1;const a=rd[0].set(e.left,e.top),l=rd[1].set(e.left,e.bottom),u=rd[2].set(e.right,e.top),c=rd[3].set(e.right,e.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const h=Math.sign(n.a*n.d-n.b*n.c);if(0===h||(n.apply(a,a),n.apply(l,l),n.apply(u,u),n.apply(c,c),Math.max(a.x,l.x,u.x,c.x)<=r||Math.min(a.x,l.x,u.x,c.x)>=i||Math.max(a.y,l.y,u.y,c.y)<=s||Math.min(a.y,l.y,u.y,c.y)>=o))return!1;const d=h*(l.y-a.y),f=h*(a.x-l.x),p=d*r+f*s,g=d*i+f*s,m=d*r+f*o,y=d*i+f*o;if(Math.max(p,g,m,y)<=d*a.x+f*a.y||Math.min(p,g,m,y)>=d*c.x+f*c.y)return!1;const v=h*(a.y-u.y),w=h*(u.x-a.x),E=v*r+w*s,M=v*i+w*s,H=v*r+w*o,k=v*i+w*o;return!(Math.max(E,M,H,k)<=v*a.x+w*a.y||Math.min(E,M,H,k)>=v*c.x+w*c.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=2*e,this.height+=2*n,this}fit(e){const n=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(r-n,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,n=.001){const r=Math.ceil((this.x+this.width-n)*e)/e,i=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=r-this.x,this.height=i-this.y,this}enlarge(e){const n=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=r-n,this.y=i,this.height=s-i,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class f_{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.radius=r,this.type=_n.CIRC}clone(){return new f_(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;let i=this.x-e,s=this.y-n;return i*=i,s*=s,i+s<=this.radius*this.radius}getBounds(){return new ot(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class p_{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.width=r,this.height=i,this.type=_n.ELIP}clone(){return new p_(this.x,this.y,this.width,this.height)}contains(e,n){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,i=(n-this.y)/this.height;return r*=r,i*=i,r+i<=1}getBounds(){return new ot(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class ja{constructor(...e){let n=Array.isArray(e[0])?e[0]:e;if("number"!=typeof n[0]){const r=[];for(let i=0,s=n.length;i<s;i++)r.push(n[i].x,n[i].y);n=r}this.points=n,this.type=_n.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),n=new ja(e);return n.closeStroke=this.closeStroke,n}contains(e,n){let r=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[2*s],l=this.points[2*s+1],c=this.points[2*o+1];l>n!=c>n&&e<(n-l)/(c-l)*(this.points[2*o]-a)+a&&(r=!r)}return r}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((e,n)=>`${e}, ${n}`,"")}]`}}class g_{constructor(e=0,n=0,r=0,i=0,s=20){this.x=e,this.y=n,this.width=r,this.height=i,this.radius=s,this.type=_n.RREC}clone(){return new g_(this.x,this.y,this.width,this.height,this.radius)}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+r&&n<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let i=e-(this.x+r),s=n-(this.y+r);const o=r*r;if(i*i+s*s<=o||(i=e-(this.x+this.width-r),i*i+s*s<=o)||(s=n-(this.y+this.height-r),i*i+s*s<=o)||(i=e-(this.x+r),i*i+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class kt{constructor(e=1,n=0,r=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,r,i,s,o){return this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const r=n||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,n){n=n||new gt;const r=e.x,i=e.y;return n.x=this.a*r+this.c*i+this.tx,n.y=this.b*r+this.d*i+this.ty,n}applyInverse(e,n){n=n||new gt;const r=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return n.x=this.d*r*i+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,n.y=this.a*r*s+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),r=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*n-this.b*r,this.b=i*r+this.b*n,this.c=s*n-this.d*r,this.d=s*r+this.d*n,this.tx=o*n-this.ty*r,this.ty=o*r+this.ty*n,this}append(e){const n=this.a,r=this.b,i=this.c,s=this.d;return this.a=e.a*n+e.b*i,this.b=e.a*r+e.b*s,this.c=e.c*n+e.d*i,this.d=e.c*r+e.d*s,this.tx=e.tx*n+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this}setTransform(e,n,r,i,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(r*this.a+i*this.c),this.ty=n-(r*this.b+i*this.d),this}prepend(e){const n=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,r=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),l=Math.atan2(r,n),u=Math.abs(a+l);return u<1e-5||Math.abs(nd-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(n*n+r*r),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*n+o.y*i),e.position.y=this.ty+(o.x*r+o.y*s),e}invert(){const e=this.a,n=this.b,r=this.c,i=this.d,s=this.tx,o=e*i-n*r;return this.a=i/o,this.b=-n/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-i*s)/o,this.ty=-(e*this.ty-n*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new kt;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new kt}static get TEMP_MATRIX(){return new kt}}const co=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ho=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],fo=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],po=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],m_=[],lC=[],id=Math.sign;!function KU(){for(let t=0;t<16;t++){const e=[];m_.push(e);for(let n=0;n<16;n++){const r=id(co[t]*co[n]+fo[t]*ho[n]),i=id(ho[t]*co[n]+po[t]*ho[n]),s=id(co[t]*fo[n]+fo[t]*po[n]),o=id(ho[t]*fo[n]+po[t]*po[n]);for(let a=0;a<16;a++)if(co[a]===r&&ho[a]===i&&fo[a]===s&&po[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new kt;e.set(co[t],ho[t],fo[t],po[t],0,0),lC.push(e)}}();const Gt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>co[t],uY:t=>ho[t],vX:t=>fo[t],vY:t=>po[t],inv:t=>8&t?15&t:7&-t,add:(t,e)=>m_[t][e],sub:(t,e)=>m_[t][Gt.inv(e)],rotate180:t=>4^t,isVertical:t=>2==(3&t),byDirection:(t,e)=>2*Math.abs(t)<=Math.abs(e)?e>=0?Gt.S:Gt.N:2*Math.abs(e)<=Math.abs(t)?t>0?Gt.E:Gt.W:e>0?t>0?Gt.SE:Gt.SW:t>0?Gt.NE:Gt.NW,matrixAppendRotationInv:(t,e,n=0,r=0)=>{const i=lC[Gt.inv(e)];i.tx=n,i.ty=r,t.append(i)}};class Ps{constructor(e,n,r=0,i=0){this._x=r,this._y=i,this.cb=e,this.scope=n}clone(e=this.cb,n=this.scope){return new Ps(e,n,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}const uC=class{constructor(){this.worldTransform=new kt,this.localTransform=new kt,this.position=new Ps(this.onChange,this,0,0),this.scale=new Ps(this.onChange,this,1,1),this.pivot=new Ps(this.onChange,this,0,0),this.skew=new Ps(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let sd=uC;sd.IDENTITY=new uC;const $a=[{test:t=>"float"===t.type&&1===t.size&&!t.isArray,code:t=>`\n            if(uv["${t}"] !== ud["${t}"].value)\n            {\n                ud["${t}"].value = uv["${t}"]\n                gl.uniform1f(ud["${t}"].location, uv["${t}"])\n            }\n            `},{test:(t,e)=>!("sampler2D"!==t.type&&"samplerCube"!==t.type&&"sampler2DArray"!==t.type||1!==t.size||t.isArray||null!=e&&void 0===e.castToBaseTexture),code:t=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${t}"], t);\n\n            if(ud["${t}"].value !== t)\n            {\n                ud["${t}"].value = t;\n                gl.uniform1i(ud["${t}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(t,e)=>"mat3"===t.type&&1===t.size&&!t.isArray&&void 0!==e.a,code:t=>`\n            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));\n            `,codeUbo:t=>`\n                var ${t}_matrix = uv.${t}.toArray(true);\n\n                data[offset] = ${t}_matrix[0];\n                data[offset+1] = ${t}_matrix[1];\n                data[offset+2] = ${t}_matrix[2];\n        \n                data[offset + 4] = ${t}_matrix[3];\n                data[offset + 5] = ${t}_matrix[4];\n                data[offset + 6] = ${t}_matrix[5];\n        \n                data[offset + 8] = ${t}_matrix[6];\n                data[offset + 9] = ${t}_matrix[7];\n                data[offset + 10] = ${t}_matrix[8];\n            `},{test:(t,e)=>"vec2"===t.type&&1===t.size&&!t.isArray&&void 0!==e.x,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${t}"].location, v.x, v.y);\n                }`,codeUbo:t=>`\n                v = uv.${t};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:t=>"vec2"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);\n                }\n            `},{test:(t,e)=>"vec4"===t.type&&1===t.size&&!t.isArray&&void 0!==e.width,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:t=>`\n                    v = uv.${t};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:(t,e)=>"vec4"===t.type&&1===t.size&&!t.isArray&&void 0!==e.red,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n                    cv[3] = v.alpha;\n                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)\n                }`,codeUbo:t=>`\n                    v = uv.${t};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                    data[offset+3] = v.alpha;\n                `},{test:(t,e)=>"vec3"===t.type&&1===t.size&&!t.isArray&&void 0!==e.red,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n    \n                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)\n                }`,codeUbo:t=>`\n                    v = uv.${t};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                `},{test:t=>"vec4"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])\n                }`}],eH={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},tH={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},cC={};let ad,od=cC;const sH={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function hC(t){return sH[t]}let ld=null;const dC={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function fC(t,e){if(!ld){const n=Object.keys(dC);ld={};for(let r=0;r<n.length;++r){const i=n[r];ld[t[i]]=dC[i]}}return ld[e]}function pC(t,e,n){if("precision"!==t.substring(0,9)){let r=e;return e===Ar.HIGH&&n!==Ar.HIGH&&(r=Ar.MEDIUM),`precision ${r} float;\n${t}`}return n!==Ar.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}let oH=0;const ud={},za=class{constructor(t,e,n="pixi-shader",r={}){this.extra={},this.id=oH++,this.vertexSrc=t||za.defaultVertexSrc,this.fragmentSrc=e||za.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=r,"#version"!==this.vertexSrc.substring(0,8)&&(n=n.replace(/\s+/g,"-"),ud[n]?(ud[n]++,n+=`-${ud[n]}`):ud[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}\n${this.fragmentSrc}`,this.vertexSrc=pC(this.vertexSrc,za.defaultVertexPrecision,Ar.HIGH),this.fragmentSrc=pC(this.fragmentSrc,za.defaultFragmentPrecision,function iH(){if(!ad){ad=Ar.MEDIUM;const t=function rH(){if(od===cC||od?.isContextLost()){const t=_e.ADAPTER.createCanvas();let e;_e.PREFER_ENV>=lo.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),od=e}return od}();t&&t.getShaderPrecisionFormat&&(ad=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?Ar.HIGH:Ar.MEDIUM)}return ad}())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(t,e,n){const r=t+e;let i=tC[r];return i||(tC[r]=i=new za(t,e,n)),i}};let Zr=za;Zr.defaultVertexPrecision=Ar.HIGH,Zr.defaultFragmentPrecision=Mr.apple.device?Ar.HIGH:Ar.MEDIUM;let aH=0;class Kr{constructor(e,n,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=aH++,this.static=!!n,this.ubo=!!r,e instanceof Jt?(this.buffer=e,this.buffer.type=Di.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Jt(new Float32Array(1)),this.buffer.type=Di.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,n,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new Kr(n,r)}static from(e,n,r){return new Kr(e,n,r)}static uboFrom(e,n){return new Kr(e,n??!0,!0)}}class Si{constructor(e,n){this.uniformBindCount=0,this.program=e,this.uniformGroup=n?n instanceof Kr?n:new Kr(n):new Kr({}),this.disposeRunner=new qr("disposeShader")}checkUniformExists(e,n){if(n.uniforms[e])return!0;for(const r in n.uniforms){const i=n.uniforms[r];if(i.group&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,n,r){const i=Zr.from(e,n);return new Si(i,r)}}class lH{constructor(e,n){if(this.vertexSrc=e,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},!n.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!n.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=s;this.defaultGroupCache[e]=Kr.from({uSamplers:r},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Zr(this.vertexSrc,i)}const n={tint:new Float32Array([1,1,1,1]),translationMatrix:new kt,default:this.defaultGroupCache[e]};return new Si(this.programCache[e],n)}generateSampleSrc(e){let n="";n+="\n",n+="\n";for(let r=0;r<e;r++)r>0&&(n+="\nelse "),r<e-1&&(n+=`if(vTextureId < ${r}.5)`),n+="\n{",n+=`\n\tcolor = texture2D(uSamplers[${r}], vTextureCoord);`,n+="\n}";return n+="\n",n+="\n",n}}class __{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}class cd{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}const Qr=class extends cd{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=aC,this.vertexSize=6,this.state=ss.for2d(),this.size=4*Qr.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??function cH(t){let e=!0;const n=_e.ADAPTER.getNavigator();if(Mr.tablet||Mr.phone){if(Mr.apple.device){const r=n.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(e=!1)}if(Mr.android.device){const r=n.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(e=!1)}}return e?t:4}(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??function uH(){return!Mr.apple.device}(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return et("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:t=Qr.defaultVertexSrc,fragment:e=Qr.defaultFragmentTemplate}={}){this.shaderGenerator=new lH(t,e)}contextChange(){const t=this.renderer.gl;_e.PREFER_ENV===lo.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Qr.defaultMaxTextures),this.maxTextures=function GU(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=e.createShader(e.FRAGMENT_SHADER);for(;;){const r=HU.replace(/%forloop%/gi,VU(t));if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=Qr,n=this.size/4,r=Math.floor(n/this.maxTextures)+1;for(;t.length<n;)t.push(new d_);for(;e.length<r;)e.push(new __);for(let i=0;i<this.maxTextures;i++)this._tempBoundTextures[i]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,n=Qr._textureArrayPool,r=this.renderer.batch,i=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++Qe._globalBatch,a=0,l=n[0],u=0;r.copyBoundTextures(i,e);for(let c=0;c<this._bufferSize;++c){const h=t[c];t[c]=null,h._batchEnabled!==o&&(l.count>=e&&(r.boundArray(l,i,o,e),this.buildDrawCalls(l,u,c),u=c,l=n[++a],++o),h._batchEnabled=o,h.touched=s,l.elements[l.count++]=h)}l.count>0&&(r.boundArray(l,i,o,e),this.buildDrawCalls(l,u,this._bufferSize),++a,++o);for(let c=0;c<i.length;c++)i[c]=null;Qe._globalBatch=o}buildDrawCalls(t,e,n){const{_bufferedElements:r,_attributeBuffer:i,_indexBuffer:s,vertexSize:o}=this,a=Qr._drawCallPool;let l=this._dcIndex,u=this._aIndex,c=this._iIndex,h=a[l];h.start=this._iIndex,h.texArray=t;for(let d=e;d<n;++d){const f=r[d],g=ZD[f._texture.baseTexture.alphaMode?1:0][f.blendMode];r[d]=null,e<d&&h.blend!==g&&(h.size=c-h.start,e=d,h=a[++l],h.texArray=t,h.start=c),this.packInterleavedGeometry(f,i,s,u,c),u+=f.vertexData.length/2*o,c+=f.indices.length,h.blend=g}e<n&&(h.size=c-h.start,++l),this._dcIndex=l,this._aIndex=u,this._iIndex=c}bindAndClearTexArray(t){const e=this.renderer.texture;for(let n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:n}=this;Qr.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:n}=this.renderer,r=Qr._drawCallPool;let i=null;for(let s=0;s<t;s++){const{texArray:o,type:a,size:l,start:u,blend:c}=r[s];i!==o&&(i=o,this.bindAndClearTexArray(o)),this.state.blendMode=c,n.set(this.state),e.drawElements(a,l,e.UNSIGNED_SHORT,2*u)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Qr.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=Jh(Math.ceil(t/8)),n=JD(e),r=8*e;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new i_(r*this.vertexSize*4)),i}getIndexBuffer(t){const e=Jh(Math.ceil(t/12)),n=JD(e),r=12*e;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i}packInterleavedGeometry(t,e,n,r,i){const{uint32View:s,float32View:o}=e,a=r/this.vertexSize,l=t.uvs,u=t.indices,c=t.vertexData,h=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),f=mt.shared.setValue(t._tintRGB).toPremultiplied(d,t._texture.baseTexture.alphaMode>0);for(let p=0;p<c.length;p+=2)o[r++]=c[p],o[r++]=c[p+1],o[r++]=l[p],o[r++]=l[p+1],s[r++]=f,o[r++]=h;for(let p=0;p<u.length;p++)n[i++]=a+u[p]}};let Jr=Qr;Jr.defaultBatchSize=4096,Jr.extension={name:"batch",type:xe.RendererPlugin},Jr._drawCallPool=[],Jr._textureArrayPool=[],Fe.add(Jr);const xu=class extends Si{constructor(t,e,n){super(Zr.from(t||xu.defaultVertexSrc,e||xu.defaultFragmentSrc),n),this.padding=0,this.resolution=xu.defaultResolution,this.multisample=xu.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new ss}apply(t,e,n,r,i){t.applyFilter(this,e,n,r)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}};let yn=xu;yn.defaultResolution=1,yn.defaultMultisample=rn.NONE;class hd{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new mt(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:n,background:r,backgroundAlpha:i}=e,s=r??n;void 0!==s&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}hd.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},hd.extension={type:[xe.RendererSystem,xe.CanvasRendererSystem],name:"background"},Fe.add(hd);class gC{constructor(e){this.renderer=e,this.emptyRenderer=new cd(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,n){const{boundTextures:r}=this.renderer.texture;for(let i=n-1;i>=0;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,n,r,i){const{elements:s,ids:o,count:a}=e;let l=0;for(let u=0;u<a;u++){const c=s[u],h=c._batchLocation;if(h>=0&&h<i&&n[h]===c)o[u]=h;else for(;l<i;){const d=n[l];if(!d||d._batchEnabled!==r||d._batchLocation!==l){o[u]=l,c._batchLocation=l,n[l]=c;break}l++}}}destroy(){this.renderer=null}}gC.extension={type:xe.RendererSystem,name:"batch"},Fe.add(gC);let mC=0;class dd{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=mC++}init(e){if(e.context)this.initFromContext(e.context);else{const n=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:n,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=mC++,this.renderer.runners.contextChange.emit(e);const n=this.renderer.view;void 0!==n.addEventListener&&(n.addEventListener("webglcontextlost",this.handleContextLost,!1),n.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const n=this.createContext(this.renderer.view,e);this.initFromContext(n)}createContext(e,n){let r;if(_e.PREFER_ENV>=lo.WEBGL2&&(r=e.getContext("webgl2",n)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,n={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,n,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,n,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,void 0!==e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const n=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),n&&!n.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}dd.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},dd.extension={type:xe.RendererSystem,name:"context"},Fe.add(dd);class gH extends wu{upload(e,n,r){const i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Xr.UNPACK);const s=n.realWidth,o=n.realHeight;return r.width===s&&r.height===o?i.texSubImage2D(n.target,0,0,0,s,o,n.format,r.type,this.data):(r.width=s,r.height=o,i.texImage2D(n.target,0,r.internalFormat,s,o,0,n.format,r.type,this.data)),!0}}class y_{constructor(e,n){this.width=Math.round(e||100),this.height=Math.round(n||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new qr("disposeFramebuffer"),this.multisample=rn.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,n){return this.colorTextures[e]=n||new Qe(null,{scaleMode:ns.NEAREST,resolution:1,mipmap:Ei.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Qe(new gH(null,{width:this.width,height:this.height}),{scaleMode:ns.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Ei.OFF,format:fe.DEPTH_COMPONENT,type:ke.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,n){if(e=Math.round(e),n=Math.round(n),e!==this.width||n!==this.height){this.width=e,this.height=n,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const i=this.colorTextures[r],s=i.resolution;i.setSize(e/s,n/s)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,n/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class _C extends Qe{constructor(e={}){"number"==typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),e.width=e.width||100,e.height=e.height||100,e.multisample??(e.multisample=rn.NONE),super(null,e),this.mipmap=Ei.OFF,this.valid=!0,this._clear=new mt([0,0,0,0]),this.framebuffer=new y_(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(e,n){this.framebuffer.resize(e*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Rs extends vu{constructor(e){super(e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height),this.source=e,this.noSubImage=!1}static crossOrigin(e,n,r){void 0!==r||n.startsWith("data:")?!1!==r&&(e.crossOrigin="string"==typeof r?r:"anonymous"):e.crossOrigin=function UU(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,ed||(ed=document.createElement("a")),ed.href=t;const n=mU.parse(ed.href);return n.hostname!==e.hostname||(n.port||""!==e.port)&&n.port!==e.port||n.protocol!==e.protocol?"anonymous":""}(n)}upload(e,n,r,i){const s=e.gl,o=n.realWidth,a=n.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||0===i.naturalWidth)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1&&0===i.buffered.length)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Xr.UNPACK),this.noSubImage||n.target!==s.TEXTURE_2D||r.width!==o||r.height!==a?(r.width=o,r.height=a,s.texImage2D(n.target,0,r.internalFormat,n.format,r.type,i)):s.texSubImage2D(s.TEXTURE_2D,0,0,0,n.format,r.type,i),!0}update(){if(this.destroyed)return;const e=this.source;this.resize(e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height),super.update()}dispose(){this.source=null}}class yC extends Rs{constructor(e,n){if(n=n||{},"string"==typeof e){const r=new Image;Rs.crossOrigin(r,e,n.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(n.createBitmap??_e.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,this.bitmap=null,this._load=null,!1!==n.autoLoad&&this.load()}load(e){return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise((n,r)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.resize(i.width,i.height),this._load=null,n(this.createBitmap?this.process():this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{r(o),this.onError.emit(o)})})),this._load}process(){const e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const n=globalThis.createImageBitmap;return this._process=fetch(e.src,{mode:e.crossOrigin&&"anonymous"!==e.crossOrigin?"no-cors":"cors"}).then(i=>i.blob()).then(i=>n(i,0,0,e.width,e.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===Xr.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,n,r){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,n,r,this.bitmap),!this.preserveBitmap){let i=!0;const s=n._glTextures;for(const o in s){const a=s[o];if(a!==r&&a.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&("string"==typeof e||e instanceof HTMLImageElement)}}class vC{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,n,r){const i=n.width,s=n.height;if(r){const o=e.width/2/i,a=e.height/2/s,l=e.x/i+o,u=e.y/s+a;r=Gt.add(r,Gt.NW),this.x0=l+o*Gt.uX(r),this.y0=u+a*Gt.uY(r),r=Gt.add(r,2),this.x1=l+o*Gt.uX(r),this.y1=u+a*Gt.uY(r),r=Gt.add(r,2),this.x2=l+o*Gt.uX(r),this.y2=u+a*Gt.uY(r),r=Gt.add(r,2),this.x3=l+o*Gt.uX(r),this.y3=u+a*Gt.uY(r)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const wC=new vC;function fd(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class be extends mu{constructor(e,n,r,i,s,o,a){if(super(),this.noFrame=!1,n||(this.noFrame=!0,n=new ot(0,0,1,1)),e instanceof be&&(e=e.baseTexture),this.baseTexture=e,this._frame=n,this.trim=i,this.valid=!1,this._uvs=wC,this.uvMatrix=null,this.orig=r||n,this._rotate=Number(s||0),!0===s)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new gt(o.x,o.y):new gt(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=n:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:n}=this.baseTexture;n?.url&&Jn[n.url]&&be.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,be.removeFromCache(this),this.textureCacheIds=null}clone(){const e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),r=new be(this.baseTexture,!this.noFrame&&e,n,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===wC&&(this._uvs=new vC),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,n={},r=_e.STRICT_TEXTURE_CACHE){const i="string"==typeof e;let s=null;i?s=e:e instanceof Qe?(e.cacheId||(e.cacheId=`${n?.pixiIdPrefix||"pixiid"}-${uo()}`,Qe.addToCache(e,e.cacheId)),s=e.cacheId):(e._pixiId||(e._pixiId=`${n?.pixiIdPrefix||"pixiid"}_${uo()}`),s=e._pixiId);let o=Jn[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return o||e instanceof Qe?!o&&e instanceof Qe&&(o=new be(e),be.addToCache(o,s)):(n.resolution||(n.resolution=As(e)),o=new be(new Qe(e,n)),o.baseTexture.cacheId=s,Qe.addToCache(o.baseTexture,s),be.addToCache(o,s)),o}static fromURL(e,n){const r=Object.assign({autoLoad:!1},n?.resourceOptions),i=be.from(e,Object.assign({resourceOptions:r},n),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,n,r,i){return new be(Qe.fromBuffer(e,n,r,i))}static fromLoader(e,n,r,i){const s=new Qe(e,Object.assign({scaleMode:Qe.defaultOptions.scaleMode,resolution:As(n)},i)),{resource:o}=s;o instanceof yC&&(o.url=n);const a=new be(s);return r||(r=n),Qe.addToCache(a.baseTexture,r),be.addToCache(a,r),r!==n&&(Qe.addToCache(a.baseTexture,n),be.addToCache(a,n)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,n){n&&(e.textureCacheIds.includes(n)||e.textureCacheIds.push(n),Jn[n]&&Jn[n]!==e&&console.warn(`Texture added to the cache with an id [${n}] that already had an entry`),Jn[n]=e)}static removeFromCache(e){if("string"==typeof e){const n=Jn[e];if(n){const r=n.textureCacheIds.indexOf(e);return r>-1&&n.textureCacheIds.splice(r,1),delete Jn[e],n}}else if(e?.textureCacheIds){for(let n=0;n<e.textureCacheIds.length;++n)Jn[e.textureCacheIds[n]]===e&&delete Jn[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:n,y:r,width:i,height:s}=e,o=n+i>this.baseTexture.width,a=r+s>this.baseTexture.height;if(o||a)throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: X: ${n} + ${i} = ${n+i} > ${this.baseTexture.width} ${o&&a?"and":"or"} Y: ${r} + ${s} = ${r+s} > ${this.baseTexture.height}`);this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return be._EMPTY||(be._EMPTY=new be(new Qe),fd(be._EMPTY),fd(be._EMPTY.baseTexture)),be._EMPTY}static get WHITE(){if(!be._WHITE){const e=_e.ADAPTER.createCanvas(16,16),n=e.getContext("2d");e.width=16,e.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),be._WHITE=new be(Qe.from(e)),fd(be._WHITE),fd(be._WHITE.baseTexture)}return be._WHITE}}class go extends be{constructor(e,n){super(e,n),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,n,r=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(n*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:n}=this;n.resolution!==e&&(n.setResolution(e),this.resize(n.width,n.height,!1))}static create(e){return new go(new _C(e))}}let mH=(()=>{class t{constructor(n){this.texturePool={},this.textureOptions=n||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(n,r,i=rn.NONE){const s=new _C(Object.assign({width:n,height:r,resolution:1,multisample:i},this.textureOptions));return new go(s)}getOptimalTexture(n,r,i=1,s=rn.NONE){let o;n=Math.ceil(n*i-1e-6),r=Math.ceil(r*i-1e-6),this.enableFullScreen&&n===this._pixelsWidth&&r===this._pixelsHeight?o=s>1?-s:-1:(o=((65535&(n=Jh(n)))<<16|65535&(r=Jh(r)))>>>0,s>1&&(o+=4294967296*s)),this.texturePool[o]||(this.texturePool[o]=[]);let a=this.texturePool[o].pop();return a||(a=this.createTexture(n,r,s)),a.filterPoolKey=o,a.setResolution(i),a}getFilterTexture(n,r,i){const s=this.getOptimalTexture(n.width,n.height,r||n.resolution,i||rn.NONE);return s.filterFrame=n.filterFrame,s}returnTexture(n){const r=n.filterPoolKey;n.filterFrame=null,this.texturePool[r].push(n)}returnFilterTexture(n){this.returnTexture(n)}clear(n){if(n=!1!==n)for(const r in this.texturePool){const i=this.texturePool[r];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}}setScreenSize(n){if(n.width!==this._pixelsWidth||n.height!==this._pixelsHeight){this.enableFullScreen=n.width>0&&n.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const i=this.texturePool[r];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=n.width,this._pixelsHeight=n.height}}}return t.SCREEN_KEY=-1,t})();class _H extends Ms{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class xC extends Ms{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Jt(this.vertices),this.uvBuffer=new Jt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,n){let r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+n.width/e.width,this.uvs[3]=i,this.uvs[4]=r+n.width/e.width,this.uvs[5]=i+n.height/e.height,this.uvs[6]=r,this.uvs[7]=i+n.height/e.height,r=n.x,i=n.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+n.width,this.vertices[3]=i,this.vertices[4]=r+n.width,this.vertices[5]=i+n.height,this.vertices[6]=r,this.vertices[7]=i+n.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class yH{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=rn.NONE,this.sourceFrame=new ot,this.destinationFrame=new ot,this.bindingSourceFrame=new ot,this.bindingDestinationFrame=new ot,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const pd=[new gt,new gt,new gt,new gt],v_=new kt;class bC{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new mH,this.statePool=[],this.quad=new _H,this.quadUv=new xC,this.tempRect=new ot,this.activeState={},this.globalUniforms=new Kr({outputFrame:new ot,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,n){const r=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new yH,o=this.renderer.renderTexture;let a=n[0].resolution,l=n[0].multisample,u=n[0].padding,c=n[0].autoFit,h=n[0].legacy??!0;for(let p=1;p<n.length;p++){const g=n[p];a=Math.min(a,g.resolution),l=Math.min(l,g.multisample),u=this.useMaxPadding?Math.max(u,g.padding):u+g.padding,c=c&&g.autoFit,h=h||(g.legacy??!0)}1===i.length&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=a,s.multisample=l,s.legacy=h,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(u);const d=this.tempRect.copyFrom(o.sourceFrame);r.projection.transform&&this.transformAABB(v_.copyFrom(r.projection.transform).invert(),d),c?(s.sourceFrame.fit(d),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(d)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:r.resolution,o.sourceFrame,o.destinationFrame,r.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,l),s.filters=n,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const f=this.tempRect;f.x=0,f.y=0,f.width=s.sourceFrame.width,f.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=r.projection.transform,r.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,f),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,n=e.pop(),r=n.filters;this.activeState=n;const i=this.globalUniforms.uniforms;i.outputFrame=n.sourceFrame,i.resolution=n.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=n.destinationFrame.width,s[1]=n.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*n.resolution),o[1]=Math.round(s[1]*n.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=n.sourceFrame.width*s[2]-.5*o[2],a[3]=n.sourceFrame.height*s[3]-.5*o[3],n.legacy){const u=i.filterArea;u[0]=n.destinationFrame.width,u[1]=n.destinationFrame.height,u[2]=n.sourceFrame.x,u[3]=n.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,n.renderTexture,l.renderTexture,Ti.BLEND,n),this.returnFilterTexture(n.renderTexture);else{let u=n.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,n.resolution);c.filterFrame=u.filterFrame;let h=0;for(h=0;h<r.length-1;++h){1===h&&n.multisample>1&&(c=this.getOptimalFilterTexture(u.width,u.height,n.resolution),c.filterFrame=u.filterFrame),r[h].apply(this,u,c,Ti.CLEAR,n);const d=u;u=c,c=d}r[h].apply(this,u,l.renderTexture,Ti.BLEND,n),h>1&&n.multisample>1&&this.returnFilterTexture(n.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}n.clear(),this.statePool.push(n)}bindAndClear(e,n=Ti.CLEAR){const{renderTexture:r,state:i}=this.renderer;if(this.renderer.projection.transform=e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.activeState.transform:null,e?.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,r.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);(n===Ti.CLEAR||n===Ti.BLIT&&(1&i.stateId||this.forceClear))&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,n,r,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=n,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(n._frame,n.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(bi.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(bi.TRIANGLE_STRIP))}calculateSpriteMatrix(e,n){const{sourceFrame:r,destinationFrame:i}=this.activeState,{orig:s}=n._texture,o=e.set(i.width,0,0,i.height,r.x,r.y),a=n.worldTransform.copyTo(kt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(n.anchor.x,n.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,n,r=1,i=rn.NONE){return this.texturePool.getOptimalTexture(e,n,r,i)}getFilterTexture(e,n,r){if("number"==typeof e){const s=e;e=n,n=s}const i=this.texturePool.getOptimalTexture((e=e||this.activeState.renderTexture).width,e.height,n||e.resolution,r||rn.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,n){const r=pd[0],i=pd[1],s=pd[2],o=pd[3];r.set(n.left,n.top),i.set(n.left,n.bottom),s.set(n.right,n.top),o.set(n.right,n.bottom),e.apply(r,r),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(r.x,i.x,s.x,o.x),l=Math.min(r.y,i.y,s.y,o.y),u=Math.max(r.x,i.x,s.x,o.x),c=Math.max(r.y,i.y,s.y,o.y);n.x=a,n.y=l,n.width=u-a,n.height=c-l}roundFrame(e,n,r,i,s){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(s){const{a:o,b:a,c:l,d:u}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}(s=s?v_.copyFrom(s):v_.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(n),this.transformAABB(s.invert(),e)}}}bC.extension={type:xe.RendererSystem,name:"filter"},Fe.add(bC);class vH{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=rn.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const wH=new ot;class EC{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new y_(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ot,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let n=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;_e.PREFER_ENV===lo.WEBGL_LEGACY&&(n=null,r=null),n?e.drawBuffers=i=>n.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,n,r=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=r),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),n){const o=n.width>>r,l=o/n.width;this.setViewport(n.x*l,n.y*l,o,n.height>>r)}else this.setViewport(0,0,e.width>>r,e.height>>r)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),n?this.setViewport(n.x,n.y,n.width,n.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,n,r,i){const s=this.viewport;e=Math.round(e),n=Math.round(n),r=Math.round(r),i=Math.round(i),(s.width!==r||s.height!==i||s.x!==e||s.y!==n)&&(s.x=e,s.y=n,s.width=r,s.height=i,this.gl.viewport(e,n,r,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,n,r,i,s=$m.COLOR|$m.DEPTH){const{gl:o}=this;o.clearColor(e,n,r,i),o.clear(s)}initFramebuffer(e){const{gl:n}=this,r=new vH(n.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:n}=this,r=e.glFramebuffers[this.CONTEXT_UID];r.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height));const i=e.colorTextures;let s=i.length;n.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),0===o&&r.msaaBuffer&&(n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,n){const{gl:r}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;r.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer():i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=s[l],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),0===l&&i.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+l,u.target,c._glTextures[this.CONTEXT_UID].texture,n),a.push(r.COLOR_ATTACHMENT0+l))}if(a.length>1&&r.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const u=e.depthTexture;this.renderer.texture.bind(u,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,n)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null):(i.stencil=i.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i.stencil))}canMultisampleFramebuffer(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:n}=this;let r=rn.NONE;if(e<=1||null===n)return r;for(let i=0;i<n.length;i++)if(n[i]<=e){r=n[i];break}return 1===r&&(r=rn.NONE),r}blit(e,n,r){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(2!==s.context.webGLVersion||!i)return;const l=i.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const c=i.colorTextures[0];if(!c)return;l.blitFramebuffer||(l.blitFramebuffer=new y_(i.width,i.height),l.blitFramebuffer.addColorTexture(0,c)),(e=l.blitFramebuffer).colorTextures[0]!==c&&(e.colorTextures[0]=c,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}n||((n=wH).width=i.width,n.height=i.height),r||(r=n);const u=n.width===r.width&&n.height===r.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(n.left,n.top,n.right,n.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,n){const r=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),n||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,n)}disposeAll(e){const n=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<n.length;r++)this.disposeFramebuffer(n[r],e)}forceStencil(){const e=this.current;if(!e)return;const n=e.glFramebuffers[this.CONTEXT_UID];if(!n||n.stencil)return;e.stencil=!0;const r=e.width,i=e.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,s.DEPTH24_STENCIL8,r,i):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,r,i),n.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new ot}destroy(){this.renderer=null}}EC.extension={type:xe.RendererSystem,name:"framebuffer"},Fe.add(EC);const w_={5126:4,5123:2,5121:1};class TC{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,n=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==n.webGLVersion){let r=this.renderer.context.extensions.vertexArrayObject;_e.PREFER_ENV===lo.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=i=>r.bindVertexArrayOES(i),e.deleteVertexArray=i=>r.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(2!==n.webGLVersion){const r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=(i,s)=>r.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,l)=>r.drawElementsInstancedANGLE(i,s,o,a,l),e.drawArraysInstanced=(i,s,o,a)=>r.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===n.webGLVersion||!!n.extensions.uint32ElementIndex}bind(e,n){n=n||this.renderer.shader.shader;const{gl:r}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[n.program.id]||this.initGeometryVao(e,n,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(e,n.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,n=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++)n.update(e.buffers[r])}checkCompatibility(e,n){const r=e.attributes,i=n.attributeData;for(const s in i)if(!r[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,n){const r=e.attributes,i=n.attributeData,s=["g",e.id];for(const o in r)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,n,r=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=n.program;a.glPrograms[s]||this.renderer.shader.generateProgram(n),this.checkCompatibility(e,a);const l=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID];let c=u[l];if(c)return u[a.id]=c,c;const h=e.buffers,d=e.attributes,f={},p={};for(const g in h)f[g]=0,p[g]=0;for(const g in d)!d[g].size&&a.attributeData[g]?d[g].size=a.attributeData[g].size:d[g].size||console.warn(`PIXI Geometry attribute '${g}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[g].buffer]+=d[g].size*w_[d[g].type];for(const g in d){const m=d[g],y=m.size;void 0===m.stride&&(m.stride=f[m.buffer]===y*w_[m.type]?0:f[m.buffer]),void 0===m.start&&(m.start=p[m.buffer],p[m.buffer]+=y*w_[m.type])}c=i.createVertexArray(),i.bindVertexArray(c);for(let g=0;g<h.length;g++){const m=h[g];o.bind(m),r&&m._glBuffers[s].refCount++}return this.activateVao(e,a),u[a.id]=c,u[l]=c,i.bindVertexArray(null),o.unbind(Di.ARRAY_BUFFER),c}disposeGeometry(e,n){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=this.renderer?.buffer;if(e.disposeRunner.remove(this),r){if(o)for(let a=0;a<s.length;a++){const l=s[a]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,0===l.refCount&&!n&&o.dispose(s[a],n))}if(!n)for(const a in r)if("g"===a[0]){const l=r[a];this._activeVao===l&&this.unbind(),i.deleteVertexArray(l)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const n=Object.keys(this.managedGeometries);for(let r=0;r<n.length;r++)this.disposeGeometry(this.managedGeometries[n[r]],e)}activateVao(e,n){const r=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const u in a){const c=a[u],h=o[c.buffer],d=h._glBuffers[i];if(n.attributeData[u]){l!==d&&(s.bind(h),l=d);const f=n.attributeData[u].location;if(r.enableVertexAttribArray(f),r.vertexAttribPointer(f,c.size,c.type||r.FLOAT,c.normalized,c.stride,c.start),c.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(f,c.divisor)}}}}draw(e,n,r,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=2===a?s.UNSIGNED_SHORT:s.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,n||o.indexBuffer.data.length,l,(r||0)*a,i||1):s.drawElements(e,n||o.indexBuffer.data.length,l,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,r,n||o.getSize(),i||1):s.drawArrays(e,r,n||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}TC.extension={type:xe.RendererSystem,name:"geometry"},Fe.add(TC);const DC=new kt;class x_{constructor(e,n){this._texture=e,this.mapCoord=new kt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof n>"u"?.5:n,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,n){void 0===n&&(n=e);const r=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];n[i]=s*r.a+o*r.c+r.tx,n[i+1]=s*r.b+o*r.d+r.ty}return n}update(e){const n=this._texture;if(!n||!n.valid||!e&&this._textureID===n._updateID)return!1;this._textureID=n._updateID,this._updateID++;const r=n._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const i=n.orig,s=n.trim;s&&(DC.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(DC));const o=n.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(n._frame.x+l+u)/o.width,a[1]=(n._frame.y+l+u)/o.height,a[2]=(n._frame.x+n._frame.width-l+u)/o.width,a[3]=(n._frame.y+n._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=n._frame.width===o.width&&n._frame.height===o.height&&0===n.rotate,!0}}class EH extends yn{constructor(e,n,r){let i=null;"string"!=typeof e&&void 0===n&&void 0===r&&(i=e,e=void 0,n=void 0,r=void 0),super(e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",n||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r),this.maskSprite=i,this.maskMatrix=new kt}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,n,r,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new x_(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,n,r,i))}}class TH{constructor(e=null){this.type=cn.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=yn.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=cn.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class CC{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,n){let r=n;if(!r.isMaskData){const s=this.maskDataPool.pop()||new TH;s.pooled=!0,s.maskObject=n,r=s}const i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(i),r._colorMask=i?i._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==cn.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case cn.SCISSOR:this.renderer.scissor.push(r);break;case cn.STENCIL:this.renderer.stencil.push(r);break;case cn.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case cn.COLOR:this.pushColorMask(r)}r.type===cn.SPRITE&&this.maskStack.push(r)}pop(e){const n=this.maskStack.pop();if(n&&n._target===e){if(n.enabled)switch(n.type){case cn.SCISSOR:this.renderer.scissor.pop(n);break;case cn.STENCIL:this.renderer.stencil.pop(n.maskObject);break;case cn.SPRITE:this.popSpriteMask(n);break;case cn.COLOR:this.popColorMask(n)}if(n.reset(),n.pooled&&this.maskDataPool.push(n),0!==this.maskStack.length){const r=this.maskStack[this.maskStack.length-1];r.type===cn.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(e){const n=e.maskObject;e.type=n?n.isSprite?cn.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?cn.SCISSOR:cn.STENCIL:cn.COLOR}pushSpriteMask(e){const{maskObject:n}=e,r=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new EH]));const s=this.renderer,o=s.renderTexture;let a,l;if(o.current){const c=o.current;a=e.resolution||c.resolution,l=e.multisample??c.multisample}else a=e.resolution||s.resolution,l=e.multisample??s.multisample;i[0].resolution=a,i[0].multisample=l,i[0].maskSprite=n;const u=r.filterArea;r.filterArea=n.getBounds(!0),s.filter.push(r,i),r.filterArea=u,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const n=e._colorMask,r=e._colorMask=n&e.colorMask;r!==n&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))}popColorMask(e){const r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==e._colorMask&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))}destroy(){this.renderer=null}}CC.extension={type:xe.RendererSystem,name:"mask"},Fe.add(CC);class SC{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:n}=this.renderer,r=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==r&&(0===i?n.disable(this.glConst):(n.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const IC=new kt,AC=[],gd=class extends SC{constructor(t){super(t),this.glConst=_e.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:n}=t,{renderer:r}=this,i=r.renderTexture,s=n.getBounds(!0,AC.pop()??new ot);this.roundFrameToPixels(s,i.current?i.current.resolution:r.resolution,i.sourceFrame,i.destinationFrame,r.projection.transform),e&&s.fit(e),t._scissorRectLocal=s}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:n,c:r,d:i}=t;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||gd.isMatrixRotated(e.worldTransform)||gd.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const n=t._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(t,e,n,r,i){gd.isMatrixRotated(i)||((i=i?IC.copyFrom(i):IC.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.renderer.filter.transformAABB(i,t),t.fit(r),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&AC.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let MC=gd;MC.extension={type:xe.RendererSystem,name:"scissor"},Fe.add(MC);class PC extends SC{constructor(e){super(e),this.glConst=_e.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const n=e.maskObject,{gl:r}=this.renderer,i=e._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;0!==s&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,i,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,0!==s&&(e._colorMask=s,r.colorMask(0!=(1&s),0!=(2&s),0!=(4&s),0!=(8&s))),this._useCurrent()}pop(e){const n=this.renderer.gl;if(0===this.getStackLength())n.disable(n.STENCIL_TEST);else{const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,i=r?r._colorMask:15;0!==i&&(r._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==i&&(r._colorMask=i,n.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}PC.extension={type:xe.RendererSystem,name:"stencil"},Fe.add(PC);class RC{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(et("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract)},prepare:{enumerable:!1,get:()=>(et("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare)},interaction:{enumerable:!1,get:()=>(et("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events)}})}init(){const e=this.rendererPlugins;for(const n in e)this.plugins[n]=new e[n](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}RC.extension={type:[xe.RendererSystem,xe.CanvasRendererSystem],name:"_plugin"},Fe.add(RC);class NC{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new kt,this.transform=null}update(e,n,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=n||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,n,r,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/n.width*2,s.d=o*(1/n.height*2),s.tx=-1-n.x*s.a,s.ty=-o-n.y*s.d}setTransform(e){}destroy(){this.renderer=null}}NC.extension={type:xe.RendererSystem,name:"projection"},Fe.add(NC);const DH=new sd;class OC{constructor(e){this.renderer=e,this._tempMatrix=new kt}generateTexture(e,n){const{region:r,...i}=n||{},s=r||e.getLocalBounds(null,!0);0===s.width&&(s.width=1),0===s.height&&(s.height=1);const o=go.create({width:s.width,height:s.height,...i});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=e.transform;return e.transform=DH,this.renderer.render(e,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=a,o}destroy(){}}OC.extension={type:[xe.RendererSystem,xe.CanvasRendererSystem],name:"textureGenerator"},Fe.add(OC);const mo=new ot,bu=new ot;class FC{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ot,this.destinationFrame=new ot,this.viewportFrame=new ot}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,n,r){const i=this.renderer;let s,o,a;this.current=e,e?(s=e.baseTexture,a=s.resolution,n||(mo.width=e.frame.width,mo.height=e.frame.height,n=mo),r||(bu.x=e.frame.x,bu.y=e.frame.y,bu.width=n.width,bu.height=n.height,r=bu),o=s.framebuffer):(a=i.resolution,n||(mo.width=i._view.screen.width,mo.height=i._view.screen.height,n=mo),r||((r=mo).width=n.width,r.height=n.height));const l=this.viewportFrame;l.x=r.x*a,l.y=r.y*a,l.width=r.width*a,l.height=r.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(r,n,a,!o),this.renderer.mask.setMaskStack(e?s.maskStack:this.defaultMaskStack),this.sourceFrame.copyFrom(n),this.destinationFrame.copyFrom(r)}clear(e,n){const i=mt.shared.setValue(e||(this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor));(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:u,width:c,height:h}=this.viewportFrame;l=Math.round(l),u=Math.round(u),c=Math.round(c),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,c,h)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,n),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}FC.extension={type:xe.RendererSystem,name:"renderTexture"},Fe.add(FC);class CH{constructor(e,n){this.program=e,this.uniformData=n,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function LC(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function b_(t){const e=new Array(t);for(let n=0;n<e.length;n++)e[n]=!1;return e}function kC(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return b_(2*e);case"bvec3":return b_(3*e);case"bvec4":return b_(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function BC(t,e){const n=t.getShaderSource(e).split("\n").map((u,c)=>`${c}: ${u}`),r=t.getShaderInfoLog(e),i=r.split("\n"),s={},o=i.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>!(!u||s[u]||(s[u]=!0,0))),a=[""];o.forEach(u=>{n[u-1]=`%c${n[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=n.join("\n");a[0]=l,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function PH(t,e,n,r,i){n.buffer.update(i)}const RH={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},UC={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};let Eu,kH=0;const md={textureCount:0,uboCount:0};class HC{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=kH++}systemCheck(){if(!function LH(){if("boolean"==typeof Eu)return Eu;try{Eu=!0===new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")}catch{Eu=!1}return Eu}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,n){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),n||(md.textureCount=0,md.uboCount=0,this.syncUniformGroup(e.uniformGroup,md)),i}setUniforms(e){const n=this.shader.program;n.syncUniforms(n.glPrograms[this.renderer.CONTEXT_UID].uniformData,e,this.renderer)}syncUniformGroup(e,n){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,n))}syncUniforms(e,n,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(n.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const n=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[n]||(this.cache[n]=function nH(t,e){const n=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const r in t.uniforms){const i=e[r];if(!i){t.uniforms[r]?.group&&n.push(t.uniforms[r].ubo?`\n                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');\n                    `:`\n                        renderer.shader.syncUniformGroup(uv.${r}, syncData);\n                    `);continue}const s=t.uniforms[r];let o=!1;for(let a=0;a<$a.length;a++)if($a[a].test(i,s)){n.push($a[a].code(r,s)),o=!0;break}if(!o){const l=(1!==i.size||i.isArray?tH:eH)[i.type].replace("location",`ud["${r}"].location`);n.push(`\n            cu = ud["${r}"];\n            cv = cu.value;\n            v = uv["${r}"];\n            ${l};`)}}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[n],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,n){const r=this.getGlProgram();if(!e.static||0!==e.dirtyId||!r.uniformGroups[e.id]){e.dirtyId=0;const i=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,n);e.buffer.update(),i(r.uniformData,e.uniforms,this.renderer,md,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[n])}createSyncBufferGroup(e,n,r){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(n.program,r);n.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(n.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=function FH(t,e){if(!t.autoManage)return{size:0,syncFunc:PH};const n=function OH(t,e){const n=[];for(const r in t)e[r]&&n.push(e[r]);return n.sort((r,i)=>r.index-i.index),n}(t.uniforms,e),{uboElements:r,size:i}=function NH(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let n=0,r=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(n=UC[o.data.type],o.data.size>1&&(n=Math.max(n,16)*o.data.size),o.dataLen=n,r%n!=0&&r<16){const a=r%n%16;r+=a,i+=a}r+n>16?(i=16*Math.ceil(i/16),o.offset=i,i+=n,r=n):(o.offset=i,r+=n,i+=n)}return i=16*Math.ceil(i/16),{uboElements:e,size:i}}(n),s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let o=0;o<r.length;o++){const a=r[o],l=t.uniforms[a.data.name],u=a.data.name;let c=!1;for(let h=0;h<$a.length;h++){const d=$a[h];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,$a[h].codeUbo(a.data.name,l)),c=!0;break}}if(!c)if(a.data.size>1){const h=hC(a.data.type),d=Math.max(UC[a.data.type]/16,1),f=h/d;s.push(`\n                cv = ud.${u}.value;\n                v = uv.${u};\n                offset = ${a.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${a.data.size*d}; i++)\n                {\n                    for(var j = 0; j < ${f}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${(4-f%4)%4};\n                }\n\n                `)}else s.push(`\n                cv = ud.${u}.value;\n                v = uv.${u};\n                offset = ${a.offset/4};\n                ${RH[a.data.type]};\n                `)}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return n.uniformGroups[e.id]=a.syncFunc,n.uniformGroups[e.id]}getSignature(e,n,r){const i=e.uniforms,s=[`${r}-`];for(const o in i)s.push(o),n[o]&&s.push(n[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const r=e.program,i=function MH(t,e){const n=LC(t,t.VERTEX_SHADER,e.vertexSrc),r=LC(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,n),t.attachShader(i,r);const s=e.extra?.transformFeedbackVaryings;if(s&&("function"!=typeof t.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,"separate"===s.bufferMode?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||function AH(t,e,n,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||BC(t,n),t.getShaderParameter(r,t.COMPILE_STATUS)||BC(t,r),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,i,n,r),e.attributeData=function SH(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=e.getActiveAttrib(t,i);if(s.name.startsWith("gl_"))continue;const o=fC(e,s.type),a={type:o,name:s.name,size:hC(o),location:e.getAttribLocation(t,s.name)};n[s.name]=a}return n}(i,t),e.uniformData=function IH(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;i++){const s=e.getActiveUniform(t,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=fC(e,s.type);n[o]={name:o,index:i,type:l,size:s.size,isArray:a,value:kC(l,s.size)}}return n}(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((u,c)=>u>c?1:-1);for(let u=0;u<l.length;u++)e.attributeData[l[u]].location=u,t.bindAttribLocation(i,u,l[u]);t.linkProgram(i)}t.deleteShader(n),t.deleteShader(r);const o={};for(const l in e.uniformData){const u=e.uniformData[l];o[l]={location:t.getUniformLocation(i,l),value:kC(u.type,u.size)}}return new CH(i,o)}(this.gl,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}HC.extension={type:xe.RendererSystem,name:"shader"},Fe.add(HC);class _d{constructor(e){this.renderer=e}run(e){const{renderer:n}=this;n.runners.init.emit(n.options),e.hello&&console.log(`PixiJS 7.2.4 - ${n.rendererLogId} - https://pixijs.com`),n.resize(n.screen.width,n.screen.height)}destroy(){}}_d.defaultOptions={hello:!1},_d.extension={type:[xe.RendererSystem,xe.CanvasRendererSystem],name:"startup"},Fe.add(_d);const E_=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Ve.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new ss,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=function BH(t,e=[]){return e[Ve.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.ADD]=[t.ONE,t.ONE],e[Ve.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.NONE]=[0,0],e[Ve.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[Ve.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ve.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[Ve.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[Ve.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Ve.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[Ve.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[Ve.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[Ve.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[Ve.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Ve.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()}set(t){if(this.stateId!==(t=t||this.defaultState).data){let e=this.stateId^t.data,n=0;for(;e;)1&e&&this.map[n].call(this,!!(t.data&1<<n)),e>>=1,n++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(E_.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(E_.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],n=this.gl;2===e.length?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const n=this.checks.indexOf(t);e&&-1===n?this.checks.push(t):!e&&-1!==n&&this.checks.splice(n,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let VC=E_;VC.extension={type:xe.RendererSystem,name:"state"},Fe.add(VC);class zH extends mu{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const n=(e.priority??[]).filter(i=>e.systems[i]),r=[...n,...Object.keys(e.systems).filter(i=>!n.includes(i))];for(const i of r)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(n=>{this.runners[n]=new qr(n)})}addSystem(e,n){const r=new e(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=r,this._systemsHash[n]=r;for(const i in this.runners)this.runners[i].add(r);return this}emitWithCustomOptions(e,n){const r=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=r.find(o=>this._systemsHash[o]===i);i[e.name](n[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const yd=class{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=yd.defaultMaxIdle,this.checkCountMax=yd.defaultCheckCountMax,this.mode=yd.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Wm.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let n=!1;for(let r=0;r<e.length;r++){const i=e[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,n=!0)}if(n){let r=0;for(let i=0;i<e.length;i++)null!==e[i]&&(e[r++]=e[i]);e.length=r}}unload(t){const n=t._texture;n&&!n.framebuffer&&this.renderer.texture.destroyTexture(n);for(let r=t.children.length-1;r>=0;r--)this.unload(t.children[r])}destroy(){this.renderer=null}};let ei=yd;ei.defaultMode=Wm.AUTO,ei.defaultMaxIdle=3600,ei.defaultCheckCountMax=600,ei.extension={type:xe.RendererSystem,name:"textureGC"},Fe.add(ei);class T_{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ke.UNSIGNED_BYTE,this.internalFormat=fe.RGBA,this.samplerType=0}}class GC{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Qe,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function WH(t){let e;return e="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?{[ke.UNSIGNED_BYTE]:{[fe.RGBA]:t.RGBA8,[fe.RGB]:t.RGB8,[fe.RG]:t.RG8,[fe.RED]:t.R8,[fe.RGBA_INTEGER]:t.RGBA8UI,[fe.RGB_INTEGER]:t.RGB8UI,[fe.RG_INTEGER]:t.RG8UI,[fe.RED_INTEGER]:t.R8UI,[fe.ALPHA]:t.ALPHA,[fe.LUMINANCE]:t.LUMINANCE,[fe.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[ke.BYTE]:{[fe.RGBA]:t.RGBA8_SNORM,[fe.RGB]:t.RGB8_SNORM,[fe.RG]:t.RG8_SNORM,[fe.RED]:t.R8_SNORM,[fe.RGBA_INTEGER]:t.RGBA8I,[fe.RGB_INTEGER]:t.RGB8I,[fe.RG_INTEGER]:t.RG8I,[fe.RED_INTEGER]:t.R8I},[ke.UNSIGNED_SHORT]:{[fe.RGBA_INTEGER]:t.RGBA16UI,[fe.RGB_INTEGER]:t.RGB16UI,[fe.RG_INTEGER]:t.RG16UI,[fe.RED_INTEGER]:t.R16UI,[fe.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[ke.SHORT]:{[fe.RGBA_INTEGER]:t.RGBA16I,[fe.RGB_INTEGER]:t.RGB16I,[fe.RG_INTEGER]:t.RG16I,[fe.RED_INTEGER]:t.R16I},[ke.UNSIGNED_INT]:{[fe.RGBA_INTEGER]:t.RGBA32UI,[fe.RGB_INTEGER]:t.RGB32UI,[fe.RG_INTEGER]:t.RG32UI,[fe.RED_INTEGER]:t.R32UI,[fe.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[ke.INT]:{[fe.RGBA_INTEGER]:t.RGBA32I,[fe.RGB_INTEGER]:t.RGB32I,[fe.RG_INTEGER]:t.RG32I,[fe.RED_INTEGER]:t.R32I},[ke.FLOAT]:{[fe.RGBA]:t.RGBA32F,[fe.RGB]:t.RGB32F,[fe.RG]:t.RG32F,[fe.RED]:t.R32F,[fe.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[ke.HALF_FLOAT]:{[fe.RGBA]:t.RGBA16F,[fe.RGB]:t.RGB16F,[fe.RG]:t.RG16F,[fe.RED]:t.R16F},[ke.UNSIGNED_SHORT_5_6_5]:{[fe.RGB]:t.RGB565},[ke.UNSIGNED_SHORT_4_4_4_4]:{[fe.RGBA]:t.RGBA4},[ke.UNSIGNED_SHORT_5_5_5_1]:{[fe.RGBA]:t.RGB5_A1},[ke.UNSIGNED_INT_2_10_10_10_REV]:{[fe.RGBA]:t.RGB10_A2,[fe.RGBA_INTEGER]:t.RGB10_A2UI},[ke.UNSIGNED_INT_10F_11F_11F_REV]:{[fe.RGB]:t.R11F_G11F_B10F},[ke.UNSIGNED_INT_5_9_9_9_REV]:{[fe.RGB]:t.RGB9_E5},[ke.UNSIGNED_INT_24_8]:{[fe.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[ke.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[fe.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:{[ke.UNSIGNED_BYTE]:{[fe.RGBA]:t.RGBA,[fe.RGB]:t.RGB,[fe.ALPHA]:t.ALPHA,[fe.LUMINANCE]:t.LUMINANCE,[fe.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[ke.UNSIGNED_SHORT_5_6_5]:{[fe.RGB]:t.RGB},[ke.UNSIGNED_SHORT_4_4_4_4]:{[fe.RGBA]:t.RGBA},[ke.UNSIGNED_SHORT_5_5_5_1]:{[fe.RGBA]:t.RGBA}},e}(e);const n=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=n;for(let i=0;i<n;i++)this.boundTextures[i]=null;this.emptyTextures={};const r=new T_(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new T_(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,n=0){const{gl:r}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[n]!==e&&(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[n]=e}else this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[n]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:n,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<r.length;i++)r[i]===e&&(this.currentLocation!==i&&(n.activeTexture(n.TEXTURE0+i),this.currentLocation=i),n.bindTexture(e.target,this.emptyTextures[e.target].texture),r[i]=null)}ensureSamplerType(e){const{boundTextures:n,hasIntegerTextures:r,CONTEXT_UID:i}=this;if(r)for(let s=e-1;s>=0;--s){const o=n[s];o&&o._glTextures[i].samplerType!==zm.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const n=new T_(this.gl.createTexture());return n.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=n,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),n}initTextureType(e,n){n.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,n.type=2===this.webGLVersion&&e.type===ke.HALF_FLOAT?this.gl.HALF_FLOAT:e.type}updateTexture(e){const n=e._glTextures[this.CONTEXT_UID];if(!n)return;const r=this.renderer;if(this.initTextureType(e,n),e.resource?.upload(r,e,n))n.samplerType!==zm.FLOAT&&(this.hasIntegerTextures=!0);else{const i=e.realWidth,s=e.realHeight,o=r.gl;(n.width!==i||n.height!==s||n.dirtyId<0)&&(n.width=i,n.height=s,o.texImage2D(e.target,0,n.internalFormat,i,s,0,e.format,n.type,null))}e.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(e),n.dirtyId=e.dirtyId}destroyTexture(e,n){const{gl:r}=this;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!n)){const i=this.managedTextures.indexOf(e);-1!==i&&Va(this.managedTextures,i,1)}}updateTextureStyle(e){const n=e._glTextures[this.CONTEXT_UID];n&&(n.mipmap=!!(e.mipmap!==Ei.POW2&&2===this.webGLVersion||e.isPowerOfTwo)&&e.mipmap>=1,n.wrapMode=2===this.webGLVersion||e.isPowerOfTwo?e.wrapMode:Ss.CLAMP,e.resource?.style(this.renderer,e,n)||this.setStyle(e,n),n.dirtyStyleId=e.dirtyStyleId)}setStyle(e,n){const r=this.gl;if(n.mipmap&&e.mipmap!==Ei.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,n.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,n.wrapMode),n.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===ns.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===ns.LINEAR){const s=Math.min(e.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===ns.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===ns.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}GC.extension={type:xe.RendererSystem,name:"texture"},Fe.add(GC);class jC{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,n){const{gl:r,renderer:i}=this;n&&i.shader.bind(n),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:n,renderer:r,CONTEXT_UID:i}=this,s=n.createTransformFeedback();e._glTransformFeedbacks[i]=s,n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(r.buffer.update(a),a._glBuffers[i].refCount++,n.bindBufferBase(n.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,n){const r=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,0===l.refCount&&!n&&s.dispose(a,n))}r&&(n||i.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}jC.extension={type:xe.RendererSystem,name:"transformFeedback"},Fe.add(jC);class vd{constructor(e){this.renderer=e}init(e){this.screen=new ot(0,0,e.width,e.height),this.element=e.view||_e.ADAPTER.createCanvas(),this.resolution=e.resolution||_e.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,n){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(n*this.resolution);const r=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=r,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",r,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}vd.defaultOptions={width:800,height:600,resolution:_e.RESOLUTION,autoDensity:!1},vd.extension={type:[xe.RendererSystem,xe.CanvasRendererSystem],name:"_view"},Fe.add(vd),_e.PREFER_ENV=lo.WEBGL2,_e.STRICT_TEXTURE_CACHE=!1,_e.RENDER_OPTIONS={...dd.defaultOptions,...hd.defaultOptions,...vd.defaultOptions,..._d.defaultOptions},Object.defineProperties(_e,{WRAP_MODE:{get:()=>Qe.defaultOptions.wrapMode,set(t){et("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Qe.defaultOptions.wrapMode=t}},SCALE_MODE:{get:()=>Qe.defaultOptions.scaleMode,set(t){et("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Qe.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get:()=>Qe.defaultOptions.mipmap,set(t){et("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Qe.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get:()=>Qe.defaultOptions.anisotropicLevel,set(t){et("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Qe.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get:()=>(et("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),yn.defaultResolution),set(t){yn.defaultResolution=t}},FILTER_MULTISAMPLE:{get:()=>(et("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),yn.defaultMultisample),set(t){yn.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get:()=>Jr.defaultMaxTextures,set(t){et("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Jr.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get:()=>Jr.defaultBatchSize,set(t){et("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Jr.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get:()=>Jr.canUploadSameBuffer,set(t){et("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Jr.canUploadSameBuffer=t}},GC_MODE:{get:()=>ei.defaultMode,set(t){et("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),ei.defaultMode=t}},GC_MAX_IDLE:{get:()=>ei.defaultMaxIdle,set(t){et("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),ei.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get:()=>ei.defaultCheckCountMax,set(t){et("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),ei.defaultCheckCountMax=t}},PRECISION_VERTEX:{get:()=>Zr.defaultVertexPrecision,set(t){et("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Zr.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get:()=>Zr.defaultFragmentPrecision,set(t){et("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Zr.defaultFragmentPrecision=t}}});var Ns=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(Ns||{});class D_{constructor(e,n=null,r=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=n,this.priority=r,this.once=i}match(e,n=null){return this.fn===e&&this.context===n}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=e?null:n,this.previous=null,n}}const gr=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new D_(null,null,1/0),this.deltaMS=1/gr.targetFPMS,this.elapsedMS=1/gr.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,n=Ns.NORMAL){return this._addListener(new D_(t,e,n))}addOnce(t,e,n=Ns.NORMAL){return this._addListener(new D_(t,e,n,!0))}_addListener(t){let e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this}remove(t,e){let n=this._head.next;for(;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*gr.targetFPMS;const n=this._head;let r=n.next;for(;r;)r=r.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,gr.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(0===t)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!gr._shared){const t=gr._shared=new gr;t.autoStart=!0,t._protected=!0}return gr._shared}static get system(){if(!gr._system){const t=gr._system=new gr;t.autoStart=!0,t._protected=!0}return gr._system}};let sn=gr;sn.targetFPMS=.06,Object.defineProperties(_e,{TARGET_FPMS:{get:()=>sn.targetFPMS,set(t){et("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),sn.targetFPMS=t}}});class $C{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,Ns.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?sn.shared:new sn,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}$C.extension=xe.Application,Fe.add($C);const zC=[];Fe.handleByList(xe.Renderer,zC);const WC="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";class XC{constructor(e){this.renderer=e}contextChange(e){let n;if(1===this.renderer.context.webGLVersion){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}this.multisample=n>=rn.HIGH?rn.HIGH:n>=rn.MEDIUM?rn.MEDIUM:n>=rn.LOW?rn.LOW:rn.NONE}destroy(){}}XC.extension={type:xe.RendererSystem,name:"_multisample"},Fe.add(XC);class KH{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class YC{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);n.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:n}=this;n.bindBuffer(e,null)}bindBufferBase(e,n){const{gl:r,CONTEXT_UID:i}=this;if(this.boundBufferBases[n]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[n]=e,r.bindBufferBase(r.UNIFORM_BUFFER,n,s.buffer)}}bindBufferRange(e,n,r){const{gl:i,CONTEXT_UID:s}=this;r=r||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,n||0,o.buffer,256*r,256)}update(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,n.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)n.bufferSubData(e.type,0,e.data);else{const s=e.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,n.bufferData(e.type,e.data,s)}}dispose(e,n){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),r&&(n||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const n=Object.keys(this.managedBuffers);for(let r=0;r<n.length;r++)this.dispose(this.managedBuffers[n[r]],e)}createGLBuffer(e){const{CONTEXT_UID:n,gl:r}=this;return e._glBuffers[n]=new KH(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[n]}}YC.extension={type:xe.RendererSystem,name:"buffer"},Fe.add(YC);class qC{constructor(e){this.renderer=e}render(e,n){const r=this.renderer;let i,s,o,a;if(n&&(i=n.renderTexture,s=n.clear,o=n.transform,a=n.skipUpdateTransform),this.renderingToScreen=!i,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=o,!r.context.isLost){if(i||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}r.renderTexture.bind(i),r.batch.currentRenderer.start(),(s??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),i&&(n.blit&&r.framebuffer.blit(),i.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}qC.extension={type:xe.RendererSystem,name:"objectRenderer"},Fe.add(qC);const C_=class extends zH{constructor(t){super(),this.type=DD.WEBGL,t=Object.assign({},_e.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Kr({projectionMatrix:new kt},!0),this.setup({runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:C_.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]}),"useContextAlpha"in t&&(et("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha,t.backgroundAlpha=!1===t.useContextAlpha?1:t.backgroundAlpha),this._plugin.rendererPlugins=C_.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return!t?.forceCanvas&&function wU(){return typeof Zm>"u"&&(Zm=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:_e.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!_e.ADAPTER.getWebGLRenderingContext())return!1;const n=_e.ADAPTER.createCanvas();let r=n.getContext("webgl",e)||n.getContext("experimental-webgl",e);const i=!!r?.getContextAttributes()?.stencil;if(r){const s=r.getExtension("WEBGL_lose_context");s&&s.loseContext()}return r=null,i}catch{return!1}}()),Zm}()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return et("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return et("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return et("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return et("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){et("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return et("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){et("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return et("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let Wa=C_;Wa.extension={type:xe.Renderer,priority:1},Wa.__plugins={},Wa.__systems={},Fe.handleByMap(xe.RendererPlugin,Wa.__plugins),Fe.handleByMap(xe.RendererSystem,Wa.__systems),Fe.add(Wa);class ZC extends vu{constructor(e,n){const{width:r,height:i}=n||{};super(r,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new Qe;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,n){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):this.addResourceAt(e[r]instanceof vu?e[r]:sC(e[r],n),r))}dispose(){for(let e=0,n=this.length;e<n;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,n){if(!this.items[n])throw new Error(`Index ${n} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[n].setResource(e),this}bind(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)}unbind(e){super.unbind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)}load(){if(this._load)return this._load;const n=this.items.map(r=>r.resource).filter(r=>r).map(r=>r.load());return this._load=Promise.all(n).then(()=>{const{realWidth:r,realHeight:i}=this.items[0];return this.resize(r,i),Promise.resolve(this)}),this._load}}const Tu=class extends ZC{constructor(t,e){const{width:n,height:r,autoLoad:i,linkBaseTexture:s}=e||{};if(t&&t.length!==Tu.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:n,height:r});for(let o=0;o<Tu.SIDES;o++)this.items[o].target=Ba.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=!1!==s,t&&this.initFromArray(t,e),!1!==i&&this.load()}bind(t){super.bind(t),t.target=Ba.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=Ba.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,n){const r=this.itemDirtyIds;for(let i=0;i<Tu.SIDES;i++){const s=this.items[i];(r[i]<s.dirtyId||n.dirtyId<e.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,n),r[i]=s.dirtyId):r[i]<-1&&(t.gl.texImage2D(s.target,0,n.internalFormat,e.realWidth,e.realHeight,0,e.format,n.type,null),r[i]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===Tu.SIDES}};let KC=Tu;KC.SIDES=6;class Xa extends Rs{constructor(e,n){let r,i;n=n||{},"string"==typeof e?(r=Xa.EMPTY,i=e):(r=e,i=null),super(r),this.url=i,this.crossOrigin=n.crossOrigin??!0,this.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,this._load=null,!1!==n.autoLoad&&this.load()}load(){var e=this;return this._load||(this._load=new Promise(function(){var n=(0,De.Z)(function*(r,i){if(null!==e.url)try{const s=yield _e.ADAPTER.fetch(e.url,{mode:e.crossOrigin?"cors":"no-cors"});if(e.destroyed)return;const o=yield s.blob();if(e.destroyed)return;const a=yield createImageBitmap(o,{premultiplyAlpha:null===e.alphaMode||e.alphaMode===Xr.UNPACK?"premultiply":"none"});if(e.destroyed)return;e.source=a,e.update(),r(e)}catch(s){if(e.destroyed)return;i(s),e.onError.emit(s)}else r(e)});return function(r,i){return n.apply(this,arguments)}}())),this._load}upload(e,n,r){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),super.upload(e,n,r)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&("string"==typeof e||e instanceof ImageBitmap)}static get EMPTY(){return Xa._EMPTY=Xa._EMPTY??_e.ADAPTER.createCanvas(0,0),Xa._EMPTY}}const wd=class extends Rs{constructor(t,e){e=e||{},super(_e.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},wd.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()})),this._load}_loadSvg(){const t=new Image;Rs.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,n=t.height;if(!e||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let r=e*this.scale,i=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(r=this._overrideWidth||this._overrideHeight/n*e,i=this._overrideHeight||this._overrideWidth/e*n),r=Math.round(r),i=Math.round(i);const s=this.source;s.width=r,s.height=i,s._pixiId=`canvas_${uo()}`,s.getContext("2d").drawImage(t,0,0,e,n,0,0,r,i),this._resolve(),this._resolve=null}}static getSize(t){const e=wd.SVG_SIZE.exec(t),n={};return e&&(n[e[1]]=Math.round(parseFloat(e[3])),n[e[5]]=Math.round(parseFloat(e[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return"svg"===e||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&wd.SVG_XML.test(t)}};let Du=wd;Du.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Du.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const S_=class extends Rs{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const n=document.createElement("video");n.setAttribute("preload","auto"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),"string"==typeof t&&(t=[t]),Rs.crossOrigin(n,t[0].src||t[0],e.crossorigin);for(let i=0;i<t.length;++i){const s=document.createElement("source");let{src:o,mime:a}=t[i];o=o||t[i];const l=o.split("?").shift().toLowerCase(),u=l.slice(l.lastIndexOf(".")+1);a=a||S_.MIME_TYPES[u]||`video/${u}`,s.src=o,s.type=a,n.appendChild(s)}t=n}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==e.autoLoad&&this.load()}update(t=0){this.destroyed||(this._msToNextUpdate=Math.floor(this._msToNextUpdate-sn.shared.elapsedMS*this.source.playbackRate),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise(e=>{this.valid?e(this):(this._resolve=e,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(sn.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(sn.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(sn.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(sn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(sn.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||S_.TYPES.includes(e)}};let I_=S_;I_.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],I_.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},h_.push(Xa,yC,class JH extends Rs{constructor(e){super(e)}static test(e){const{OffscreenCanvas:n}=globalThis;return!!(n&&e instanceof n)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}},I_,Du,wu,KC,class QH extends ZC{constructor(e,n){const{width:r,height:i}=n||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:r,height:i}),s&&this.initFromArray(s,n)}addBaseTextureAt(e,n){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,n),this}bind(e){super.bind(e),e.target=Ba.TEXTURE_2D_ARRAY}upload(e,n,r){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,n.format,r.type,null);for(let l=0;l<i;l++){const u=o[l];s[l]<u.dirtyId&&(s[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,n.format,r.type,u.resource.source))}return!0}});class xd{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?ot.EMPTY:((e=e||new ot(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,n){const{a:r,b:i,c:s,d:o,tx:a,ty:l}=e,u=r*n.x+s*n.y+a,c=i*n.x+o*n.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(e){let n=this.minX,r=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,this.minX=n,this.minY=r,this.maxX=i,this.maxY=s}addFrame(e,n,r,i,s){this.addFrameMatrix(e.worldTransform,n,r,i,s)}addFrameMatrix(e,n,r,i,s){const o=e.a,a=e.b,l=e.c,u=e.d,c=e.tx,h=e.ty;let d=this.minX,f=this.minY,p=this.maxX,g=this.maxY,m=o*n+l*r+c,y=a*n+u*r+h;d=m<d?m:d,f=y<f?y:f,p=m>p?m:p,g=y>g?y:g,m=o*i+l*r+c,y=a*i+u*r+h,d=m<d?m:d,f=y<f?y:f,p=m>p?m:p,g=y>g?y:g,m=o*n+l*s+c,y=a*n+u*s+h,d=m<d?m:d,f=y<f?y:f,p=m>p?m:p,g=y>g?y:g,m=o*i+l*s+c,y=a*i+u*s+h,d=m<d?m:d,f=y<f?y:f,p=m>p?m:p,g=y>g?y:g,this.minX=d,this.minY=f,this.maxX=p,this.maxY=g}addVertexData(e,n,r){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=n;l<r;l+=2){const u=e[l],c=e[l+1];i=u<i?u:i,s=c<s?c:s,o=u>o?u:o,a=c>a?c:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,n,r,i){this.addVerticesMatrix(e.worldTransform,n,r,i)}addVerticesMatrix(e,n,r,i,s=0,o=s){const a=e.a,l=e.b,u=e.c,c=e.d,h=e.tx,d=e.ty;let f=this.minX,p=this.minY,g=this.maxX,m=this.maxY;for(let y=r;y<i;y+=2){const v=n[y],w=n[y+1],E=a*v+u*w+h,M=c*w+l*v+d;f=Math.min(f,E-s),g=Math.max(g,E+s),p=Math.min(p,M-o),m=Math.max(m,M+o)}this.minX=f,this.minY=p,this.maxX=g,this.maxY=m}addBounds(e){const n=this.minX,r=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<n?e.minX:n,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,n){const r=e.minX>n.minX?e.minX:n.minX,i=e.minY>n.minY?e.minY:n.minY,s=e.maxX<n.maxX?e.maxX:n.maxX,o=e.maxY<n.maxY?e.maxY:n.maxY;if(r<=s&&i<=o){const a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=o>c?o:c}}addBoundsMatrix(e,n){this.addFrameMatrix(n,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,n){const r=e.minX>n.x?e.minX:n.x,i=e.minY>n.y?e.minY:n.y,s=e.maxX<n.x+n.width?e.maxX:n.x+n.width,o=e.maxY<n.y+n.height?e.maxY:n.y+n.height;if(r<=s&&i<=o){const a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=o>c?o:c}}pad(e=0,n=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=n,this.maxY+=n)}addFramePad(e,n,r,i,s,o){n-=o,r+=s,i+=o,this.minX=this.minX<(e-=s)?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<n?this.minY:n,this.maxY=this.maxY>i?this.maxY:i}}class jt extends mu{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new sd,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new xd,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const n=Object.keys(e);for(let r=0;r<n.length;++r){const i=n[r];Object.defineProperty(jt.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,n){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new ot),n=this._boundsRect),this._bounds.getRectangle(n)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new ot),e=this._localBoundsRect),this._localBounds||(this._localBounds=new xd);const n=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=r,this.transform=n,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,n,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,n)}toLocal(e,n,r,i){return n&&(e=n.toGlobal(e,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,n=0,r=1,i=1,s=0,o=0,a=0,l=0,u=0){return this.position.x=e,this.position.y=n,this.scale.x=r||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e8),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*qU}set angle(e){this.transform.rotation=e*ZU}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,0===n._maskRefCount&&(n.renderable=!0,n.isMask=!1))}if(this._mask=e,this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(0===n._maskRefCount&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}}}class e8 extends jt{constructor(){super(...arguments),this.sortDirty=null}}jt.prototype.displayObjectUpdateTransform=jt.prototype.updateTransform;const t8=new kt;function n8(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const A_=class extends jt{constructor(){super(),this.children=[],this.sortableChildren=A_.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r)}getChildIndex(t){const e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(t);Va(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],n=this.children.indexOf(e);if(-1===n)return null;e.parent=null,e.transform._parentID=-1,Va(this.children,n,1),this._boundsID++,this.onChildrenChange(n),e.emit("removed",this),this.emit("childRemoved",e,this,n)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Va(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const i=e-t;let s;if(i>0&&i<=e){s=this.children.splice(t,i);for(let o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,n=this.children.length;e<n;++e){const r=this.children[e];r._lastSortedIndex=e,!t&&0!==r.zIndex&&(t=!0)}t&&this.children.length>1&&this.children.sort(n8),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const n=this.children[t];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){const n=e._mask.isMaskData?e._mask.maskObject:e._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const n=super.getLocalBounds(t);if(!e)for(let r=0,i=this.children.length;r<i;++r){const s=this.children[r];s.visible&&s.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let n,r;this.cullArea?(n=this.cullArea,r=this.worldTransform):this._render!==A_.prototype._render&&(n=this.getBounds(!0));const i=t.projection.transform;if(i&&(r?(r=t8.copyFrom(r),r.prepend(i)):r=i),n&&e.intersects(n,r))this._render(t);else if(this.cullArea)return;for(let s=0,o=this.children.length;s<o;++s){const a=this.children[s],l=a.cullable;a.cullable=l||!this.cullArea,a.render(t),a.cullable=l}}render(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let e=0,n=this.children.length;e<n;++e)this.children[e].render(t)}}renderAdvanced(t){const e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let i=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i])}const r=e&&this._enabledFilters?.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==cn.NONE));if(r&&t.batch.flush(),e&&this._enabledFilters?.length&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let i=0,s=this.children.length;i<s;++i)this.children[i].render(t)}r&&t.batch.flush(),n&&t.mask.pop(this),e&&this._enabledFilters?.length&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e="boolean"==typeof t?t:t?.children,n=this.removeChildren(0,this.children.length);if(e)for(let r=0;r<n.length;++r)n[r].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}};let Sn=A_;Sn.defaultSortableChildren=!1,Sn.prototype.containerUpdateTransform=Sn.prototype.updateTransform,Object.defineProperties(_e,{SORTABLE_CHILDREN:{get:()=>Sn.defaultSortableChildren,set(t){et("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Sn.defaultSortableChildren=t}}});const Cu=new gt,r8=new Uint16Array([0,1,2,0,2,3]);class ti extends Sn{constructor(e){super(),this._anchor=new Ps(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new mt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Ve.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||be.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=r8,this.pluginName="batch",this.isSprite=!0,this._roundPixels=_e.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Is(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Is(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const n=this.transform.worldTransform,r=n.a,i=n.b,s=n.c,o=n.d,a=n.tx,l=n.ty,u=this.vertexData,c=e.trim,h=e.orig,d=this._anchor;let f=0,p=0,g=0,m=0;if(c?(p=c.x-d._x*h.width,f=p+c.width,m=c.y-d._y*h.height,g=m+c.height):(p=-d._x*h.width,f=p+h.width,m=-d._y*h.height,g=m+h.height),u[0]=r*p+s*m+a,u[1]=o*m+i*p+l,u[2]=r*f+s*m+a,u[3]=o*m+i*f+l,u[4]=r*f+s*g+a,u[5]=o*g+i*f+l,u[6]=r*p+s*g+a,u[7]=o*g+i*p+l,this._roundPixels){const y=_e.RESOLUTION;for(let v=0;v<u.length;++v)u[v]=Math.round(u[v]*y)/y}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const n=this.vertexTrimmedData,r=this._texture.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,u=s.d,c=s.tx,h=s.ty,d=-i._x*r.width,f=d+r.width,p=-i._y*r.height,g=p+r.height;n[0]=o*d+l*p+c,n[1]=u*p+a*d+h,n[2]=o*f+l*p+c,n[3]=u*p+a*f+h,n[4]=o*f+l*g+c,n[5]=u*g+a*f+h,n[6]=o*d+l*g+c,n[7]=u*g+a*d+h}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,n=this._texture.orig;!e||e.width===n.width&&e.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new xd),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ot),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Cu);const n=this._texture.orig.width,r=this._texture.orig.height,i=-n*this.anchor.x;let s=0;return Cu.x>=i&&Cu.x<i+n&&(s=-r*this.anchor.y,Cu.y>=s&&Cu.y<s+r)}destroy(e){super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof e?e:e?.texture)&&this._texture.destroy(!!("boolean"==typeof e?e:e?.baseTexture)),this._texture=null}static from(e,n){const r=e instanceof be?e:be.from(e,n);return new ti(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const n=Is(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const n=Is(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||be.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const QC=new kt;jt.prototype._cacheAsBitmap=!1,jt.prototype._cacheData=null,jt.prototype._cacheAsBitmapResolution=null,jt.prototype._cacheAsBitmapMultisample=null;class i8{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(jt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;let e;this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new i8),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}),jt.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},jt.prototype._initCachedDisplayObject=function(e){if(this._cacheData?.sprite)return;const n=this.alpha;this.alpha=1,e.batch.flush();const r=this.getLocalBounds(null,!0).clone();this.filters?.length&&r.pad(this.filters[0].padding),r.ceil(_e.RESOLUTION);const i=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),o=e.renderTexture.destinationFrame.clone(),a=e.projection.transform,l=go.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:this.cacheAsBitmapMultisample??e.multisample}),u=`cacheAsBitmap_${uo()}`;this._cacheData.textureCacheId=u,Qe.addToCache(l.baseTexture,u),be.addToCache(l,u);const c=this.transform.localTransform.copyTo(QC).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=a,e.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const h=new ti(l);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-r.x/r.width,h.anchor.y=-r.y/r.height,h.alpha=n,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)},jt.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},jt.prototype._initCachedDisplayObjectCanvas=function(e){if(this._cacheData?.sprite)return;const n=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;const i=e.canvasContext.activeContext,s=e._projTransform;n.ceil(_e.RESOLUTION);const o=go.create({width:n.width,height:n.height}),a=`cacheAsBitmap_${uo()}`;this._cacheData.textureCacheId=a,Qe.addToCache(o.baseTexture,a),be.addToCache(o,a);const l=QC;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=n.x,l.ty-=n.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),e.canvasContext.activeContext=i,e._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const u=new ti(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-n.x/n.width,u.anchor.y=-n.y/n.height,u.alpha=r,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)},jt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},jt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},jt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Qe.removeFromCache(this._cacheData.textureCacheId),be.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},jt.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},jt.prototype.name=null,Sn.prototype.getChildByName=function(e,n){for(let r=0,i=this.children.length;r<i;r++)if(this.children[r].name===e)return this.children[r];if(n)for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r];if(!s.getChildByName)continue;const o=s.getChildByName(e,!0);if(o)return o}return null},jt.prototype.getGlobalPosition=function(e=new gt,n=!1){return this.parent?this.parent.toGlobal(this.position,e,n):(e.x=this.position.x,e.y=this.position.y),e};const a8={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},l8=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");class M_ extends yn{constructor(e,n=8,r=4,i=yn.defaultResolution,s=5){const o=function h8(t,e){const n=Math.ceil(t/2);let s,r="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",i="";s=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",o-(n-1)+".0"),i+=a,i+="\n"}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}(s,e),a=function u8(t){const e=a8[t],n=e.length;let o,r=l8,i="";for(let a=0;a<t;a++){let l="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a.toString());o=a,a>=n&&(o=t-a-1),l=l.replace("%value%",e[o].toString()),i+=l,i+="\n"}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=r,this.blur=n}apply(e,n,r,i){if(this.uniforms.strength=r?this.horizontal?1/r.width*(r.width/n.width):1/r.height*(r.height/n.height):this.horizontal?1/e.renderer.width*(e.renderer.width/n.width):1/e.renderer.height*(e.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,n,r,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=n,l=s;this.state.blend=!1,e.applyFilter(this,a,l,Ti.CLEAR);for(let u=1;u<this.passes-1;u++){e.bindAndClear(a,Ti.BLIT),this.uniforms.uSampler=l;const c=l;l=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,r,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+2*Math.abs(e),this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class P_ extends yn{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(WC,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",e),this.alpha=1}_loadMatrix(e,n=!1){let r=e;n&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,n,r){return e[0]=n[0]*r[0]+n[1]*r[5]+n[2]*r[10]+n[3]*r[15],e[1]=n[0]*r[1]+n[1]*r[6]+n[2]*r[11]+n[3]*r[16],e[2]=n[0]*r[2]+n[1]*r[7]+n[2]*r[12]+n[3]*r[17],e[3]=n[0]*r[3]+n[1]*r[8]+n[2]*r[13]+n[3]*r[18],e[4]=n[0]*r[4]+n[1]*r[9]+n[2]*r[14]+n[3]*r[19]+n[4],e[5]=n[5]*r[0]+n[6]*r[5]+n[7]*r[10]+n[8]*r[15],e[6]=n[5]*r[1]+n[6]*r[6]+n[7]*r[11]+n[8]*r[16],e[7]=n[5]*r[2]+n[6]*r[7]+n[7]*r[12]+n[8]*r[17],e[8]=n[5]*r[3]+n[6]*r[8]+n[7]*r[13]+n[8]*r[18],e[9]=n[5]*r[4]+n[6]*r[9]+n[7]*r[14]+n[8]*r[19]+n[9],e[10]=n[10]*r[0]+n[11]*r[5]+n[12]*r[10]+n[13]*r[15],e[11]=n[10]*r[1]+n[11]*r[6]+n[12]*r[11]+n[13]*r[16],e[12]=n[10]*r[2]+n[11]*r[7]+n[12]*r[12]+n[13]*r[17],e[13]=n[10]*r[3]+n[11]*r[8]+n[12]*r[13]+n[13]*r[18],e[14]=n[10]*r[4]+n[11]*r[9]+n[12]*r[14]+n[13]*r[19]+n[14],e[15]=n[15]*r[0]+n[16]*r[5]+n[17]*r[10]+n[18]*r[15],e[16]=n[15]*r[1]+n[16]*r[6]+n[17]*r[11]+n[18]*r[16],e[17]=n[15]*r[2]+n[16]*r[7]+n[17]*r[12]+n[18]*r[17],e[18]=n[15]*r[3]+n[16]*r[8]+n[17]*r[13]+n[18]*r[18],e[19]=n[15]*r[4]+n[16]*r[9]+n[17]*r[14]+n[18]*r[19]+n[19],e}_colorMatrix(e){const n=new Float32Array(e);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n}brightness(e,n){this._loadMatrix([e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0],n)}tint(e,n){const[r,i,s]=mt.shared.setValue(e).toArray();this._loadMatrix([r,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0],n)}greyscale(e,n){this._loadMatrix([e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0],n)}blackAndWhite(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)}hue(e,n){e=(e||0)/180*Math.PI;const r=Math.cos(e),i=Math.sin(e),o=1/3,a=(0,Math.sqrt)(o);this._loadMatrix([r+(1-r)*o,o*(1-r)-a*i,o*(1-r)+a*i,0,0,o*(1-r)+a*i,r+o*(1-r),o*(1-r)-a*i,0,0,o*(1-r)-a*i,o*(1-r)+a*i,r+o*(1-r),0,0,0,0,0,1,0],n)}contrast(e,n){const r=(e||0)+1,i=-.5*(r-1);this._loadMatrix([r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0],n)}saturate(e=0,n){const r=2*e/3+1,i=-.5*(r-1);this._loadMatrix([r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0],n)}desaturate(){this.saturate(-1)}negative(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)}sepia(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)}technicolor(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)}polaroid(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)}toBGR(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)}kodachrome(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)}browni(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)}vintage(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)}colorTone(e,n,r,i,s){e=e||.2,n=n||.15,r=r||16770432,i=i||3375104;const o=mt.shared,[a,l,u]=o.setValue(r).toArray(),[c,h,d]=o.setValue(i).toArray();this._loadMatrix([.3,.59,.11,0,0,a,l,u,e,0,c,h,d,n,0,a-c,l-h,u-d,0,0],s)}night(e,n){this._loadMatrix([-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0],n)}predator(e,n){this._loadMatrix([11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0],n)}lsd(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}P_.prototype.grayscale=P_.prototype.greyscale;const JC={AlphaFilter:class o8 extends yn{constructor(e=1){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}},BlurFilter:class d8 extends yn{constructor(e=8,n=4,r=yn.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new M_(!0,e,n,r,i),this.blurYFilter=new M_(!1,e,n,r,i),this.resolution=r,this.quality=n,this.blur=e,this.repeatEdgePixels=!1}apply(e,n,r,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,n,a,Ti.CLEAR),this.blurYFilter.apply(e,a,r,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,n,r,i):this.blurXFilter.apply(e,n,r,i)}updatePadding(){this.padding=this._repeatEdgePixels?0:2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}},BlurFilterPass:M_,ColorMatrixFilter:P_,DisplacementFilter:class m8 extends yn{constructor(e,n){const r=new kt;e.renderable=!1,super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,null==n&&(n=20),this.scale=new gt(n,n)}apply(e,n,r,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);0!==o&&0!==a&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,n,r,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}},FXAAFilter:class v8 extends yn{constructor(){super("\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}},NoiseFilter:class x8 extends yn{constructor(e=.5,n=Math.random()){super(WC,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=e,this.seed=n}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}};Object.entries(JC).forEach(([t,e])=>{Object.defineProperty(JC,t,{get:()=>(et("7.1.0",`filters.${t} has moved to ${t}`),e)})});const Os=new class b8{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(sn.system.add(this.tickerUpdate,this,Ns.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(sn.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove)return void(this._didMove=!1);const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&"touch"===e.pointerType||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}};class Su{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Su.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new gt,this.page=new gt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,n,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,n,r,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class bd extends Su{constructor(){super(...arguments),this.client=new gt,this.movement=new gt,this.offset=new gt,this.global=new gt,this.screen=new gt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,n,r){return e.worldTransform.applyInverse(r||this.global,n)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,n,r,i,s,o,a,l,u,c,h,d,f,p,g){throw new Error("Method not implemented.")}}class ni extends bd{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}let R_=(()=>{class t extends bd{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}return t.DOM_DELTA_PIXEL=0,t.DOM_DELTA_LINE=1,t.DOM_DELTA_PAGE=2,t})();const T8=new gt,N_=new gt;class D8{constructor(e){this.dispatch=new mu,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort((r,i)=>r.priority-i.priority)}dispatchEvent(e,n){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n),this.dispatch.emit(n||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const n=this.mappingTable[e.type];if(n)for(let r=0,i=n.length;r<i;r++)n[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,n){Os.pauseUpdate=!0;const s=this[this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive"](this.rootTarget,this.rootTarget.eventMode,T8.set(e,n),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,n){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=r.length-1;i<s;i++)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(let i=r.length-2;i>=0;i--)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,n,r=this._allInteractiveElements){if(0===r.length)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(n)?n:[n];for(let s=r.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=r[s],this.notifyTarget(e,o)})}propagationPath(e){const n=[e];for(let r=0;r<2048&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");n.push(e.parent),e=e.parent}return n.reverse(),n}hitTestMoveRecursive(e,n,r,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if(("dynamic"===e.eventMode||"dynamic"===n)&&(Os.pauseUpdate=!1),e.interactiveChildren&&e.children){const c=e.children;for(let h=c.length-1;h>=0;h--){const d=c[h],f=this.hitTestMoveRecursive(d,this._isInteractive(n)?n:d.eventMode,r,i,s,o||s(e,r));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),0===this._hitElements.length&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(n),u=e.isInteractive();return u&&u&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,r)&&i(e,r)?u?[e]:[]:null}hitTestRecursive(e,n,r,i,s){if(this._interactivePrune(e)||s(e,r))return null;if(("dynamic"===e.eventMode||"dynamic"===n)&&(Os.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let u=l.length-1;u>=0;u--){const c=l[u],h=this.hitTestRecursive(c,this._isInteractive(n)?n:c.eventMode,r,i,s);if(h){if(h.length>0&&!h[h.length-1].parent)continue;const d=e.isInteractive();return(h.length>0||d)&&h.push(e),h}}}const o=this._isInteractive(n),a=e.isInteractive();return o&&i(e,r)?a?[e]:[]:null}_isInteractive(e){return"static"===e||"dynamic"===e}_interactivePrune(e){return!(e&&!e.isMask&&e.visible&&e.renderable&&"none"!==e.eventMode&&("passive"!==e.eventMode||e.interactiveChildren)&&!e.isMask)}hitPruneFn(e,n){if(e.hitArea&&(e.worldTransform.applyInverse(n,N_),!e.hitArea.contains(N_.x,N_.y)))return!0;if(e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;if(r&&!r.containsPoint?.(n))return!0}return!1}hitTestFn(e,n){return"passive"!==e.eventMode&&(!!e.hitArea||!!e.containsPoint&&e.containsPoint(n))}notifyTarget(e,n){const r=`on${n=n??e.type}`;e.currentTarget[r]?.(e),this.notifyListeners(e,e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${n}capture`:n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)}mapPointerDown(e){if(!(e instanceof ni))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=this.createPointerEvent(e);this.dispatchEvent(n,"pointerdown"),"touch"===n.pointerType?this.dispatchEvent(n,"touchstart"):"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.dispatchEvent(n,2===n.button?"rightdown":"mousedown"),this.trackingData(e.pointerId).pressTargetsByButton[e.button]=n.composedPath(),this.freeEvent(n)}mapPointerMove(e){if(!(e instanceof ni))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const n=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r="mouse"===n.pointerType||"pen"===n.pointerType,i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(i.overTargets?.length>0&&s!==n.target){const u=this.createPointerEvent(e,"mousemove"===e.type?"mouseout":"pointerout",s);if(this.dispatchEvent(u,"pointerout"),r&&this.dispatchEvent(u,"mouseout"),!n.composedPath().includes(s)){const c=this.createPointerEvent(e,"pointerleave",s);for(c.eventPhase=c.AT_TARGET;c.target&&!n.composedPath().includes(c.target);)c.currentTarget=c.target,this.notifyTarget(c),r&&this.notifyTarget(c,"mouseleave"),c.target=c.target.parent;this.freeEvent(c)}this.freeEvent(u)}if(s!==n.target){const u=this.clonePointerEvent(n,"mousemove"===e.type?"mouseover":"pointerover");this.dispatchEvent(u,"pointerover"),r&&this.dispatchEvent(u,"mouseover");let c=s?.parent;for(;c&&c!==this.rootTarget.parent&&c!==n.target;)c=c.parent;if(!c||c===this.rootTarget.parent){const d=this.clonePointerEvent(n,"pointerenter");for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==s&&d.target!==this.rootTarget.parent;)d.currentTarget=d.target,this.notifyTarget(d),r&&this.notifyTarget(d,"mouseenter"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(u)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(n,"pointermove"),a&&o.push("globalpointermove"),"touch"===n.pointerType&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(n,"touchmove"),a&&o.push("globaltouchmove")),r&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(n,"mousemove"),a&&o.push("globalmousemove"),this.cursor=n.target?.cursor),o.length>0&&this.all(n,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=n.composedPath(),this.freeEvent(n)}mapPointerOver(e){if(!(e instanceof ni))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=this.trackingData(e.pointerId),r=this.createPointerEvent(e),i="mouse"===r.pointerType||"pen"===r.pointerType;this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(this.cursor=r.target?.cursor);const s=this.clonePointerEvent(r,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;n.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof ni))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=this.trackingData(e.pointerId);if(n.overTargets){const r="mouse"===e.pointerType||"pen"===e.pointerType,i=this.findMountedTarget(n.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;n.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof ni))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=performance.now(),r=this.createPointerEvent(e);this.dispatchEvent(r,"pointerup"),"touch"===r.pointerType?this.dispatchEvent(r,"touchend"):"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.dispatchEvent(r,2===r.button?"rightup":"mouseup");const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!r.composedPath().includes(s)){let a=s;for(;a&&!r.composedPath().includes(a);)r.currentTarget=a,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType?this.notifyTarget(r,"touchendoutside"):"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.notifyTarget(r,2===r.button?"rightupoutside":"mouseupoutside"),a=a.parent;delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(r,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:n});const l=i.clicksByButton[e.button];l.target===a.target&&n-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=n,a.detail=l.clickCount,"mouse"===a.pointerType?this.dispatchEvent(a,2===a.button?"rightclick":"click"):"touch"===a.pointerType&&this.dispatchEvent(a,"tap"),this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof ni))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=this.trackingData(e.pointerId),r=this.findMountedTarget(n.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(r){let s=r;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType?this.notifyTarget(i,"touchendoutside"):("mouse"===i.pointerType||"pen"===i.pointerType)&&this.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),s=s.parent;delete n.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof R_))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const n=this.createWheelEvent(e);this.dispatchEvent(n),this.freeEvent(n)}findMountedTarget(e){if(!e)return null;let n=e[0];for(let r=1;r<e.length&&e[r].parent===n;r++)n=e[r];return n}createPointerEvent(e,n,r){const i=this.allocateEvent(ni);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=r??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],"string"==typeof n&&(i.type=n),i}createWheelEvent(e){const n=this.allocateEvent(R_);return this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=this.hitTest(n.global.x,n.global.y),n}clonePointerEvent(e,n){const r=this.allocateEvent(ni);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=n??r.type,r}copyWheelData(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ}copyPointerData(e,n){e instanceof ni&&n instanceof ni&&(n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist)}copyMouseData(e,n){e instanceof bd&&n instanceof bd&&(n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.client.copyFrom(e.client),n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.movement.copyFrom(e.movement),n.screen.copyFrom(e.screen),n.shiftKey=e.shiftKey,n.global.copyFrom(e.global))}copyData(e,n){n.isTrusted=e.isTrusted,n.srcElement=e.srcElement,n.timeStamp=performance.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.which=e.which,n.layer.copyFrom(e.layer),n.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=null,n.target=null,n}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)}notifyListeners(e,n){const r=e.currentTarget._events[n];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(n,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let i=0,s=r.length;i<s&&!e.propagationImmediatelyStopped;i++)r[i].once&&e.currentTarget.removeListener(n,r[i].fn,void 0,!0),r[i].fn.call(r[i].context,e)}}const S8={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},O_=class{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new D8(null),Os.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new ni(null),this.rootWheelEvent=new R_(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...O_.defaultEventFeatures},{set:(e,n,r)=>("globalMove"===n&&(this.rootBoundary.enableGlobalMoveEvents=r),e[n]=r,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:n}=this.renderer;this.setTargetElement(e),this.resolution=n,O_._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const n=this.cursorStyles[t];if(n)switch(typeof n){case"string":e&&(this.domElement.style.cursor=n);break;case"function":n(t);break;case"object":e&&Object.assign(this.domElement.style,n)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType))return;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let n=0,r=e.length;n<r;n++){const s=this.bootstrapEvent(this.rootPointerEvent,e[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType))return;Os.pointerMoved();const e=this.normalizeToPointerData(t);for(let n=0,r=e.length;n<r;n++){const i=this.bootstrapEvent(this.rootPointerEvent,e[n]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType))return;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const n=e!==this.domElement?"outside":"",r=this.normalizeToPointerData(t);for(let i=0,s=r.length;i<s;i++){const o=this.bootstrapEvent(this.rootPointerEvent,r[i]);o.type+=n,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType))return;const e=this.normalizeToPointerData(t);for(let n=0,r=e.length;n<r;n++){const i=this.bootstrapEvent(this.rootPointerEvent,e[n]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,Os.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Os.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Os.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,n){let r;r=this.domElement.parentElement?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const i=1/this.resolution;t.x=this.domElement.width/r.width*(e-r.left)*i,t.y=this.domElement.height/r.height*(n-r.top)*i}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let n=0,r=t.changedTouches.length;n<r;n++){const i=t.changedTouches[n];typeof i.button>"u"&&(i.button=0),typeof i.buttons>"u"&&(i.buttons=1),typeof i.isPrimary>"u"&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),typeof i.width>"u"&&(i.width=i.radiusX||1),typeof i.height>"u"&&(i.height=i.radiusY||1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="touch"),typeof i.pointerId>"u"&&(i.pointerId=i.identifier||0),typeof i.pressure>"u"&&(i.pressure=i.force||.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),typeof i.layerX>"u"&&(i.layerX=i.offsetX=i.clientX),typeof i.layerY>"u"&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,i.type=t.type,e.push(i)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&!(this.supportsPointerEvents&&t instanceof globalThis.PointerEvent)){const n=t;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=1),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,e.push(n)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=S8[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};let Iu=O_;function eS(t){return"dynamic"===t||"static"===t}Iu.extension={name:"events",type:[xe.RendererSystem,xe.CanvasRendererSystem]},Iu.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0},Fe.add(Iu);const I8={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??eS(Iu.defaultEventMode)},set interactive(t){et("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Iu.defaultEventMode},set eventMode(t){this._internalInteractive=eS(t),this._internalEventMode=t},isInteractive(){return"static"===this.eventMode||"dynamic"===this.eventMode},interactiveChildren:!0,hitArea:null,addEventListener(t,e,n){const i="function"==typeof e?void 0:e;this.on(t="boolean"==typeof n&&n||"object"==typeof n&&n.capture?`${t}capture`:t,e="function"==typeof e?e:e.handleEvent,i)},removeEventListener(t,e,n){const i="function"==typeof e?void 0:e;this.off(t="boolean"==typeof n&&n||"object"==typeof n&&n.capture?`${t}capture`:t,e="function"==typeof e?e:e.handleEvent,i)},dispatchEvent(t){if(!(t instanceof Su))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};jt.mixin(I8),jt.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});class rS{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Mr.tablet||Mr.phone)&&this.createTouchHook();const n=document.createElement("div");n.style.width="100px",n.style.height="100px",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex=2..toString(),this.div=n,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const n=e.children;if(n)for(let r=0;r<n.length;r++)this.updateAccessibleObjects(n[r])}update(){const e=performance.now();if(Mr.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:n,y:r,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=i/o*l,c=s/a*l;let h=this.div;h.style.left=`${n}px`,h.style.top=`${r}px`,h.style.width=`${o}px`,h.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,Va(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{h=f._accessibleDiv;let p=f.hitArea;const g=f.worldTransform;f.hitArea?(h.style.left=(g.tx+p.x*g.a)*u+"px",h.style.top=(g.ty+p.y*g.d)*c+"px",h.style.width=p.width*g.a*u+"px",h.style.height=p.height*g.d*c+"px"):(p=f.getBounds(),this.capHitArea(p),h.style.left=p.x*u+"px",h.style.top=p.y*c+"px",h.style.width=p.width*u+"px",h.style.height=p.height*c+"px",h.title!==f.accessibleTitle&&null!==f.accessibleTitle&&(h.title=f.accessibleTitle),h.getAttribute("aria-label")!==f.accessibleHint&&null!==f.accessibleHint&&h.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==h.title||f.tabIndex!==h.tabIndex)&&(h.title=f.accessibleTitle,h.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(h))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:n,height:r}=this.renderer;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let n=this.pool.pop();n||(n=document.createElement("button"),n.style.width="100px",n.style.height="100px",n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=2..toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=e.accessiblePointerEvents,n.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?n.title=e.accessibleTitle:(!e.accessibleHint||null===e.accessibleHint)&&(n.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&null!==e.accessibleHint&&n.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(n),e._accessibleActive=!0,e._accessibleDiv=n,n.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,n){const{displayObject:r}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new Su(i),{target:r});i.rootTarget=this.renderer.lastObjectRendered,n.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){9===e.keyCode&&this.activate()}_onMouseMove(e){0===e.movementX&&0===e.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}rS.extension={name:"accessibility",type:[xe.RendererPlugin,xe.CanvasRendererPlugin]},Fe.add(rS);const F_=class{constructor(t){this.stage=new Sn,t=Object.assign({forceCanvas:!1},t),this.renderer=function XH(t){for(const e of zC)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}(t),F_._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const n=F_._plugins.slice(0);n.reverse(),n.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let L_=F_;L_._plugins=[],Fe.handleByList(xe.Application,L_._plugins);class iS{static init(e){Object.defineProperty(this,"resizeTo",{set(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let n,r;if(this.cancelResize(),this._resizeTo===globalThis.window)n=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;n=i,r=s}this.renderer.resize(n,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}iS.extension=xe.Application,Fe.add(iS);const sS={loader:xe.LoadParser,resolver:xe.ResolveParser,cache:xe.CacheParser,detection:xe.DetectionParser};Fe.handle(xe.Asset,t=>{const e=t.ref;Object.entries(sS).filter(([n])=>!!e[n]).forEach(([n,r])=>Fe.add(Object.assign(e[n],{extension:e[n].extension??r})))},t=>{const e=t.ref;Object.keys(sS).filter(n=>!!e[n]).forEach(n=>Fe.remove(e[n]))});class L8{constructor(e,n=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(e){e.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}_next(){var e=this;return(0,De.Z)(function*(){if(e._assetList.length&&e._isActive){e._isLoading=!0;const n=[],r=Math.min(e._assetList.length,e._maxConcurrent);for(let i=0;i<r;i++)n.push(e._assetList.pop());yield e._loader.load(n),e._isLoading=!1,e._next()}})()}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function _o(t,e){const n=t.split("?")[0],r=Cn.extname(n).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const os=(t,e)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>"string"==typeof n?e(n):n):t),Au=new class k8{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const n=this._cache.get(e);return n||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),n}set(e,n){const r=os(e);let i;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(n)){i=l.getCacheableAssets(r,n);break}}i||(i={},r.forEach(a=>{i[a]=n}));const s=Object.keys(i),o={cacheKeys:s,keys:r};if(r.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==n&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),n instanceof be){const a=n;r.forEach(l=>{a.baseTexture!==be.EMPTY.baseTexture&&Qe.addToCache(a.baseTexture,l),be.addToCache(a,l)})}}remove(e){if(this._cacheMap.get(e),!this._cacheMap.has(e))return void console.warn(`[Assets] Asset id ${e} was not found in the Cache`);const n=this._cacheMap.get(e);n.cacheKeys.forEach(i=>{this._cache.delete(i)}),n.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}},Td=t=>!Array.isArray(t);class B8{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,n,r)=>(this._parsersValidated=!1,e[n]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,n){var r=this;const i={promise:null,parser:null};return i.promise=(0,De.Z)(function*(){let s=null,o=null;if(n.loadParser&&(o=r._parserHash[n.loadParser],o||console.warn(`[Assets] specified load parser "${n.loadParser}" not found while loading ${e}`)),!o){for(let a=0;a<r.parsers.length;a++){const l=r.parsers[a];if(l.load&&l.test?.(e,n,r)){o=l;break}}if(!o)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=yield o.load(e,n,r),i.parser=o;for(let a=0;a<r.parsers.length;a++){const l=r.parsers[a];l.parse&&l.parse&&(yield l.testParse?.(s,n,r))&&(s=(yield l.parse(s,n,r))||s,i.parser=l)}return s})(),i}load(e,n){var r=this;return(0,De.Z)(function*(){r._parsersValidated||r._validateParsers();let i=0;const s={},o=Td(e),a=os(e,c=>({src:c})),l=a.length,u=a.map(function(){var c=(0,De.Z)(function*(h){const d=Cn.toAbsolute(h.src);if(!s[h.src])try{r.promiseCache[d]||(r.promiseCache[d]=r._getLoadPromiseAndParser(d,h)),s[h.src]=yield r.promiseCache[d].promise,n&&n(++i/l)}catch(f){throw delete r.promiseCache[d],delete s[h.src],new Error(`[Loader.load] Failed to load ${d}.\n${f}`)}});return function(h){return c.apply(this,arguments)}}());return yield Promise.all(u),o?s[a[0].src]:s})()}unload(e){var n=this;return(0,De.Z)(function*(){const i=os(e,s=>({src:s})).map(function(){var s=(0,De.Z)(function*(o){const a=Cn.toAbsolute(o.src),l=n.promiseCache[a];if(l){const u=yield l.promise;l.parser?.unload?.(u,o,n),delete n.promiseCache[a]}});return function(o){return s.apply(this,arguments)}}());yield Promise.all(i)})()}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,n)=>(e[n.name]&&console.warn(`[Assets] loadParser name conflict "${n.name}"`),{...e,[n.name]:n}),{})}}var Ii=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(Ii||{});function Mu(t,e){if(Array.isArray(e)){for(const n of e)if(t.startsWith(`data:${n}`))return!0;return!1}return t.startsWith(`data:${e}`)}const V8={extension:{type:xe.LoadParser,priority:Ii.Low},name:"loadJson",test:t=>Mu(t,"application/json")||_o(t,".json"),load:t=>(0,De.Z)(function*(){return yield(yield _e.ADAPTER.fetch(t)).json()})()};Fe.add(V8);const $8={name:"loadTxt",extension:{type:xe.LoadParser,priority:Ii.Low},test:t=>Mu(t,"text/plain")||_o(t,".txt"),load:t=>(0,De.Z)(function*(){return yield(yield _e.ADAPTER.fetch(t)).text()})()};Fe.add($8);const z8=["normal","bold","100","200","300","400","500","600","700","800","900"],W8=[".ttf",".otf",".woff",".woff2"],X8=["font/ttf","font/otf","font/woff","font/woff2"],Y8=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i,Z8={extension:{type:xe.LoadParser,priority:Ii.Low},name:"loadWebFont",test:t=>Mu(t,X8)||_o(t,W8),load:(t,e)=>(0,De.Z)(function*(){const n=_e.ADAPTER.getFontFaceSet();if(n){const r=[],i=e.data?.family??function q8(t){const e=Cn.extname(t),i=Cn.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let s=i.length>0;for(const a of i)if(!a.match(Y8)){s=!1;break}let o=i.join(" ");return s||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}(t),s=e.data?.weights?.filter(a=>z8.includes(a))??["normal"],o=e.data??{};for(let a=0;a<s.length;a++){const l=s[a],u=new FontFace(i,`url(${encodeURI(t)})`,{...o,weight:l});yield u.load(),n.add(u),r.push(u)}return 1===r.length?r[0]:r}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null})(),unload(t){(Array.isArray(t)?t:[t]).forEach(e=>_e.ADAPTER.getFontFaceSet().delete(e))}};Fe.add(Z8);let k_,oS=0;const K8_code="\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    ",Q8_code="\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };";let B_;const aS=new class J8{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise(e=>{const n=URL.createObjectURL(new Blob([K8_code],{type:"application/javascript"})),r=new Worker(n);r.addEventListener("message",i=>{r.terminate(),URL.revokeObjectURL(n),e(i.data)})})),this._isImageBitmapSupported}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}_initWorkers(){var e=this;return(0,De.Z)(function*(){e._initialized||(e._initialized=!0)})()}getWorker(){void 0===k_&&(k_=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<k_&&(B_||(B_=URL.createObjectURL(new Blob([Q8_code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(B_),e.addEventListener("message",n=>{this.complete(n.data),this.returnWorker(n.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){void 0!==e.error?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}_run(e,n){var r=this;return(0,De.Z)(function*(){yield r._initWorkers();const i=new Promise((s,o)=>{r.queue.push({id:e,arguments:n,resolve:s,reject:o})});return r.next(),i})()}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const n=this.queue.pop(),r=n.id;this.resolveHash[oS]={resolve:n.resolve,reject:n.reject},e.postMessage({data:n.arguments,uuid:oS++,id:r})}};function Dd(t,e,n){const r=new be(t);return r.baseTexture.on("dispose",()=>{delete e.promiseCache[n]}),r}const eV=[".jpeg",".jpg",".png",".webp",".avif"],tV=["image/jpeg","image/png","image/webp","image/avif"];function U_(){return(U_=(0,De.Z)(function*(t){const e=yield _e.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const n=yield e.blob();return yield createImageBitmap(n)})).apply(this,arguments)}const Cd={name:"loadTextures",extension:{type:xe.LoadParser,priority:Ii.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:t=>Mu(t,tV)||_o(t,eV),load(t,e,n){var r=this;return(0,De.Z)(function*(){let i=null;i=globalThis.createImageBitmap&&r.config.preferCreateImageBitmap?r.config.preferWorkers&&(yield aS.isImageBitmapSupported())?yield aS.loadImageBitmap(t):yield function nV(t){return U_.apply(this,arguments)}(t):yield new Promise(o=>{i=new Image,i.crossOrigin=r.config.crossOrigin,i.src=t,i.complete?o(i):i.onload=()=>{o(i)}});const s=new Qe(i,{resolution:As(t),...e.data});return s.resource.src=t,Dd(s,n,t)})()},unload(t){t.destroy(!0)}};Fe.add(Cd);const sV={extension:{type:xe.LoadParser,priority:Ii.High},name:"loadSVG",test:t=>Mu(t,"image/svg+xml")||_o(t,".svg"),testParse:t=>(0,De.Z)(function*(){return Du.test(t)})(),parse:(t,e,n)=>(0,De.Z)(function*(){const r=new Du(t,e?.data?.resourceOptions);yield r.load();const i=new Qe(r,{resolution:As(t),...e?.data});return i.resource.src=t,Dd(i,n,t)})(),load:(t,e)=>(0,De.Z)(function*(){return(yield _e.ADAPTER.fetch(t)).text()})(),unload:Cd.unload};function lS(t,e,n,r,i){const s=e[n];for(let o=0;o<s.length;o++){const a=s[o];n<e.length-1?lS(t.replace(r[n],a),e,n+1,r,i):i.push(t.replace(r[n],a))}}function oV(t){const n=t.match(/\{(.*?)\}/g),r=[];if(n){const i=[];n.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),lS(t,i,0,n,r)}else r.push(t);return r}Fe.add(sV);class aV{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,n)=>`${e}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(e,n)=>n.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if("string"==typeof e)this._defaultSearchParams=e;else{const n=e;this._defaultSearchParams=Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&")}}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(e,n){const r=[];Array.isArray(n)?n.forEach(i=>{if("string"==typeof i.name){const s=this._createBundleAssetId(e,i.name);r.push(s),this.add([i.name,s],i.srcs,i.data)}else{const s=i.name.map(o=>this._createBundleAssetId(e,o));s.forEach(o=>{r.push(o)}),this.add([...i.name,...s],i.srcs)}}):Object.keys(n).forEach(i=>{r.push(this._createBundleAssetId(e,i)),this.add([i,this._createBundleAssetId(e,i)],n[i])}),this._bundles[e]=r}add(e,n,r){const i=os(e);i.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(n)||(n="string"==typeof n?oV(n):[n]);const s=n.map(o=>{let a=o;if("string"==typeof o){let l=!1;for(let u=0;u<this._parsers.length;u++){const c=this._parsers[u];if(c.test(o)){a=c.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=i),(this._basePath||this._rootPath)&&(a.src=Cn.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??r,a});i.forEach(o=>{this._assetMap[o]=s})}resolveBundle(e){const n=Td(e);e=os(e);const r={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const l in o){const u=o[l];a[this._extractAssetIdFromBundle(i,l)]=u}r[i]=a}}),n?r[e[0]]:r}resolveUrl(e){const n=this.resolve(e);if("string"!=typeof e){const r={};for(const i in n)r[i]=n[i].src;return r}return n.src}resolve(e){const n=Td(e);e=os(e);const r={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=this._getPreferredOrder(s),a=s[0];o?.priority.forEach(l=>{o.params[l].forEach(u=>{const c=s.filter(h=>!!h[l]&&h[l]===u);c.length&&(s=c)})}),this._resolverHash[i]=s[0]??a}else{let s=i;(this._basePath||this._rootPath)&&(s=Cn.toAbsolute(s,this._basePath,this._rootPath)),s=this._appendDefaultSearchParams(s),this._resolverHash[i]={src:s}}r[i]=this._resolverHash[i]}),n?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let n=0;n<e.length;n++){const r=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(r.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){return this._defaultSearchParams?`${e}${/\?/.test(e)?"&":"?"}${this._defaultSearchParams}`:e}}const as=new class lV{constructor(){this._detections=[],this._initialized=!1,this.resolver=new aV,this.loader=new B8,this.cache=Au,this._backgroundLoader=new L8(this.loader),this._backgroundLoader.active=!0,this.reset()}init(e={}){var n=this;return(0,De.Z)(function*(){if(n._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");if(n._initialized=!0,e.defaultSearchParams&&n.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(n.resolver.basePath=e.basePath),e.bundleIdentifier&&n.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let o=e.manifest;"string"==typeof o&&(o=yield n.load(o)),n.resolver.addManifest(o)}const r=e.texturePreference?.resolution??1,i="number"==typeof r?[r]:r;let s=[];if(e.texturePreference?.format){const o=e.texturePreference?.format;s="string"==typeof o?[o]:o;for(const a of n._detections)(yield a.test())||(s=yield a.remove(s))}else for(const o of n._detections)(yield o.test())&&(s=yield o.add(s));n.resolver.prefer({params:{format:s,resolution:i}}),e.preferences&&n.setPreferences(e.preferences)})()}add(e,n,r){this.resolver.add(e,n,r)}load(e,n){var r=this;return(0,De.Z)(function*(){r._initialized||(yield r.init());const i=Td(e),s=os(e).map(l=>"string"!=typeof l?(r.resolver.add(l.src,l),l.src):(r.resolver.hasKey(l)||r.resolver.add(l,l),l)),o=r.resolver.resolve(s),a=yield r._mapLoadToResolve(o,n);return i?a[s[0]]:a})()}addBundle(e,n){this.resolver.addBundle(e,n)}loadBundle(e,n){var r=this;return(0,De.Z)(function*(){r._initialized||(yield r.init());let i=!1;"string"==typeof e&&(i=!0,e=[e]);const s=r.resolver.resolveBundle(e),o={},a=Object.keys(s);let l=0,u=0;const c=()=>{n?.(++l/u)},h=a.map(d=>{const f=s[d];return u+=Object.keys(f).length,r._mapLoadToResolve(f,c).then(p=>{o[d]=p})});return yield Promise.all(h),i?o[e[0]]:o})()}backgroundLoad(e){var n=this;return(0,De.Z)(function*(){n._initialized||(yield n.init()),"string"==typeof e&&(e=[e]);const r=n.resolver.resolve(e);n._backgroundLoader.add(Object.values(r))})()}backgroundLoadBundle(e){var n=this;return(0,De.Z)(function*(){n._initialized||(yield n.init()),"string"==typeof e&&(e=[e]);const r=n.resolver.resolveBundle(e);Object.values(r).forEach(i=>{n._backgroundLoader.add(Object.values(i))})})()}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if("string"==typeof e)return Au.get(e);const n={};for(let r=0;r<e.length;r++)n[r]=Au.get(e[r]);return n}_mapLoadToResolve(e,n){var r=this;return(0,De.Z)(function*(){const i=Object.values(e),s=Object.keys(e);r._backgroundLoader.active=!1;const o=yield r.loader.load(i,n);r._backgroundLoader.active=!0;const a={};return i.forEach((l,u)=>{const c=o[l.src],h=[l.src];l.alias&&h.push(...l.alias),a[s[u]]=c,Au.set(h,c)}),a})()}unload(e){var n=this;return(0,De.Z)(function*(){n._initialized||(yield n.init());const r=os(e).map(s=>"string"!=typeof s?s.src:s),i=n.resolver.resolve(r);yield n._unloadFromResolved(i)})()}unloadBundle(e){var n=this;return(0,De.Z)(function*(){n._initialized||(yield n.init()),e=os(e);const r=n.resolver.resolveBundle(e),i=Object.keys(r).map(s=>n._unloadFromResolved(r[s]));yield Promise.all(i)})()}_unloadFromResolved(e){var n=this;return(0,De.Z)(function*(){const r=Object.values(e);r.forEach(i=>{Au.remove(i.src)}),yield n.loader.unload(r)})()}get detections(){return this._detections}get preferWorkers(){return Cd.config.preferWorkers}set preferWorkers(e){et("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(r=>r in e).forEach(r=>{n.config[r]=e[r]})})}};Fe.handleByList(xe.LoadParser,as.loader.parsers).handleByList(xe.ResolveParser,as.resolver.parsers).handleByList(xe.CacheParser,as.cache.parsers).handleByList(xe.DetectionParser,as.detections);const uV={extension:xe.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof be),getCacheableAssets:(t,e)=>{const n={};return t.forEach(r=>{e.forEach((i,s)=>{n[r+(0===s?"":s+1)]=i})}),n}};Fe.add(uV);const cV={extension:{type:xe.DetectionParser,priority:1},test:(t=(0,De.Z)(function*(){if(!globalThis.createImageBitmap)return!1;const n=yield _e.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then(r=>r.blob());return createImageBitmap(n).then(()=>!0,()=>!1)}),function(){return t.apply(this,arguments)}),add:function(){var t=(0,De.Z)(function*(e){return[...e,"avif"]});return function(n){return t.apply(this,arguments)}}(),remove:function(){var t=(0,De.Z)(function*(e){return e.filter(n=>"avif"!==n)});return function(n){return t.apply(this,arguments)}}()};var t;Fe.add(cV);const hV={extension:{type:xe.DetectionParser,priority:0},test:function(){var t=(0,De.Z)(function*(){if(!globalThis.createImageBitmap)return!1;const n=yield _e.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then(r=>r.blob());return createImageBitmap(n).then(()=>!0,()=>!1)});return function(){return t.apply(this,arguments)}}(),add:function(){var t=(0,De.Z)(function*(e){return[...e,"webp"]});return function(n){return t.apply(this,arguments)}}(),remove:function(){var t=(0,De.Z)(function*(e){return e.filter(n=>"webp"!==n)});return function(n){return t.apply(this,arguments)}}()};Fe.add(hV);const uS=["png","jpg","jpeg"],dV={extension:{type:xe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:function(){var t=(0,De.Z)(function*(e){return[...e,...uS]});return function(n){return t.apply(this,arguments)}}(),remove:function(){var t=(0,De.Z)(function*(e){return e.filter(n=>!uS.includes(n))});return function(n){return t.apply(this,arguments)}}()};Fe.add(dV);const fV={extension:xe.ResolveParser,test:Cd.test,parse:t=>({resolution:parseFloat(_e.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})};Fe.add(fV);const H_=(t,e)=>{const n=e.split("?")[1];return n&&(t+=`?${n}`),t};var mr=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t))(mr||{});const Sd={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let ls,Ya;function cS(){Ya={s3tc:ls.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:ls.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:ls.getExtension("WEBGL_compressed_texture_etc"),etc1:ls.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:ls.getExtension("WEBGL_compressed_texture_pvrtc")||ls.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:ls.getExtension("WEBGL_compressed_texture_atc"),astc:ls.getExtension("WEBGL_compressed_texture_astc")}}const pV={extension:{type:xe.DetectionParser,priority:2},test:function(){var t=(0,De.Z)(function*(){const n=_e.ADAPTER.createCanvas().getContext("webgl");return n?(ls=n,!0):(console.warn("WebGL not available for compressed textures."),!1)});return function(){return t.apply(this,arguments)}}(),add:function(){var t=(0,De.Z)(function*(e){Ya||cS();const n=[];for(const r in Ya)Ya[r]&&n.push(r);return[...n,...e]});return function(n){return t.apply(this,arguments)}}(),remove:function(){var t=(0,De.Z)(function*(e){return Ya||cS(),e.filter(n=>!(n in Ya))});return function(n){return t.apply(this,arguments)}}()};Fe.add(pV);class gV extends wu{constructor(e,n={width:1,height:1,autoLoad:!0}){let r,i;"string"==typeof e?(r=e,i=new Uint8Array):(r=null,i=e),super(i,n),this.origin=r,this.buffer=i?new i_(i):null,this._load=null,this.loaded=!1,null!==this.origin&&!1!==n.autoLoad&&this.load(),null===this.origin&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load||(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new i_(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this))),this._load}}class yo extends gV{constructor(e,n){super(e,n),this.format=n.format,this.levels=n.levels||1,this._width=n.width,this._height=n.height,this._extension=yo._formatToExtension(this.format),(n.levelBuffers||this.buffer)&&(this._levelBuffers=n.levelBuffers||yo._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,n,r){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:u,levelHeight:c,levelBuffer:h}=this._levelBuffers[o];i.compressedTexImage2D(i.TEXTURE_2D,l,this.format,u,c,0,h)}return!0}onBlobLoaded(){this._levelBuffers=yo._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,n,r,i,s,o,a){const l=new Array(r);let u=e.byteOffset,c=o,h=a,d=c+i-1&~(i-1),f=h+s-1&~(s-1),p=d*f*Sd[n];for(let g=0;g<r;g++)l[g]={levelID:g,levelWidth:r>1?c:d,levelHeight:r>1?h:f,levelBuffer:new Uint8Array(e.buffer,u,p)},u+=p,c=c>>1||1,h=h>>1||1,d=c+i-1&~(i-1),f=h+s-1&~(s-1),p=d*f*Sd[n];return l}}const RV={827611204:mr.COMPRESSED_RGBA_S3TC_DXT1_EXT,861165636:mr.COMPRESSED_RGBA_S3TC_DXT3_EXT,894720068:mr.COMPRESSED_RGBA_S3TC_DXT5_EXT},NV={70:mr.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:mr.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:mr.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:mr.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:mr.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:mr.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:mr.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:mr.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:mr.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT},dS=[171,75,84,88,32,49,49,187,13,10,26,10],fS={[ke.UNSIGNED_BYTE]:1,[ke.UNSIGNED_SHORT]:2,[ke.INT]:4,[ke.UNSIGNED_INT]:4,[ke.FLOAT]:4,[ke.HALF_FLOAT]:8},LV={[fe.RGBA]:4,[fe.RGB]:3,[fe.RG]:2,[fe.RED]:1,[fe.LUMINANCE]:1,[fe.LUMINANCE_ALPHA]:2,[fe.ALPHA]:1},kV={[ke.UNSIGNED_SHORT_4_4_4_4]:2,[ke.UNSIGNED_SHORT_5_5_5_1]:2,[ke.UNSIGNED_SHORT_5_6_5]:2};function HV(t){switch(t){case fe.RGBA:return fe.RGBA_INTEGER;case fe.RGB:return fe.RGB_INTEGER;case fe.RG:return fe.RG_INTEGER;case fe.RED:return fe.RED_INTEGER;default:return t}}const GV={extension:{type:xe.LoadParser,priority:Ii.High},name:"loadDDS",test:t=>_o(t,".dds"),load:(t,e,n)=>(0,De.Z)(function*(){const o=function OV(t){const e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");const r=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),i=r[3],s=r[4],o=r[7],a=new Uint32Array(t,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),l=a[1];if(4&l){const u=a[2];if(808540228!==u){const w=RV[u],M=new Uint8Array(t,128);return[new yo(M,{format:w,width:s,height:i,levels:o})]}const h=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),d=h[0],f=h[1],p=h[2],g=h[3],m=NV[d];if(void 0===m)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(4===p)throw new Error("DDSParser does not support cubemap textures");if(6===f)throw new Error("DDSParser does not supported 3D texture data");const y=new Array,v=148;if(1===g)y.push(new Uint8Array(t,v));else{const w=Sd[m];let E=0,M=s,H=i;for(let F=0;F<o;F++)E+=Math.max(1,M+3&-4)*Math.max(1,H+3&-4)*w,M>>>=1,H>>>=1;let k=v;for(let F=0;F<g;F++)y.push(new Uint8Array(t,k,E)),k+=E}return y.map(w=>new yo(w,{format:m,width:s,height:i,levels:o}))}throw 64&l?new Error("DDSParser does not support uncompressed texture data."):512&l?new Error("DDSParser does not supported YUV uncompressed texture data."):131072&l?new Error("DDSParser does not support single-channel (lumninance) texture data!"):2&l?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}(yield(yield _e.ADAPTER.fetch(t)).arrayBuffer()).map(a=>Dd(new Qe(a,{mipmap:Ei.OFF,alphaMode:Xr.NO_PREMULTIPLIED_ALPHA,resolution:As(t),...e.data}),n,t));return 1===o.length?o[0]:o})(),unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};Fe.add(GV);const jV={extension:{type:xe.LoadParser,priority:Ii.High},name:"loadKTX",test:t=>_o(t,".ktx"),load:(t,e,n)=>(0,De.Z)(function*(){const i=yield(yield _e.ADAPTER.fetch(t)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=function BV(t,e,n=!1){const r=new DataView(e);if(!function UV(t,e){for(let n=0;n<dS.length;n++)if(e.getUint8(n)!==dS[n])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}(t,r))return null;const i=67305985===r.getUint32(12,!0),s=r.getUint32(16,i),o=r.getUint32(24,i),a=r.getUint32(28,i),l=r.getUint32(36,i),u=r.getUint32(40,i)||1,c=r.getUint32(44,i)||1,h=r.getUint32(48,i)||1,d=r.getUint32(52,i),f=r.getUint32(56,i),p=r.getUint32(60,i);if(0===u||1!==c)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==h)throw new Error("WebGL does not support array textures");const y=l+3&-4,v=u+3&-4,w=new Array(h);let M,E=l*u;if(0===s&&(E=y*v),M=0!==s?fS[s]?fS[s]*LV[o]:kV[s]:Sd[a],void 0===M)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const H=n?function VV(t,e,n){const r=new Map;let i=0;for(;i<e;){const s=t.getUint32(64+i,n),o=64+i+4,a=3-(s+3)%4;if(0===s||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&0!==t.getUint8(o+l);l++);if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=(new TextDecoder).decode(new Uint8Array(t.buffer,o,l)),c=new DataView(t.buffer,o+l+1,s-l-1);r.set(u,c),i+=4+s+a}return r}(r,p,i):null;let F=E*M,V=l,W=u,Q=y,Ne=v,Y=64+p;for(let K=0;K<f;K++){const Ue=r.getUint32(Y,i);let Ae=Y+4;for(let Se=0;Se<h;Se++){let tt=w[Se];tt||(tt=w[Se]=new Array(f)),tt[K]={levelID:K,levelWidth:f>1||0!==s?V:Q,levelHeight:f>1||0!==s?W:Ne,levelBuffer:new Uint8Array(e,Ae,F)},Ae+=F}Y+=Ue+4,Y=Y%4!=0?Y+4-Y%4:Y,V=V>>1||1,W=W>>1||1,Q=V+4-1&-4,Ne=W+4-1&-4,F=Q*Ne*M}return 0!==s?{uncompressed:w.map(K=>{let Ue=K[0].levelBuffer,Ae=!1;return s===ke.FLOAT?Ue=new Float32Array(K[0].levelBuffer.buffer,K[0].levelBuffer.byteOffset,K[0].levelBuffer.byteLength/4):s===ke.UNSIGNED_INT?(Ae=!0,Ue=new Uint32Array(K[0].levelBuffer.buffer,K[0].levelBuffer.byteOffset,K[0].levelBuffer.byteLength/4)):s===ke.INT&&(Ae=!0,Ue=new Int32Array(K[0].levelBuffer.buffer,K[0].levelBuffer.byteOffset,K[0].levelBuffer.byteLength/4)),{resource:new wu(Ue,{width:K[0].levelWidth,height:K[0].levelHeight}),type:s,format:Ae?HV(o):o}}),kvData:H}:{compressed:w.map(K=>new yo(null,{format:a,width:l,height:u,levels:f,levelBuffers:K})),kvData:H}}(t,i),l=s??o,u={mipmap:Ei.OFF,alphaMode:Xr.NO_PREMULTIPLIED_ALPHA,resolution:As(t),...e.data},c=l.map(h=>{l===o&&Object.assign(u,{type:h.type,format:h.format});const d=new Qe(h,u);return d.ktxKeyValueData=a,Dd(d,n,t)});return 1===c.length?c[0]:c})(),unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};Fe.add(jV);const $V={extension:xe.ResolveParser,test:t=>{const n=t.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(n)},parse:t=>{if("ktx"===t.split("?")[0].split(".").pop()){const r=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(r.some(i=>t.endsWith(i)))return{resolution:parseFloat(_e.RETINA_PREFIX.exec(t)?.[1]??"1"),format:r.find(i=>t.endsWith(i)),src:t}}return{resolution:parseFloat(_e.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t}}};Fe.add($V);const zV=new ot,Pu=class{constructor(t){this.renderer=t}image(t,e,n){var r=this;return(0,De.Z)(function*(){const i=new Image;return i.src=yield r.base64(t,e,n),i})()}base64(t,e,n){var r=this;return(0,De.Z)(function*(){const i=r.canvas(t);if(void 0!==i.toBlob)return new Promise((s,o)=>{i.toBlob(a=>{if(!a)return void o(new Error("ICanvas.toBlob failed!"));const l=new FileReader;l.onload=()=>s(l.result),l.onerror=o,l.readAsDataURL(a)},e,n)});if(void 0!==i.toDataURL)return i.toDataURL(e,n);if(void 0!==i.convertToBlob){const s=yield i.convertToBlob({type:e,quality:n});return new Promise((o,a)=>{const l=new FileReader;l.onload=()=>o(l.result),l.onerror=a,l.readAsDataURL(s)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")})()}canvas(t,e){const{pixels:n,width:r,height:i,flipY:s}=this._rawPixels(t,e);s&&Pu._flipY(n,r,i),Pu._unpremultiplyAlpha(n);const o=new LU(r,i,1),a=new ImageData(new Uint8ClampedArray(n.buffer),r,i);return o.context.putImageData(a,0,0),o.canvas}pixels(t,e){const{pixels:n,width:r,height:i,flipY:s}=this._rawPixels(t,e);return s&&Pu._flipY(n,r,i),Pu._unpremultiplyAlpha(n),n}_rawPixels(t,e){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let r,s,i=!1,o=!1;if(t&&(t instanceof go?s=t:(s=n.generateTexture(t,{resolution:n.resolution,multisample:n.multisample}),o=!0)),s){if(r=s.baseTexture.resolution,e=e??s.frame,i=!1,!o){n.renderTexture.bind(s);const h=s.framebuffer.glFramebuffers[n.CONTEXT_UID];h.blitFramebuffer&&n.framebuffer.bind(h.blitFramebuffer)}}else r=n.resolution,e||((e=zV).width=n.width/r,e.height=n.height/r),i=!0,n.renderTexture.bind();const a=Math.round(e.width*r),l=Math.round(e.height*r),u=new Uint8Array(4*a*l),c=n.gl;return c.readPixels(Math.round(e.x*r),Math.round(e.y*r),a,l,c.RGBA,c.UNSIGNED_BYTE,u),o&&s?.destroy(!0),{pixels:u,width:a,height:l,flipY:i}}destroy(){this.renderer=null}static _flipY(t,e,n){const r=e<<2,i=n>>1,s=new Uint8Array(r);for(let o=0;o<i;o++){const a=o*r,l=(n-o-1)*r;s.set(t.subarray(a,a+r)),t.copyWithin(a,l,l+r),t.set(s,l)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let n=0;n<e;n+=4){const r=t[n+3];if(0!==r){const i=255.001/r;t[n]=t[n]*i+.5,t[n+1]=t[n+1]*i+.5,t[n+2]=t[n+2]*i+.5}}}};let pS=Pu;pS.extension={name:"extract",type:xe.RendererSystem},Fe.add(pS);const Ru={build(t){const e=t.points;let n,r,i,s,o,a;if(t.type===_n.CIRC){const p=t.shape;n=p.x,r=p.y,o=a=p.radius,i=s=0}else if(t.type===_n.ELIP){const p=t.shape;n=p.x,r=p.y,o=p.width,a=p.height,i=s=0}else{const p=t.shape,g=p.width/2,m=p.height/2;n=p.x+g,r=p.y+m,o=a=Math.max(0,Math.min(p.radius,Math.min(g,m))),i=g-o,s=m-a}if(!(o>=0&&a>=0&&i>=0&&s>=0))return void(e.length=0);const l=Math.ceil(2.3*Math.sqrt(o+a)),u=8*l+(i?4:0)+(s?4:0);if(e.length=u,0===u)return;if(0===l)return e.length=8,e[0]=e[6]=n+i,e[1]=e[3]=r+s,e[2]=e[4]=n-i,void(e[5]=e[7]=r-s);let c=0,h=4*l+(i?2:0)+2,d=h,f=u;{const p=i+o,g=s,m=n+p,y=n-p,v=r+g;if(e[c++]=m,e[c++]=v,e[--h]=v,e[--h]=y,s){const w=r-g;e[d++]=y,e[d++]=w,e[--f]=w,e[--f]=m}}for(let p=1;p<l;p++){const g=Math.PI/2*(p/l),m=i+Math.cos(g)*o,y=s+Math.sin(g)*a,v=n+m,w=n-m,E=r+y,M=r-y;e[c++]=v,e[c++]=E,e[--h]=E,e[--h]=w,e[d++]=w,e[d++]=M,e[--f]=M,e[--f]=v}{const g=s+a,m=n+i,y=n-i,v=r+g,w=r-g;e[c++]=m,e[c++]=v,e[--f]=w,e[--f]=m,i&&(e[c++]=y,e[c++]=v,e[--f]=w,e[--f]=y)}},triangulate(t,e){const n=t.points,r=e.points,i=e.indices;if(0===n.length)return;let s=r.length/2;const o=s;let a,l;if(t.type!==_n.RREC){const c=t.shape;a=c.x,l=c.y}else{const c=t.shape;a=c.x+c.width/2,l=c.y+c.height/2}const u=t.matrix;r.push(t.matrix?u.a*a+u.c*l+u.tx:a,t.matrix?u.b*a+u.d*l+u.ty:l),s++,r.push(n[0],n[1]);for(let c=2;c<n.length;c+=2)r.push(n[c],n[c+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function gS(t,e=!1){const n=t.length;if(n<6)return;let r=0;for(let i=0,s=t[n-2],o=t[n-1];i<n;i+=2){const a=t[i],l=t[i+1];r+=(a-s)*(l+o),s=a,o=l}if(!e&&r>0||e&&r<=0){const i=n/2;for(let s=i+i%2;s<n;s+=2){const o=n-s-2,a=n-s-1,l=s,u=s+1;[t[o],t[l]]=[t[l],t[o]],[t[a],t[u]]=[t[u],t[a]]}}}const j_={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let n=t.points;const r=t.holes,i=e.points,s=e.indices;if(n.length>=6){gS(n,!1);const o=[];for(let u=0;u<r.length;u++){const c=r[u];gS(c.points,!0),o.push(n.length/2),n=n.concat(c.points)}const a=gU(n,o,2);if(!a)return;const l=i.length/2;for(let u=0;u<a.length;u+=3)s.push(a[u]+l),s.push(a[u+1]+l),s.push(a[u+2]+l);for(let u=0;u<n.length;u++)i.push(n[u])}}},mS={build(t){const e=t.shape,n=e.x,r=e.y,i=e.width,s=e.height,o=t.points;o.length=0,i>=0&&s>=0&&o.push(n,r,n+i,r,n+i,r+s,n,r+s)},triangulate(t,e){const n=t.points,r=e.points;if(0===n.length)return;const i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},_S={build(t){Ru.build(t)},triangulate(t,e){Ru.triangulate(t,e)}};var ii=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(ii||{}),vo=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(vo||{});const qa={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}};class $_{static curveTo(e,n,r,i,s,o){const u=o[o.length-1]-n,c=o[o.length-2]-e,h=i-n,d=r-e,f=Math.abs(u*d-c*h);if(f<1e-8||0===s)return(o[o.length-2]!==e||o[o.length-1]!==n)&&o.push(e,n),null;const p=u*u+c*c,g=h*h+d*d,m=u*h+c*d,y=s*Math.sqrt(p)/f,v=s*Math.sqrt(g)/f,w=y*m/p,E=v*m/g,M=y*d+v*c,H=y*h+v*u,V=d*(y+E),W=h*(y+E);return{cx:M+e,cy:H+n,radius:s,startAngle:Math.atan2(u*(v+w)-H,c*(v+w)-M),endAngle:Math.atan2(W-H,V-M),anticlockwise:c*h>d*u}}static arc(e,n,r,i,s,o,a,l,u){const c=a-o,h=qa._segmentsCount(Math.abs(c)*s,40*Math.ceil(Math.abs(c)/nd)),d=c/(2*h),f=2*d,p=Math.cos(d),g=Math.sin(d),m=h-1,y=m%1/m;for(let v=0;v<=m;++v){const E=d+o+f*(v+y*v),M=Math.cos(E),H=-Math.sin(E);u.push((p*M+g*H)*s+r,(p*-H+g*M)*s+i)}}}class Pd{static curveLength(e,n,r,i,s,o,a,l){let c=0,h=0,d=0,f=0,p=0,g=0,m=0,y=0,v=0,w=0,E=0,M=e,H=n;for(let k=1;k<=10;++k)h=k/10,d=h*h,f=d*h,p=1-h,g=p*p,m=g*p,y=m*e+3*g*h*r+3*p*d*s+f*a,v=m*n+3*g*h*i+3*p*d*o+f*l,w=M-y,E=H-v,M=y,H=v,c+=Math.sqrt(w*w+E*E);return c}static curveTo(e,n,r,i,s,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const c=qa._segmentsCount(Pd.curveLength(l,u,e,n,r,i,s,o));let h=0,d=0,f=0,p=0,g=0;a.push(l,u);for(let m=1,y=0;m<=c;++m)y=m/c,h=1-y,d=h*h,f=d*h,p=y*y,g=p*y,a.push(f*l+3*d*y*e+3*h*p*r+g*s,f*u+3*d*y*n+3*h*p*i+g*o)}}function yS(t,e,n,r,i,s,o,a){let d,f;return o?(d=r,f=-n):(d=-r,f=n),a.push(t-n*i+d,e-r*i+f,t+n*s+d,e+r*s+f),2}function wo(t,e,n,r,i,s,o,a){const l=n-t,u=r-e;let c=Math.atan2(l,u),h=Math.atan2(i-t,s-e);a&&c<h?c+=2*Math.PI:!a&&c>h&&(h+=2*Math.PI);let d=c;const f=h-c,p=Math.abs(f),g=Math.sqrt(l*l+u*u),m=1+(15*p*Math.sqrt(g)/Math.PI>>0),y=f/m;if(d+=y,a){o.push(t,e,n,r);for(let v=1,w=d;v<m;v++,w+=y)o.push(t,e,t+Math.sin(w)*g,e+Math.cos(w)*g);o.push(t,e,i,s)}else{o.push(n,r,t,e);for(let v=1,w=d;v<m;v++,w+=y)o.push(t+Math.sin(w)*g,e+Math.cos(w)*g,t,e);o.push(i,s,t,e)}return 2*m}function z_(t,e){t.lineStyle.native?function YV(t,e){let n=0;const r=t.shape,i=t.points||r.points,s=r.type!==_n.POLY||r.closeStroke;if(0===i.length)return;const o=e.points,a=e.indices,l=i.length/2,u=o.length/2;let c=u;for(o.push(i[0],i[1]),n=1;n<l;n++)o.push(i[2*n],i[2*n+1]),a.push(c,c+1),c++;s&&a.push(c,u)}(t,e):function XV(t,e){const n=t.shape;let r=t.points||n.points.slice();const i=e.closePointEps;if(0===r.length)return;const s=t.lineStyle,o=new gt(r[0],r[1]),a=new gt(r[r.length-2],r[r.length-1]),l=n.type!==_n.POLY||n.closeStroke,u=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){r=r.slice(),u&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));const Se=.5*(o.x+a.x),tt=.5*(a.y+o.y);r.unshift(Se,tt),r.push(Se,tt)}const c=e.points,h=r.length/2;let d=r.length;const f=c.length/2,p=s.width/2,g=p*p,m=s.miterLimit*s.miterLimit;let y=r[0],v=r[1],w=r[2],E=r[3],M=0,H=0,k=-(v-E),F=y-w,V=0,W=0,Q=Math.sqrt(k*k+F*F);k/=Q,F/=Q,k*=p,F*=p;const Ne=s.alignment,Y=2*(1-Ne),K=2*Ne;l||(s.cap===vo.ROUND?d+=wo(y-k*(Y-K)*.5,v-F*(Y-K)*.5,y-k*Y,v-F*Y,y+k*K,v+F*K,c,!0)+2:s.cap===vo.SQUARE&&(d+=yS(y,v,k,F,Y,K,!0,c))),c.push(y-k*Y,v-F*Y,y+k*K,v+F*K);for(let Se=1;Se<h-1;++Se){y=r[2*(Se-1)],v=r[2*(Se-1)+1],w=r[2*Se],E=r[2*Se+1],M=r[2*(Se+1)],H=r[2*(Se+1)+1],k=-(v-E),F=y-w,Q=Math.sqrt(k*k+F*F),k/=Q,F/=Q,k*=p,F*=p,V=-(E-H),W=w-M,Q=Math.sqrt(V*V+W*W),V/=Q,W/=Q,V*=p,W*=p;const tt=w-y,rt=v-E,xr=w-M,ai=H-E,Oi=tt*xr+rt*ai,Fo=rt*xr-ai*tt,Gn=Fo<0;if(Math.abs(Fo)<.001*Math.abs(Oi)){c.push(w-k*Y,E-F*Y,w+k*K,E+F*K),Oi>=0&&(d+=s.join===ii.ROUND?wo(w,E,w-k*Y,E-F*Y,w-V*Y,E-W*Y,c,!1)+4:2,c.push(w-V*K,E-W*K,w+V*Y,E+W*Y));continue}const Fi=(-k+y)*(-F+E)-(-k+w)*(-F+v),dI=(-V+M)*(-W+E)-(-V+w)*(-W+H),pf=(tt*dI-xr*Fi)/Fo,gf=(ai*Fi-rt*dI)/Fo,fI=(pf-w)*(pf-w)+(gf-E)*(gf-E),Lo=w+(pf-w)*Y,ko=E+(gf-E)*Y,Bo=w-(pf-w)*K,Uo=E-(gf-E)*K,vj=Math.min(tt*tt+rt*rt,xr*xr+ai*ai),pI=Gn?Y:K;let mf=s.join;if(mf===ii.MITER&&fI/g>m&&(mf=ii.BEVEL),fI<=vj+pI*pI*g)switch(mf){case ii.MITER:c.push(Lo,ko,Bo,Uo);break;case ii.BEVEL:Gn?c.push(Lo,ko,w+k*K,E+F*K,Lo,ko,w+V*K,E+W*K):c.push(w-k*Y,E-F*Y,Bo,Uo,w-V*Y,E-W*Y,Bo,Uo),d+=2;break;case ii.ROUND:Gn?(c.push(Lo,ko,w+k*K,E+F*K),d+=wo(w,E,w+k*K,E+F*K,w+V*K,E+W*K,c,!0)+4,c.push(Lo,ko,w+V*K,E+W*K)):(c.push(w-k*Y,E-F*Y,Bo,Uo),d+=wo(w,E,w-k*Y,E-F*Y,w-V*Y,E-W*Y,c,!1)+4,c.push(w-V*Y,E-W*Y,Bo,Uo))}else{switch(c.push(w-k*Y,E-F*Y,w+k*K,E+F*K),mf){case ii.MITER:Gn?c.push(Bo,Uo,Bo,Uo):c.push(Lo,ko,Lo,ko),d+=2;break;case ii.ROUND:d+=Gn?wo(w,E,w+k*K,E+F*K,w+V*K,E+W*K,c,!0)+2:wo(w,E,w-k*Y,E-F*Y,w-V*Y,E-W*Y,c,!1)+2}c.push(w-V*Y,E-W*Y,w+V*K,E+W*K),d+=2}}y=r[2*(h-2)],v=r[2*(h-2)+1],w=r[2*(h-1)],E=r[2*(h-1)+1],k=-(v-E),F=y-w,Q=Math.sqrt(k*k+F*F),k/=Q,F/=Q,k*=p,F*=p,c.push(w-k*Y,E-F*Y,w+k*K,E+F*K),l||(s.cap===vo.ROUND?d+=wo(w-k*(Y-K)*.5,E-F*(Y-K)*.5,w-k*Y,E-F*Y,w+k*K,E+F*K,c,!1)+2:s.cap===vo.SQUARE&&(d+=yS(w,E,k,F,Y,K,!1,c)));const Ue=e.indices,Ae=qa.epsilon*qa.epsilon;for(let Se=f;Se<d+f-2;++Se)y=c[2*Se],v=c[2*Se+1],w=c[2*(Se+1)],E=c[2*(Se+1)+1],M=c[2*(Se+2)],H=c[2*(Se+2)+1],!(Math.abs(y*(E-H)+w*(H-v)+M*(v-E))<Ae)&&Ue.push(Se,Se+1,Se+2)}(t,e)}class Rd{static curveLength(e,n,r,i,s,o){const a=e-2*r+s,l=n-2*i+o,u=2*r-2*e,c=2*i-2*n,h=4*(a*a+l*l),d=4*(a*u+l*c),f=u*u+c*c,p=2*Math.sqrt(h+d+f),g=Math.sqrt(h),m=2*h*g,y=2*Math.sqrt(f),v=d/g;return(m*p+g*d*(p-y)+(4*f*h-d*d)*Math.log((2*g+v+p)/(v+y)))/(4*m)}static curveTo(e,n,r,i,s){const o=s[s.length-2],a=s[s.length-1],l=qa._segmentsCount(Rd.curveLength(o,a,e,n,r,i));let u=0,c=0;for(let h=1;h<=l;++h){const d=h/l;u=o+(e-o)*d,c=a+(n-a)*d,s.push(u+(e+(r-e)*d-u)*d,c+(n+(i-n)*d-c)*d)}}}const Nd={[_n.POLY]:j_,[_n.CIRC]:Ru,[_n.ELIP]:Ru,[_n.RECT]:mS,[_n.RREC]:_S},W_=[],Nu=[];class Od{constructor(e,n=null,r=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=n,this.matrix=i,this.type=e.type}clone(){return new Od(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}class vS{constructor(){this.reset()}begin(e,n,r){this.reset(),this.style=e,this.start=n,this.attribStart=r}end(e,n){this.attribSize=n-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const Za=new gt,wS=class extends aC{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new xd,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Nu.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),W_.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,n=null,r=null){const i=new Od(t,e,n,r);return this.graphicsData.push(i),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const n=new Od(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let n=0;n<e.length;++n){const r=e[n];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(t,Za):Za.copyFrom(t),r.shape.contains(Za.x,Za.y))){let i=!1;if(r.holes)for(let s=0;s<r.holes.length;s++)if(r.holes[s].shape.contains(Za.x,Za.y)){i=!0;break}if(!i)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let n=null,r=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],r=n.style);for(let a=this.shapeIndex;a<e.length;a++){this.shapeIndex++;const l=e[a],u=l.fillStyle,c=l.lineStyle;Nd[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(u.visible||c.visible)&&this.processHoles(l.holes);for(let d=0;d<2;d++){const f=0===d?u:c;if(!f.visible)continue;const g=this.indices.length,m=this.points.length/2;f.texture.baseTexture.wrapMode=Ss.REPEAT,0===d?this.processFill(l):this.processLine(l);const y=this.points.length/2-m;0!==y&&(n&&!this._compareStyles(r,f)&&(n.end(g,m),n=null),n||(n=W_.pop()||new vS,n.begin(f,g,m),this.batches.push(n),r=f),this.addUvs(this.points,t,f.texture,m,y,f.matrix))}}const s=this.points.length/2;if(n&&n.end(this.indices.length,s),0===this.batches.length)return void(this.batchable=!0);const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const n=this.graphicsData[t],r=n.fillStyle,i=n.lineStyle;if(r&&!r.texture.baseTexture.valid||i&&!i.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,n=t.length;e<n;e++){const r=t[e];for(let i=0;i<r.size;i++){const s=r.start+i;this.indicesUint16[s]=this.indicesUint16[s]-r.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*wS.BATCHABLE_SIZE}buildDrawCalls(){let t=++Qe._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),Nu.push(this.drawCalls[c]);this.drawCalls.length=0;const e=this.colors,n=this.textureIds;let r=Nu.pop();r||(r=new d_,r.texArray=new __),r.texArray.count=0,r.start=0,r.size=0,r.type=bi.TRIANGLES;let i=0,s=null,o=0,a=!1,l=bi.TRIANGLES,u=0;this.drawCalls.push(r);for(let c=0;c<this.batches.length;c++){const h=this.batches[c],d=8,f=h.style,p=f.texture.baseTexture;a!==!!f.native&&(a=!!f.native,l=a?bi.LINES:bi.TRIANGLES,s=null,i=d,t++),s!==p&&(s=p,p._batchEnabled!==t&&(i===d&&(t++,i=0,r.size>0&&(r=Nu.pop(),r||(r=new d_,r.texArray=new __),this.drawCalls.push(r)),r.start=u,r.size=0,r.texArray.count=0,r.type=l),p.touched=1,p._batchEnabled=t,p._batchLocation=i,p.wrapMode=Ss.REPEAT,r.texArray.elements[r.texArray.count++]=p,i++)),r.size+=h.size,u+=h.size,o=p._batchLocation,this.addColors(e,f.color,f.alpha,h.attribSize,h.attribStart),this.addTextureIds(n,o,h.attribSize,h.attribStart)}Qe._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(3*t.length*4),s=new Float32Array(i),o=new Uint32Array(i);let a=0;for(let l=0;l<t.length/2;l++)s[a++]=t[2*l],s[a++]=t[2*l+1],s[a++]=e[2*l],s[a++]=e[2*l+1],o[a++]=n[l],s[a++]=r[l];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?j_.triangulate(t,this):Nd[t.type].triangulate(t,this)}processLine(t){z_(t,this);for(let e=0;e<t.holes.length;e++)z_(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const n=t[e];Nd[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let n=0;n<t.length/2;n++){const r=t[2*n],i=t[2*n+1];t[2*n]=e.a*r+e.c*i+e.tx,t[2*n+1]=e.b*r+e.d*i+e.ty}}addColors(t,e,n,r,i=0){const s=mt.shared.setValue(e).toLittleEndianNumber(),o=mt.shared.setValue(s).toPremultiplied(n);t.length=Math.max(t.length,i+r);for(let a=0;a<r;a++)t[i+a]=o}addTextureIds(t,e,n,r=0){t.length=Math.max(t.length,r+n);for(let i=0;i<n;i++)t[r+i]=e}addUvs(t,e,n,r,i,s=null){let o=0;const a=e.length,l=n.frame;for(;o<i;){let c=t[2*(r+o)],h=t[2*(r+o)+1];if(s){const d=s.a*c+s.c*h+s.tx;h=s.b*c+s.d*h+s.ty,c=d}o++,e.push(c/l.width,h/l.height)}const u=n.baseTexture;(l.width<u.width||l.height<u.height)&&this.adjustUvs(e,n,a,i)}adjustUvs(t,e,n,r){const i=e.baseTexture,s=1e-6,o=n+2*r,a=e.frame,l=a.width/i.width,u=a.height/i.height;let c=a.x/a.width,h=a.y/a.height,d=Math.floor(t[n]+s),f=Math.floor(t[n+1]+s);for(let p=n+2;p<o;p+=2)d=Math.min(d,Math.floor(t[p]+s)),f=Math.min(f,Math.floor(t[p+1]+s));c-=d,h-=f;for(let p=n;p<o;p+=2)t[p]=(t[p]+c)*l,t[p+1]=(t[p+1]+h)*u}};let xS=wS;xS.BATCHABLE_SIZE=100;class Fd{constructor(){this.color=16777215,this.alpha=1,this.texture=be.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Fd;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=be.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class X_ extends Fd{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=vo.BUTT,this.join=ii.MITER,this.miterLimit=10}clone(){const e=new X_;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const Y_={},Ld=class extends Sn{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Fd,this._lineStyle=new X_,this._matrix=null,this._holeMode=!1,this.state=ss.for2d(),this._geometry=t||new xS,this._geometry.refCount++,this._transformID=-1,this._tintColor=new mt(16777215),this.blendMode=Ve.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Ld(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,n,r=.5,i=!1){return"number"==typeof t&&(t={width:t,color:e,alpha:n,alignment:r,native:i}),this.lineTextureStyle(t)}lineTextureStyle(t){t=Object.assign({width:0,texture:be.WHITE,color:t?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:vo.BUTT,join:ii.MITER,miterLimit:10},t),this.normalizeColor(t),this.currentPath&&this.startPoly();const n=t.width>0&&t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:n},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new ja,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new ja,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points;return(n[n.length-2]!==t||n[n.length-1]!==e)&&n.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,n,r){this._initCurve();const i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),Rd.curveTo(t,e,n,r,i),this}bezierCurveTo(t,e,n,r,i,s){return this._initCurve(),Pd.curveTo(t,e,n,r,i,s,this.currentPath.points),this}arcTo(t,e,n,r,i){this._initCurve(t,e);const o=$_.curveTo(t,e,n,r,i,this.currentPath.points);if(o){const{cx:a,cy:l,radius:u,startAngle:c,endAngle:h,anticlockwise:d}=o;this.arc(a,l,u,c,h,d)}return this}arc(t,e,n,r,i,s=!1){if(r===i)return this;if(!s&&i<=r?i+=nd:s&&r<=i&&(r+=nd),i-r==0)return this;const a=t+Math.cos(r)*n,l=e+Math.sin(r)*n,u=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const h=Math.abs(c[c.length-2]-a),d=Math.abs(c[c.length-1]-l);h<u&&d<u||c.push(a,l)}else this.moveTo(a,l),c=this.currentPath.points;return $_.arc(a,l,t,e,n,r,i,s,c),this}beginFill(t=0,e){return this.beginTextureFill({texture:be.WHITE,color:t,alpha:e})}normalizeColor(t){const e=mt.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){t=Object.assign({texture:be.WHITE,color:16777215,matrix:null},t),this.normalizeColor(t),this.currentPath&&this.startPoly();const n=t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:n},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,n,r){return this.drawShape(new ot(t,e,n,r))}drawRoundedRect(t,e,n,r,i){return this.drawShape(new g_(t,e,n,r,i))}drawCircle(t,e,n){return this.drawShape(new f_(t,e,n))}drawEllipse(t,e,n,r){return this.drawShape(new p_(t,e,n,r))}drawPolygon(...t){let e,n=!0;const r=t[0];r.points?(n=r.closeStroke,e=r.points):e=Array.isArray(t[0])?t[0]:t;const i=new ja(e);return i.closeStroke=n,this.drawShape(i),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==_n.RECT||t[0].matrix||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(let r=0;r<n;r++){const i=t.batches[r],s=i.style.color,o=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),u={vertexData:o,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*i.start,i.size),uvs:a,_batchRGB:mt.shared.setValue(s).toRgbArray(),_tintRGB:s,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=u}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,n=this.batches.length;e<n;e++){const r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}}_renderDirect(t){const e=this._resolveDirectShader(t),n=this._geometry,r=this.worldAlpha,i=e.uniforms,s=n.drawCalls;i.translationMatrix=this.transform.worldTransform,mt.shared.setValue(this._tintColor).premultiply(r).toArray(i.tint),t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(let o=0,a=s.length;o<a;o++)this._renderDrawCallDirect(t,n.drawCalls[o])}_renderDrawCallDirect(t,e){const{texArray:n,type:r,size:i,start:s}=e,o=n.count;for(let a=0;a<o;a++)t.texture.bind(n.elements[a],a);t.geometry.draw(r,i,s)}_resolveDirectShader(t){let e=this.shader;const n=this.pluginName;if(!e){if(!Y_[n]){const{maxTextures:r}=t.plugins[n],i=new Int32Array(r);for(let a=0;a<r;a++)i[a]=a;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new kt,default:Kr.from({uSamplers:i},!0)};Y_[n]=new Si(t.plugins[n]._shader.program,s)}e=Y_[n]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:n,maxX:r,maxY:i}=t.bounds;this._bounds.addFrame(this.transform,e,n,r,i)}containsPoint(t){return this.worldTransform.applyInverse(t,Ld._TEMP_POINT),this._geometry.containsPoint(Ld._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=mt.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,s=e.d,o=e.tx,a=e.ty,l=this._geometry.points,u=this.vertexData;let c=0;for(let h=0;h<l.length;h+=2){const d=l[h],f=l[h+1];u[c++]=n*d+i*f+o,u[c++]=s*f+r*d+a}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};let Ou=Ld;Ou.curves=qa,Ou._TEMP_POINT=new gt;class qV{constructor(e,n){this.uvBuffer=e,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const n=this.uvBuffer.data;(!this.data||this.data.length!==n.length)&&(this.data=new Float32Array(n.length)),this.uvMatrix.multiplyUvs(n,this.data),this._updateID++}}const q_=new gt,bS=new ja,ES=class extends Sn{constructor(t,e,n,r=bi.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=n||ss.for2d(),this.drawMode=r,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=_e.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){this.shader.batchable&&this.drawMode===bi.TRIANGLES&&this.geometry.buffers[0].data.length<2*ES.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)}calculateVertices(){const e=this.geometry.buffers[0],n=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,u=i.tx,c=i.ty,h=this.vertexData;for(let d=0;d<h.length/2;d++){const f=n[2*d],p=n[2*d+1];h[2*d]=s*f+a*p+u,h[2*d+1]=o*f+l*p+c}if(this._roundPixels){const d=_e.RESOLUTION;for(let f=0;f<h.length;++f)h[f]=Math.round(h[f]*d)/d}this.vertexDirty=r}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new qV(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,q_);const e=this.geometry.getBuffer("aVertexPosition").data,n=bS.points,r=this.geometry.getIndex().data,i=r.length,s=4===this.drawMode?3:1;for(let o=0;o+2<i;o+=s){const a=2*r[o],l=2*r[o+1],u=2*r[o+2];if(n[0]=e[a],n[1]=e[a+1],n[2]=e[l],n[3]=e[l+1],n[4]=e[u],n[5]=e[u+1],bS.contains(q_.x,q_.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let Z_=ES;Z_.BATCHABLE_SIZE=100;class ZV extends Ms{constructor(e,n,r){super();const i=new Jt(e),s=new Jt(n,!0),o=new Jt(r,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,ke.FLOAT).addAttribute("aTextureCoord",s,2,!1,ke.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}class TS extends Si{constructor(e,n){const r={uSampler:e,alpha:1,uTextureMatrix:kt.IDENTITY,uColor:new Float32Array([1,1,1,1])};(n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n)).uniforms&&Object.assign(r,n.uniforms),super(n.program||Zr.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),r),this._colorDirty=!1,this.uvMatrix=new x_(e),this.batchable=void 0===n.program,this.pluginName=n.pluginName,this._tintColor=new mt(n.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=n.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const n=this.texture.baseTexture.alphaMode;mt.shared.setValue(this._tintColor).premultiply(this._alpha,n).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class DS{constructor(e,n,r){this.geometry=new Ms,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||ke.FLOAT,offset:s.offset},n[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let n=0;this.indexBuffer=new Jt(function NU(t,e=null){const n=6*t;if((e=e||new Uint16Array(n)).length!==n)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${n}`);for(let r=0,i=0;r<n;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=n,n+=a.size,this.dynamicStride+=a.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new Jt(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Jt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===ke.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===ke.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)}}uploadDynamic(e,n,r){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,n,r,s.type===ke.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,n,r){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,n,r,s.type===ke.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}class CS extends cd{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new kt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ke.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Si.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=ss.for2d()}render(e){const n=e.children,r=e._maxSize,i=e._batchSize,s=this.renderer;let o=n.length;if(0===o)return;o>r&&!e.autoResize&&(o=r);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=n[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=KD(e.blendMode,u),s.state.set(this.state);const c=s.gl,h=e.worldTransform.copyTo(this.tempMatrix);h.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=mt.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=i,p+=1){let g=o-f;g>i&&(g=i),p>=a.length&&a.push(this._generateOneMoreBuffer(e));const m=a[p];m.uploadDynamic(n,f,g),d=d||m._updateID<(e._bufferUpdateIDs[p]||0),d&&(m._updateID=e._updateID,m.uploadStatic(n,f,g)),s.geometry.bind(m.geometry),c.drawElements(c.TRIANGLES,6*g,c.UNSIGNED_SHORT,0)}}generateBuffers(e){const n=[],r=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<r;o+=i)n.push(new DS(this.properties,s,i));return n}_generateOneMoreBuffer(e){return new DS(this.properties,e._properties,e._batchSize)}uploadVertices(e,n,r,i,s,o){let a=0,l=0,u=0,c=0;for(let h=0;h<r;++h){const d=e[n+h],f=d._texture,p=d.scale.x,g=d.scale.y,m=f.trim,y=f.orig;m?(l=m.x-d.anchor.x*y.width,a=l+m.width,c=m.y-d.anchor.y*y.height,u=c+m.height):(a=y.width*(1-d.anchor.x),l=y.width*-d.anchor.x,u=y.height*(1-d.anchor.y),c=y.height*-d.anchor.y),i[o]=l*p,i[o+1]=c*g,i[o+s]=a*p,i[o+s+1]=c*g,i[o+2*s]=a*p,i[o+2*s+1]=u*g,i[o+3*s]=l*p,i[o+3*s+1]=u*g,o+=4*s}}uploadPosition(e,n,r,i,s,o){for(let a=0;a<r;a++){const l=e[n+a].position;i[o]=l.x,i[o+1]=l.y,i[o+s]=l.x,i[o+s+1]=l.y,i[o+2*s]=l.x,i[o+2*s+1]=l.y,i[o+3*s]=l.x,i[o+3*s+1]=l.y,o+=4*s}}uploadRotation(e,n,r,i,s,o){for(let a=0;a<r;a++){const l=e[n+a].rotation;i[o]=l,i[o+s]=l,i[o+2*s]=l,i[o+3*s]=l,o+=4*s}}uploadUvs(e,n,r,i,s,o){for(let a=0;a<r;++a){const l=e[n+a]._texture._uvs;l?(i[o]=l.x0,i[o+1]=l.y0,i[o+s]=l.x1,i[o+s+1]=l.y1,i[o+2*s]=l.x2,i[o+2*s+1]=l.y2,i[o+3*s]=l.x3,i[o+3*s+1]=l.y3,o+=4*s):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+2*s]=0,i[o+2*s+1]=0,i[o+3*s]=0,i[o+3*s+1]=0,o+=4*s)}}uploadTint(e,n,r,i,s,o){for(let a=0;a<r;++a){const l=e[n+a],u=mt.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[o]=u,i[o+s]=u,i[o+2*s]=u,i[o+3*s]=u,o+=4*s}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}CS.extension={name:"particle",type:xe.RendererPlugin},Fe.add(CS);var Bd=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(Bd||{});const Ud={willReadFrequently:!0},Re=class{static get experimentalLetterSpacingSupported(){let t=Re._experimentalLetterSpacingSupported;if(void 0!==t){const e=_e.ADAPTER.getCanvasRenderingContext2D().prototype;t=Re._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,n,r,i,s,o,a,l){this.text=t,this.style=e,this.width=n,this.height=r,this.lines=i,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(t,e,n,r=Re._canvas){n=n??e.wordWrap;const i=e.toFontString(),s=Re.measureFont(i);0===s.fontSize&&(s.fontSize=e.fontSize,s.ascent=e.fontSize);const o=r.getContext("2d",Ud);o.font=i;const l=(n?Re.wordWrap(t,e,r):t).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let c=0;for(let p=0;p<l.length;p++){const g=Re._measureText(l[p],e.letterSpacing,o);u[p]=g,c=Math.max(c,g)}let h=c+e.strokeThickness;e.dropShadow&&(h+=e.dropShadowDistance);const d=e.lineHeight||s.fontSize+e.strokeThickness;let f=Math.max(d,s.fontSize+2*e.strokeThickness)+(l.length-1)*(d+e.leading);return e.dropShadow&&(f+=e.dropShadowDistance),new Re(t,e,h,f,l,u,d+e.leading,c,s)}static _measureText(t,e,n){let r=!1;Re.experimentalLetterSpacingSupported&&(Re.experimentalLetterSpacing?(n.letterSpacing=`${e}px`,n.textLetterSpacing=`${e}px`,r=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let i=n.measureText(t).width;return i>0&&(r?i-=e:i+=(Re.graphemeSegmenter(t).length-1)*e),i}static wordWrap(t,e,n=Re._canvas){const r=n.getContext("2d",Ud);let i=0,s="",o="";const a=Object.create(null),{letterSpacing:l,whiteSpace:u}=e,c=Re.collapseSpaces(u),h=Re.collapseNewlines(u);let d=!c;const f=e.wordWrapWidth+l,p=Re.tokenize(t);for(let g=0;g<p.length;g++){let m=p[g];if(Re.isNewline(m)){if(!h){o+=Re.addLine(s),d=!c,s="",i=0;continue}m=" "}if(c){const v=Re.isBreakingSpace(m),w=Re.isBreakingSpace(s[s.length-1]);if(v&&w)continue}const y=Re.getFromCache(m,l,a,r);if(y>f)if(""!==s&&(o+=Re.addLine(s),s="",i=0),Re.canBreakWords(m,e.breakWords)){const v=Re.wordWrapSplit(m);for(let w=0;w<v.length;w++){let E=v[w],M=E,H=1;for(;v[w+H];){const F=v[w+H];if(Re.canBreakChars(M,F,m,w,e.breakWords))break;E+=F,M=F,H++}w+=H-1;const k=Re.getFromCache(E,l,a,r);k+i>f&&(o+=Re.addLine(s),d=!1,s="",i=0),s+=E,i+=k}}else s.length>0&&(o+=Re.addLine(s),s="",i=0),o+=Re.addLine(m,!(g===p.length-1)),d=!1,s="",i=0;else y+i>f&&(d=!1,o+=Re.addLine(s),s="",i=0),(s.length>0||!Re.isBreakingSpace(m)||d)&&(s+=m,i+=y)}return o+=Re.addLine(s,!1),o}static addLine(t,e=!0){return t=Re.trimRight(t),e?`${t}\n`:t}static getFromCache(t,e,n,r){let i=n[t];return"number"!=typeof i&&(i=Re._measureText(t,e,r)+e,n[t]=i),i}static collapseSpaces(t){return"normal"===t||"pre-line"===t}static collapseNewlines(t){return"normal"===t}static trimRight(t){if("string"!=typeof t)return"";for(let e=t.length-1;e>=0&&Re.isBreakingSpace(t[e]);e--)t=t.slice(0,-1);return t}static isNewline(t){return"string"==typeof t&&Re._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return"string"==typeof t&&Re._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let n="";if("string"!=typeof t)return e;for(let r=0;r<t.length;r++){const i=t[r];Re.isBreakingSpace(i,t[r+1])||Re.isNewline(i)?(""!==n&&(e.push(n),n=""),e.push(i)):n+=i}return""!==n&&e.push(n),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,n,r,i){return!0}static wordWrapSplit(t){return Re.graphemeSegmenter(t)}static measureFont(t){if(Re._fonts[t])return Re._fonts[t];const e={ascent:0,descent:0,fontSize:0},n=Re._canvas,r=Re._context;r.font=t;const i=Re.METRICS_STRING+Re.BASELINE_SYMBOL,s=Math.ceil(r.measureText(i).width);let o=Math.ceil(r.measureText(Re.BASELINE_SYMBOL).width);const a=Math.ceil(Re.HEIGHT_MULTIPLIER*o);if(o=o*Re.BASELINE_MULTIPLIER|0,0===s||0===a)return Re._fonts[t]=e,e;n.width=s,n.height=a,r.fillStyle="#f00",r.fillRect(0,0,s,a),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(i,0,o);const l=r.getImageData(0,0,s,a).data,u=l.length,c=4*s;let h=0,d=0,f=!1;for(h=0;h<o;++h){for(let p=0;p<c;p+=4)if(255!==l[d+p]){f=!0;break}if(f)break;d+=c}for(e.ascent=o-h,d=u-c,f=!1,h=a;h>o;--h){for(let p=0;p<c;p+=4)if(255!==l[d+p]){f=!0;break}if(f)break;d-=c}return e.descent=h-o,e.fontSize=e.ascent+e.descent,Re._fonts[t]=e,e}static clearMetrics(t=""){t?delete Re._fonts[t]:Re._fonts={}}static get _canvas(){if(!Re.__canvas){let t;try{const e=new OffscreenCanvas(0,0);if(e.getContext("2d",Ud)?.measureText)return Re.__canvas=e,e;t=_e.ADAPTER.createCanvas()}catch{t=_e.ADAPTER.createCanvas()}t.width=t.height=10,Re.__canvas=t}return Re.__canvas}static get _context(){return Re.__context||(Re.__context=Re._canvas.getContext("2d",Ud)),Re.__context}};let vn=Re;vn.METRICS_STRING="|\xc9q\xc5",vn.BASELINE_SYMBOL="M",vn.BASELINE_MULTIPLIER=1.4,vn.HEIGHT_MULTIPLIER=2,vn.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(n=>n.segment)}return t=>[...t]})(),vn.experimentalLetterSpacing=!1,vn._fonts={},vn._newlines=[10,13],vn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const tG=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Fu=class{constructor(t){this.styleID=0,this.reset(),Q_(this,t,t)}clone(){const t={};return Q_(t,this,Fu.defaultStyle),new Fu(t)}reset(){Q_(this,Fu.defaultStyle,Fu.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=K_(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=K_(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){(function nG(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=K_(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t="number"==typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let n=e.length-1;n>=0;n--){let r=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!tG.includes(r)&&(r=`"${r}"`),e[n]=r}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};let Ai=Fu;function K_(t){const e=mt.shared;return Array.isArray(t)?t.map(n=>e.setValue(n).toHex()):e.setValue(t).toHex()}function Q_(t,e,n){for(const r in n)t[r]=Array.isArray(e[r])?e[r].slice():e[r]}Ai.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Bd.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};const rG={texture:!0,children:!1,baseTexture:!0},J_=class extends ti{constructor(t,e,n){let r=!1;n||(n=_e.ADAPTER.createCanvas(),r=!0),n.width=3,n.height=3;const i=be.from(n);i.orig=new ot,i.trim=new ot,super(i),this._ownCanvas=r,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=J_.defaultResolution??_e.RESOLUTION,this._autoResolution=J_.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return vn.experimentalLetterSpacing}static set experimentalLetterSpacing(t){et("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),vn.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const n=this.context,r=vn.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=r.height,o=r.lines,a=r.lineHeight,l=r.lineWidths,u=r.maxLineWidth,c=r.fontProperties;let h,d;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,r.width)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+2*e.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;const f=e.dropShadow?2:1;for(let p=0;p<f;++p){const g=e.dropShadow&&0===p,m=g?Math.ceil(Math.max(1,s)+2*e.padding):0,y=m*this._resolution;if(g){n.fillStyle="black",n.strokeStyle="black";const E=e.dropShadowBlur*this._resolution,M=e.dropShadowDistance*this._resolution;n.shadowColor=mt.shared.setValue(e.dropShadowColor).setAlpha(e.dropShadowAlpha).toRgbaString(),n.shadowBlur=E,n.shadowOffsetX=Math.cos(e.dropShadowAngle)*M,n.shadowOffsetY=Math.sin(e.dropShadowAngle)*M+y}else n.fillStyle=this._generateFillStyle(e,o,r),n.strokeStyle=e.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let v=(a-c.fontSize)/2;a-c.fontSize<0&&(v=0);for(let w=0;w<o.length;w++)h=e.strokeThickness/2,d=e.strokeThickness/2+w*a+c.ascent+v,"right"===e.align?h+=u-l[w]:"center"===e.align&&(h+=(u-l[w])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[w],h+e.padding,d+e.padding-m,!0),e.fill&&this.drawLetterSpacing(o[w],h+e.padding,d+e.padding-m)}this.updateTexture()}drawLetterSpacing(t,e,n,r=!1){const s=this._style.letterSpacing;let o=!1;if(vn.experimentalLetterSpacingSupported&&(vn.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===s||o)return void(r?this.context.strokeText(t,e,n):this.context.fillText(t,e,n));let a=e;const l=vn.graphemeSegmenter(t);let u=this.context.measureText(t).width,c=0;for(let h=0;h<l.length;++h){const d=l[h];r?this.context.strokeText(d,a,n):this.context.fillText(d,a,n);let f="";for(let p=h+1;p<l.length;++p)f+=l[p];c=this.context.measureText(f).width,a+=u-c+s,u=c}}updateTexture(){const t=this.canvas;if(this._style.trim){const s=function BU(t){const e=function kU(t){const{width:e,height:n}=t,r=t.getContext("2d",{willReadFrequently:!0});if(null===r)throw new TypeError("Failed to get canvas 2D context");const s=r.getImageData(0,0,e,n).data;let o=0,a=0,l=e-1,u=n-1;for(;a<n&&nC(s,e,a);)++a;if(a===n)return n_.EMPTY;for(;nC(s,e,u);)--u;for(;rC(s,e,o,a,u);)++o;for(;rC(s,e,l,a,u);)--l;return++l,++u,new n_(o,a,l,u)}(t),{width:n,height:r}=e;let i=null;if(!e.isEmpty()){const s=t.getContext("2d");if(null===s)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,n,r)}return{width:n,height:r,data:i}}(t);s.data&&(t.width=s.width,t.height=s.height,this.context.putImageData(s.data,0,0))}const e=this._texture,n=this._style,r=n.trim?0:n.padding,i=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-r,e.trim.y=-r,e.orig.width=e._frame.width-2*r,e.orig.height=e._frame.height-2*r,this._onTextureUpdate(),i.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),-1===this._textureID&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,n){const r=t.fill;if(!Array.isArray(r))return r;if(1===r.length)return r[0];let i;const s=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,a=this.canvas.width/this._resolution-s-2*o,l=this.canvas.height/this._resolution-s-2*o,u=r.slice(),c=t.fillGradientStops.slice();if(!c.length){const h=u.length+1;for(let d=1;d<h;++d)c.push(d/h)}if(u.unshift(r[0]),c.unshift(0),u.push(r[r.length-1]),c.push(1),t.fillGradientType===Bd.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,o,a/2,l+o);const h=n.fontProperties.fontSize+t.strokeThickness;for(let d=0;d<e.length;d++){const f=n.lineHeight*(d-1)+h,p=n.lineHeight*d;let g=p;d>0&&f>p&&(g=(p+f)/2);const m=p+h,y=n.lineHeight*(d+1);let v=m;d+1<e.length&&y<m&&(v=(m+y)/2);const w=(v-g)/l;for(let E=0;E<u.length;E++){let M=0;M="number"==typeof c[E]?c[E]:E/u.length;let H=Math.min(1,Math.max(0,g/l+M*w));H=Number(H.toFixed(5)),i.addColorStop(H,u[E])}}}else{i=this.context.createLinearGradient(o,l/2,a+o,l/2);const h=u.length+1;let d=1;for(let f=0;f<u.length;f++){let p;p="number"==typeof c[f]?c[f]:d/h,i.addColorStop(p,u[f]),d++}}return i}destroy(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},rG,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=Is(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=Is(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){this._style=(t=t||{})instanceof Ai?t:new Ai(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};let Fs=J_;Fs.defaultAutoResolution=!0;class iG{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function sG(t,e){let n=!1;if(t?._textures?.length)for(let r=0;r<t._textures.length;r++)if(t._textures[r]instanceof be){const i=t._textures[r].baseTexture;e.includes(i)||(e.push(i),n=!0)}return n}function oG(t,e){if(t.baseTexture instanceof Qe){const n=t.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function aG(t,e){if(t._texture&&t._texture instanceof be){const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function lG(t,e){return e instanceof Fs&&(e.updateText(!0),!0)}function uG(t,e){if(e instanceof Ai){const n=e.toFontString();return vn.measureFont(n),!0}return!1}function cG(t,e){if(t instanceof Fs){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function hG(t,e){return t instanceof Ai&&(e.includes(t)||e.push(t),!0)}const SS=class{constructor(t){this.limiter=new iG(SS.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(cG),this.registerFindHook(hG),this.registerFindHook(sG),this.registerFindHook(oG),this.registerFindHook(aG),this.registerUploadHook(lG),this.registerUploadHook(uG)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,sn.system.addOnce(this.tick,this,Ns.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed)for(let n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)sn.system.addOnce(this.tick,this,Ns.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,n=t.length;e<n;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Sn)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&sn.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let Hd=SS;function IS(t,e){return e instanceof Qe&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function dG(t,e){if(!(e instanceof Ou))return!1;const{geometry:n}=e;e.finishPoly(),n.updateBatches();const{batches:r}=n;for(let i=0;i<r.length;i++){const{texture:s}=r[i].style;s&&IS(t,s.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function fG(t,e){return t instanceof Ou&&(e.push(t),!0)}Hd.uploadsPerFrame=4,Object.defineProperties(_e,{UPLOADS_PER_FRAME:{get:()=>Hd.uploadsPerFrame,set(t){et("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Hd.uploadsPerFrame=t}}});class AS extends Hd{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(fG),this.registerUploadHook(IS),this.registerUploadHook(dG)}}AS.extension={name:"prepare",type:xe.RendererSystem},Fe.add(AS);class Ka extends ti{constructor(e,n=!0){super(e[0]instanceof be?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=n,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(sn.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(sn.shared.add(this.update,this,Ns.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const n=this.animationSpeed*e,r=this.currentFrame;if(null!==this._durations){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=n/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const n=[];for(let r=0;r<e.length;++r)n.push(be.from(e[r]));return new Ka(n)}static fromImages(e){const n=[];for(let r=0;r<e.length;++r)n.push(be.from(e[r]));return new Ka(n)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof be)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let n=0;n<e.length;n++)this._textures.push(e[n].texture),this._durations.push(e[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const n=this.currentFrame;this._currentTime=e,n!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(sn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(sn.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const Lu=new gt;class ey extends ti{constructor(e,n=100,r=100){super(e),this.tileTransform=new sd,this._width=n,this._height=r,this.uvMatrix=this.texture.uvMatrix||new x_(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){this._bounds.addFrame(this.transform,this._width*-this._anchor._x,this._height*-this._anchor._y,this._width*(1-this._anchor._x),this._height*(1-this._anchor._y))}getLocalBounds(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ot),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Lu);const n=this._width,r=this._height,i=-n*this.anchor._x;if(Lu.x>=i&&Lu.x<i+n){const s=-r*this.anchor._y;if(Lu.y>=s&&Lu.y<s+r)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,n){const r=e instanceof be?e:be.from(e,n);return new ey(r,n.width,n.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var MS="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";const Vd=new kt;class PS extends cd{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new xC,this.state=ss.for2d()}contextChange(){const e=this.renderer,n={globals:e.globalUniforms};this.simpleShader=Si.from(MS,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",n),this.shader=e.context.webGLVersion>1?Si.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",n):Si.from(MS,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",n)}render(e){const n=this.renderer,r=this.quad;let i=r.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=r.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,r.invalidate();const a=e._texture,l=a.baseTexture,u=l.alphaMode>0,c=e.tileTransform.localTransform,h=e.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[n.CONTEXT_UID]?d=l.wrapMode!==Ss.CLAMP:l.wrapMode===Ss.CLAMP&&(l.wrapMode=Ss.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,g=a.height,m=e._width,y=e._height;Vd.set(c.a*p/m,c.b*p/y,c.c*g/m,c.d*g/y,c.tx/m,c.ty/y),Vd.invert(),d?Vd.prepend(h.mapCoord):(f.uniforms.uMapCoord=h.mapCoord.toArray(!0),f.uniforms.uClampFrame=h.uClampFrame,f.uniforms.uClampOffset=h.uClampOffset),f.uniforms.uTransform=Vd.toArray(!0),f.uniforms.uColor=mt.shared.setValue(e.tint).premultiply(e.worldAlpha,u).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,n.shader.bind(f),n.geometry.bind(r),this.state.blendMode=KD(e.blendMode,u),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}PS.extension={name:"tilingSprite",type:xe.RendererPlugin},Fe.add(PS);const ku=class{constructor(t,e,n=null){this.linkedSheets=[],this._texture=t instanceof be?t:null,this.baseTexture=t instanceof Qe?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let n=As(t,null);return null===n&&(n=parseFloat(e??"1")),1!==n&&this.baseTexture.setResolution(n),n}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=ku.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const n=ku.BATCH_SIZE;for(;e-t<n&&e<this._frameKeys.length;){const r=this._frameKeys[e],i=this._frames[r],s=i.frame;if(s){let o=null,a=null;const l=!1!==i.trimmed&&i.sourceSize?i.sourceSize:i.frame,u=new ot(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);o=i.rotated?new ot(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new ot(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==i.trimmed&&i.spriteSourceSize&&(a=new ot(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[r]=new be(this.baseTexture,o,u,a,i.rotated?2:0,i.anchor,i.borders),be.addToCache(this.textures[r],r)}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let n=0;n<t[e].length;n++)this.animations[e].push(this.textures[t[e][n]])}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*ku.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*ku.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let ty=ku;ty.BATCH_SIZE=1e3;const yG=["jpg","png","jpeg","avif","webp"];function RS(t,e,n){const r={};if(t.forEach(i=>{r[i]=e}),Object.keys(e.textures).forEach(i=>{r[i]=e.textures[i]}),!n){const i=Cn.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{const a=RS([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(r,a)})}return r}const vG={extension:xe.Asset,cache:{test:t=>t instanceof ty,getCacheableAssets:(t,e)=>RS(t,e,!1)},resolver:{test:t=>{const n=t.split("?")[0].split("."),r=n.pop(),i=n.pop();return"json"===r&&yG.includes(i)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(_e.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:xe.LoadParser,priority:Ii.Normal},testParse:(t,e)=>(0,De.Z)(function*(){return".json"===Cn.extname(e.src).toLowerCase()&&!!t.frames})(),parse:(t,e,n)=>(0,De.Z)(function*(){let r=Cn.dirname(e.src);r&&r.lastIndexOf("/")!==r.length-1&&(r+="/");let i=r+t.meta.image;i=H_(i,e.src);const o=(yield n.load([i]))[i],a=new ty(o.baseTexture,t,e.src);yield a.parse();const l=t?.meta?.related_multi_packs;if(Array.isArray(l)){const u=[];for(const h of l){if("string"!=typeof h)continue;let d=r+h;e.data?.ignoreMultiPack||(d=H_(d,e.src),u.push(n.load({src:d,data:{ignoreMultiPack:!0}})))}const c=yield Promise.all(u);a.linkedSheets=c,c.forEach(h=>{h.linkedSheets=[a].concat(a.linkedSheets.filter(d=>d!==h))})}return a})(),unload(t){t.destroy(!0)}}};Fe.add(vG);class Gd{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class jd{static test(e){return"string"==typeof e&&e.startsWith("info face=")}static parse(e){const n=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in n){const o=n[s].match(/^[a-z]+/gm)[0],a=n[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const c=a[u].split("="),h=c[0],d=c[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[h]=p}r[o].push(l)}const i=new Gd;return r.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),r.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),r.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),r.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),r.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),r.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class ny{static test(e){const n=e;return"getElementsByTagName"in n&&n.getElementsByTagName("page").length&&null!==n.getElementsByTagName("info")[0].getAttribute("face")}static parse(e){const n=new Gd,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let u=0;u<r.length;u++)n.info.push({face:r[u].getAttribute("face"),size:parseInt(r[u].getAttribute("size"),10)});for(let u=0;u<i.length;u++)n.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(let u=0;u<s.length;u++)n.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(let u=0;u<o.length;u++){const c=o[u];n.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)n.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)n.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return n}}class ry{static test(e){return!("string"!=typeof e||!e.includes("<font>"))&&ny.test(_e.ADAPTER.parseXML(e))}static parse(e){return ny.parse(_e.ADAPTER.parseXML(e))}}const iy=[jd,ny,ry];function bG(t,e,n,r,i,s,o){const a=n.text,l=n.fontProperties;e.translate(r,i),e.scale(s,s);const u=o.strokeThickness/2,c=-o.strokeThickness/2;if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=function xG(t,e,n,r,i,s){const o=n.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];let a;const l=n.dropShadow?n.dropShadowDistance:0,u=n.padding||0,c=t.width/r-l-2*u,h=t.height/r-l-2*u,d=o.slice(),f=n.fillGradientStops.slice();if(!f.length){const p=d.length+1;for(let g=1;g<p;++g)f.push(g/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),n.fillGradientType===Bd.LINEAR_VERTICAL){a=e.createLinearGradient(c/2,u,c/2,h+u);let p=0;const m=(s.fontProperties.fontSize+n.strokeThickness)/h;for(let y=0;y<i.length;y++){const v=s.lineHeight*y;for(let w=0;w<d.length;w++){let E=0;E="number"==typeof f[w]?f[w]:w/d.length;let H=Math.max(p,v/h+E*m);H=Math.min(H,1),a.addColorStop(H,d[w]),p=H}}}else{a=e.createLinearGradient(u,h/2,c+u,h/2);const p=d.length+1;let g=1;for(let m=0;m<d.length;m++){let y;y="number"==typeof f[m]?f[m]:g/p,a.addColorStop(y,d[m]),g++}}return a}(t,e,o,s,[a],n),e.strokeStyle=o.stroke,o.dropShadow){const d=o.dropShadowBlur*s,f=o.dropShadowDistance*s;e.shadowColor=mt.shared.setValue(o.dropShadowColor).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=d,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,u,c+n.lineHeight-l.descent),o.fill&&e.fillText(a,u,c+n.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function NS(t){return Array.from?Array.from(t):t.split("")}function $d(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}const si=class{constructor(t,e,n){const[r]=t.info,[i]=t.common,[s]=t.page,[o]=t.distanceField,a=As(s.file),l={};this._ownsTextures=n,this.font=r.face,this.size=r.size,this.lineHeight=i.lineHeight/a,this.chars={},this.pageTextures=l;for(let u=0;u<t.page.length;u++){const{id:c,file:h}=t.page[u];l[c]=e instanceof Array?e[u]:e[h],o?.fieldType&&"none"!==o.fieldType&&(l[c].baseTexture.alphaMode=Xr.NO_PREMULTIPLIED_ALPHA,l[c].baseTexture.mipmap=Ei.OFF)}for(let u=0;u<t.char.length;u++){const{id:c,page:h}=t.char[u];let{x:d,y:f,width:p,height:g,xoffset:m,yoffset:y,xadvance:v}=t.char[u];d/=a,f/=a,p/=a,g/=a,m/=a,y/=a,v/=a;const w=new ot(d+l[h].frame.x/a,f+l[h].frame.y/a,p,g);this.chars[c]={xOffset:m,yOffset:y,xAdvance:v,kerning:{},texture:new be(l[h].baseTexture,w),page:h}}for(let u=0;u<t.kerning.length;u++){let{first:c,second:h,amount:d}=t.kerning[u];c/=a,h/=a,d/=a,this.chars[h]&&(this.chars[h].kerning[c]=d)}this.distanceFieldRange=o?.distanceRange,this.distanceFieldType=o?.fieldType?.toLowerCase()??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,n){let r;if(t instanceof Gd)r=t;else{const s=function wG(t){for(let e=0;e<iy.length;e++)if(iy[e].test(t))return iy[e];return null}(t);if(!s)throw new Error("Unrecognized data format for font.");r=s.parse(t)}e instanceof be&&(e=[e]);const i=new si(r,e,n);return si.available[i.font]=i,i}static uninstall(t){const e=si.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete si.available[t]}static from(t,e,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:r,padding:i,resolution:s,textureWidth:o,textureHeight:a,...l}=Object.assign({},si.defaultOptions,n),u=function EG(t){"string"==typeof t&&(t=[t]);const e=[];for(let n=0,r=t.length;n<r;n++){const i=t[n];if(Array.isArray(i)){if(2!==i.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...NS(i))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(r),c=e instanceof Ai?e:new Ai(e),h=o,d=new Gd;d.info[0]={face:c.fontFamily,size:c.fontSize},d.common[0]={lineHeight:c.fontSize};let g,m,y,f=0,p=0,v=0;const w=[],E=[];for(let H=0;H<u.length;H++){g||(g=_e.ADAPTER.createCanvas(),g.width=o,g.height=a,m=g.getContext("2d"),y=new Qe(g,{resolution:s,...l}),w.push(y),E.push(new be(y)),d.page.push({id:E.length-1,file:""}));const k=u[H],F=vn.measureText(k,c,!1,g),V=F.width,W=Math.ceil(F.height),Q=Math.ceil(("italic"===c.fontStyle?2:1)*V);if(p>=a-W*s){if(0===p)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${k}')`);--H,g=null,m=null,y=null,p=0,f=0,v=0;continue}if(v=Math.max(W+F.fontProperties.descent,v),Q*s+f>=h){if(0===f)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${k}')`);--H,p+=v*s,p=Math.ceil(p),f=0,v=0;continue}bG(g,m,F,f,p,s,c);const Ne=$d(F.text);d.char.push({id:Ne,page:E.length-1,x:f/s,y:p/s,width:Q,height:W,xoffset:0,yoffset:0,xadvance:V-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),f+=(Q+2*i)*s,f=Math.ceil(f)}for(let H=0,k=u.length;H<k;H++){const F=u[H];for(let V=0;V<k;V++){const W=u[V],Q=m.measureText(F).width,Ne=m.measureText(W).width,K=m.measureText(F+W).width-(Q+Ne);K&&d.kerning.push({first:$d(F),second:$d(W),amount:K})}}const M=new si(d,E,!0);return void 0!==si.available[t]&&si.uninstall(t),si.available[t]=M,M}};let er=si;er.ALPHA=[["a","z"],["A","Z"]," "],er.NUMERIC=[["0","9"]],er.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],er.ASCII=[[" ","~"]],er.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:si.ALPHANUMERIC},er.available={};const OS=[],FS=[],LS=[],kS=class extends Sn{constructor(t,e={}){super();const{align:n,tint:r,maxWidth:i,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},kS.styleDefaults,e);if(!er.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new mt(r),this._font=void 0,this._fontName=o,this._fontSize=a,this.text=t,this._maxWidth=i,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new Ps(()=>{this.dirty=!0},this,0,0),this._roundPixels=_e.ROUND_PIXELS,this.dirty=!0,this._resolution=_e.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const t=er.available[this._fontName],e=this.fontSize,n=e/t.size,r=new gt,i=[],s=[],o=[],l=NS(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),u=this._maxWidth*t.size/e,c="none"===t.distanceFieldType?OS:FS;let h=null,d=0,f=0,p=0,g=-1,m=0,y=0,v=0,w=0;for(let W=0;W<l.length;W++){const Q=l[W],Ne=$d(Q);if(/(?:\s)/.test(Q)&&(g=W,m=d,w++),"\r"===Q||"\n"===Q){s.push(d),o.push(-1),f=Math.max(f,d),++p,++y,r.x=0,r.y+=t.lineHeight,h=null,w=0;continue}const Y=t.chars[Ne];if(!Y)continue;h&&Y.kerning[h]&&(r.x+=Y.kerning[h]);const K=LS.pop()||{texture:be.EMPTY,line:0,charCode:0,prevSpaces:0,position:new gt};K.texture=Y.texture,K.line=p,K.charCode=Ne,K.position.x=Math.round(r.x+Y.xOffset+this._letterSpacing/2),K.position.y=Math.round(r.y+Y.yOffset),K.prevSpaces=w,i.push(K),d=K.position.x+Math.max(Y.xAdvance-Y.xOffset,Y.texture.orig.width),r.x+=Y.xAdvance+this._letterSpacing,v=Math.max(v,Y.yOffset+Y.texture.height),h=Ne,-1!==g&&u>0&&r.x>u&&(++y,Va(i,1+g-y,1+W-g),W=g,g=-1,s.push(m),o.push(i.length>0?i[i.length-1].prevSpaces:0),f=Math.max(f,m),p++,r.x=0,r.y+=t.lineHeight,h=null,w=0)}const E=l[l.length-1];"\r"!==E&&"\n"!==E&&(/(?:\s)/.test(E)&&(d=m),s.push(d),f=Math.max(f,d),o.push(-1));const M=[];for(let W=0;W<=p;W++){let Q=0;"right"===this._align?Q=f-s[W]:"center"===this._align?Q=(f-s[W])/2:"justify"===this._align&&(Q=o[W]<0?0:(f-s[W])/o[W]),M.push(Q)}const H=i.length,k={},F=[],V=this._activePagesMeshData;c.push(...V);for(let W=0;W<H;W++){const Q=i[W].texture,Ne=Q.baseTexture.uid;if(!k[Ne]){let Y=c.pop();if(!Y){const Ue=new ZV;let Ae,Se;"none"===t.distanceFieldType?(Ae=new TS(be.EMPTY),Se=Ve.NORMAL):(Ae=new TS(be.EMPTY,{program:Zr.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // Gamma correction for coverage-like alpha\r\n  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r\n  float gamma = mix(1.0, 1.0 / 2.2, luma);\r\n  float coverage = pow(uColor.a * alpha, gamma);  \r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, coverage);\r\n}\r\n"),uniforms:{uFWidth:0}}),Se=Ve.NORMAL_NPM);const tt=new Z_(Ue,Ae);tt.blendMode=Se,Y={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:tt,vertices:null,uvs:null,indices:null}}Y.index=0,Y.indexCount=0,Y.vertexCount=0,Y.uvsCount=0,Y.total=0;const{_textureCache:K}=this;K[Ne]=K[Ne]||new be(Q.baseTexture),Y.mesh.texture=K[Ne],Y.mesh.tint=this._tintColor.value,F.push(Y),k[Ne]=Y}k[Ne].total++}for(let W=0;W<V.length;W++)F.includes(V[W])||this.removeChild(V[W].mesh);for(let W=0;W<F.length;W++)F[W].mesh.parent!==this&&this.addChild(F[W].mesh);this._activePagesMeshData=F;for(const W in k){const Q=k[W],Ne=Q.total;if(!(Q.indices?.length>6*Ne)||Q.vertices.length<2*Z_.BATCHABLE_SIZE)Q.vertices=new Float32Array(8*Ne),Q.uvs=new Float32Array(8*Ne),Q.indices=new Uint16Array(6*Ne);else{const K=Q.vertices;for(let Ue=4*Q.total*2;Ue<K.length;Ue++)K[Ue]=0}Q.mesh.size=6*Ne}for(let W=0;W<H;W++){const Q=i[W];let Ne=Q.position.x+M[Q.line]*("justify"===this._align?Q.prevSpaces:1);this._roundPixels&&(Ne=Math.round(Ne));const Y=Ne*n,K=Q.position.y*n,Ue=Q.texture,Ae=k[Ue.baseTexture.uid],Se=Ue.frame,tt=Ue._uvs,rt=Ae.index++;Ae.indices[6*rt+0]=0+4*rt,Ae.indices[6*rt+1]=1+4*rt,Ae.indices[6*rt+2]=2+4*rt,Ae.indices[6*rt+3]=0+4*rt,Ae.indices[6*rt+4]=2+4*rt,Ae.indices[6*rt+5]=3+4*rt,Ae.vertices[8*rt+0]=Y,Ae.vertices[8*rt+1]=K,Ae.vertices[8*rt+2]=Y+Se.width*n,Ae.vertices[8*rt+3]=K,Ae.vertices[8*rt+4]=Y+Se.width*n,Ae.vertices[8*rt+5]=K+Se.height*n,Ae.vertices[8*rt+6]=Y,Ae.vertices[8*rt+7]=K+Se.height*n,Ae.uvs[8*rt+0]=tt.x0,Ae.uvs[8*rt+1]=tt.y0,Ae.uvs[8*rt+2]=tt.x1,Ae.uvs[8*rt+3]=tt.y1,Ae.uvs[8*rt+4]=tt.x2,Ae.uvs[8*rt+5]=tt.y2,Ae.uvs[8*rt+6]=tt.x3,Ae.uvs[8*rt+7]=tt.y3}this._textWidth=f*n,this._textHeight=(r.y+t.lineHeight)*n;for(const W in k){const Q=k[W];if(0!==this.anchor.x||0!==this.anchor.y){let Ue=0;const Ae=this._textWidth*this.anchor.x,Se=this._textHeight*this.anchor.y;for(let tt=0;tt<Q.total;tt++)Q.vertices[Ue++]-=Ae,Q.vertices[Ue++]-=Se,Q.vertices[Ue++]-=Ae,Q.vertices[Ue++]-=Se,Q.vertices[Ue++]-=Ae,Q.vertices[Ue++]-=Se,Q.vertices[Ue++]-=Ae,Q.vertices[Ue++]-=Se}this._maxLineHeight=v*n;const Ne=Q.mesh.geometry.getBuffer("aVertexPosition"),Y=Q.mesh.geometry.getBuffer("aTextureCoord"),K=Q.mesh.geometry.getIndex();Ne.data=Q.vertices,Y.data=Q.uvs,K.data=Q.indices,Ne.update(),Y.update(),K.update()}for(let W=0;W<i.length;W++)LS.push(i[W]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:n,size:r}=er.available[this._fontName];if("none"!==n){const{a:i,b:s,c:o,d:a}=this.worldTransform,l=Math.sqrt(i*i+s*s),u=Math.sqrt(o*o+a*a),c=(Math.abs(l)+Math.abs(u))/2,h=this.fontSize/r,d=t._view.resolution;for(const f of this._activePagesMeshData)f.mesh.shader.uniforms.uFWidth=c*e*h*d}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=er.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!er.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??er.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,r="none"===er.available[this._fontName].distanceFieldType?OS:FS;r.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],r.filter(i=>e[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=be.EMPTY});for(const i in e)e[i].destroy(),delete e[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};kS.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const SG=[".xml",".fnt"],IG={extension:{type:xe.LoadParser,priority:Ii.Normal},name:"loadBitmapFont",test:t=>SG.includes(Cn.extname(t).toLowerCase()),testParse:t=>(0,De.Z)(function*(){return jd.test(t)||ry.test(t)})(),parse:(t,e,n)=>(0,De.Z)(function*(){const r=jd.test(t)?jd.parse(t):ry.parse(t),{src:i}=e,{page:s}=r,o=[];for(let u=0;u<s.length;++u){const c=s[u].file;let h=Cn.join(Cn.dirname(i),c);h=H_(h,i),o.push(h)}const a=yield n.load(o),l=o.map(u=>a[u]);return er.install(r,l,!0)})(),load:(t,e)=>(0,De.Z)(function*(){return(yield _e.ADAPTER.fetch(t)).text()})(),unload(t){t.destroy()}};Fe.add(IG);const Qa=class extends Ai{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new Qa(Object.keys(Qa.defaultOptions).reduce((e,n)=>({...e,[n]:t[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,0===t.refs&&(t.fontFace&&document.fonts.delete(t.fontFace),delete Qa.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){var n=this;const{availableFonts:r}=Qa;if(r[t]){const i=r[t];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return _e.ADAPTER.fetch(t).then(i=>i.blob()).then(function(){var i=(0,De.Z)(function*(s){return new Promise((o,a)=>{const l=URL.createObjectURL(s),u=new FileReader;u.onload=()=>o([l,u.result]),u.onerror=a,u.readAsDataURL(s)})});return function(s){return i.apply(this,arguments)}}()).then(function(){var i=(0,De.Z)(function*([s,o]){const a=Object.assign({family:Cn.basename(t,Cn.extname(t)),weight:"normal",style:"normal",src:s,dataSrc:o,refs:1,originalUrl:t,fontFace:null},e);r[t]=a,n._fonts.push(a),n.styleID++;const l=new FontFace(a.family,`url(${a.src})`,{weight:a.weight,style:a.style});a.fontFace=l,yield l.load(),document.fonts.add(l),yield document.fonts.ready,n.styleID++,n.fontsDirty=!0});return function(s){return i.apply(this,arguments)}}())}addOverride(...t){const e=t.filter(n=>!this._overrides.includes(n));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){const e=t.filter(n=>this._overrides.includes(n));e.length>0&&(this._overrides=this._overrides.filter(n=>!e.includes(n)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?["word-wrap: "+(this.breakWords?"break-all":"break-word"),`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}\n            @font-face {\n                font-family: "${e.family}";\n                src: url('${e.dataSrc}');\n                font-weight: ${e.weight};\n                font-style: ${e.style}; \n            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=function MU(t){return et("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),mt.shared.setValue(t).toNumber()}(t)),"number"==typeof t?function AU(t){return et("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),mt.shared.setValue(t).toHex()}(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const e=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),r=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(255*e|0).toString(16).padStart(2,"0"));const i=`${n}px ${r}px`;return this.dropShadowBlur>0?`text-shadow: ${i} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${i} ${t}`}reset(){Object.assign(this,Qa.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=_e.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let Bu=Qa;Bu.availableFonts={},Bu.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const Ja=class extends ti{constructor(t="",e={}){super(be.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const n=new Image,r=be.from(n,{scaleMode:_e.SCALE_MODE,resourceOptions:{autoLoad:!1}});r.orig=new ot,r.trim=new ot,this.texture=r;const i="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xhtml",o=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject"),l=document.createElementNS(s,"div"),u=document.createElementNS(s,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",o.appendChild(a),this.maxWidth=Ja.defaultMaxWidth,this.maxHeight=Ja.defaultMaxHeight,this._domElement=l,this._styleElement=u,this._svgRoot=o,this._foreignObject=a,this._foreignObject.appendChild(u),this._foreignObject.appendChild(l),this._image=n,this._loadImage=new Image,this._autoResolution=Ja.defaultAutoResolution,this._resolution=Ja.defaultResolution??_e.RESOLUTION,this.text=t,this.style=e}measureText(t){const{text:e,style:n,resolution:r}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:n.toCSS(r)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const i=this._domElement.getBoundingClientRect();this._svgRoot.remove();const s=Math.min(this.maxWidth,Math.ceil(i.width)),o=Math.min(this.maxHeight,Math.ceil(i.height));return this._svgRoot.setAttribute("width",s.toString()),this._svgRoot.setAttribute("height",o.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(r)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:s+2*n.padding,height:o+2*n.padding}}updateText(t=!0){var e=this;return(0,De.Z)(function*(){const{style:n,_image:r,_loadImage:i}=e;if(e.localStyleID!==n.styleID&&(e.dirty=!0,e.localStyleID=n.styleID),!e.dirty&&t)return;const{width:s,height:o}=e.measureText();r.width=i.width=Math.ceil(Math.max(1,s)),r.height=i.height=Math.ceil(Math.max(1,o)),e._loading||(e._loading=!0,yield new Promise(a=>{i.onload=(0,De.Z)(function*(){yield n.onBeforeDraw(),e._loading=!1,r.src=i.src,i.onload=null,i.src="",e.updateTexture(),a()});const l=(new XMLSerializer).serializeToString(e._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(l)}`}))})()}get source(){return this._image}updateTexture(){const{style:t,texture:e,_image:n,resolution:r}=this,{padding:i}=t,{baseTexture:s}=e;e.trim.width=e._frame.width=n.width/r,e.trim.height=e._frame.height=n.height/r,e.trim.x=-i,e.trim.y=-i,e.orig.width=e._frame.width-2*i,e.orig.height=e._frame.height-2*i,this._onTextureUpdate(),s.setRealSize(n.width,n.height,r),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},Ja.defaultDestroyOptions,t),super.destroy(t);const e=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=e,this._svgRoot?.remove(),this._svgRoot=e,this._domElement?.remove(),this._domElement=e,this._foreignObject?.remove(),this._foreignObject=e,this._styleElement?.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const e=Is(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const e=Is(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&((t=t||{})instanceof Bu?(this.ownsStyle=!1,this._style=t):t instanceof Ai?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Bu.from(t)):(this.ownsStyle=!0,this._style=new Bu(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(""===t||null==t?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let zd=Ja;function sy(t,e,n){const r=A(t)||e||n?{next:t,error:e,complete:n}:t;return r?X((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(le(s,l=>{var u;null===(u=r.next)||void 0===u||u.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,l),s.error(l)},()=>{var l,u;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):S}zd.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},zd.defaultMaxWidth=2024,zd.defaultMaxHeight=2024,zd.defaultAutoResolution=!0;var el=z(679);class MG{constructor(){this.onPress=new el.MZ,this.onDown=new el.MZ,this.onUp=new el.MZ,this.onHover=new el.MZ,this.onOut=new el.MZ,this.onUpOut=new el.MZ}connectEvents(e){Mr.any?(e.on("pointerdown",this.processDown,this),e.on("pointerup",this.processUp,this),e.on("pointerupoutside",this.processUpOut,this),e.on("pointerout",this.processOut,this),e.on("pointertap",this.processPress,this),e.on("pointerover",this.processOver,this)):(e.on("mousedown",this.processDown,this),e.on("mouseup",this.processUp,this),e.on("mouseupoutside",this.processUpOut,this),e.on("mouseout",this.processOut,this),e.on("click",this.processPress,this),e.on("mouseover",this.processOver,this))}disconnectEvents(e){Mr.any?(e.off("pointerdown",this.processDown,this),e.off("pointerup",this.processUp,this),e.off("pointerupoutside",this.processUpOut,this),e.off("pointerout",this.processOut,this),e.off("pointertap",this.processPress,this),e.off("pointerover",this.processOver,this)):(e.off("mousedown",this.processDown,this),e.off("mouseup",this.processUp,this),e.off("mouseupoutside",this.processUpOut,this),e.off("mouseout",this.processOut,this),e.off("click",this.processPress,this),e.off("mouseover",this.processOver,this))}processDown(e){this._isDown=!0,this.onDown.emit(this,e),this.down(e)}processUp(e){this._isDown&&(this.onUp.emit(this,e),this.up(e)),this._isDown=!1}processUpOut(e){this._isDown&&(this.onUp.emit(this,e),this.onUpOut.emit(this,e),this.up(e),this.upOut(e)),this._isDown=!1}processOut(e){this._isMouseIn&&(this._isMouseIn=!1,this.onOut.emit(this,e),this.out(e))}processPress(e){this._isDown=!1,this.onPress.emit(this,e),this.press(e)}processOver(e){Mr.any||(this._isMouseIn=!0,this.onHover.emit(this,e),this.hover(e))}down(e){}up(e){}upOut(e){}out(e){}press(e){}hover(e){}get isDown(){return this._isDown}}const BS=(t,e,n=[])=>{const r=Object.getOwnPropertyDescriptors(e);for(let i of n)delete r[i];Object.defineProperties(t,r)},xo=(t,e=[t])=>{const n=Object.getPrototypeOf(t);return null===n?e:xo(n,[...e,n])},US=(t,e,n=[])=>{var r;const i=null!==(r=((...t)=>{if(0===t.length)return;let e;const n=t.map(r=>xo(r));for(;n.every(r=>r.length>0);){const r=n.map(s=>s.pop()),i=r[0];if(!r.every(s=>s===i))break;e=i}return e})(...t))&&void 0!==r?r:Object.prototype,s=Object.create(i),o=xo(i);for(let a of t){let l=xo(a);for(let u=l.length-1;u>=0;u--){let c=l[u];-1===o.indexOf(c)&&(BS(s,c,["constructor",...n]),o.push(c))}}return s.constructor=e,s},oy=t=>t.filter((e,n)=>t.indexOf(e)==n),ay=new Map,NG=t=>ay.get(t),VS=(t,e)=>{var n,r;const i=oy([...Object.getOwnPropertyNames(t),...Object.getOwnPropertyNames(e)]),s={};for(let o of i)s[o]=oy([...null!==(n=t?.[o])&&void 0!==n?n:[],...null!==(r=e?.[o])&&void 0!==r?r:[]]);return s},GS=(t,e)=>{var n,r,i,s;return{property:VS(null!==(n=t?.property)&&void 0!==n?n:{},null!==(r=e?.property)&&void 0!==r?r:{}),method:VS(null!==(i=t?.method)&&void 0!==i?i:{},null!==(s=e?.method)&&void 0!==s?s:{})}},jS=(t,e)=>{var n,r,i,s,o,a;return{class:oy([...null!==(n=t?.class)&&void 0!==n?n:[],...null!==(r=e?.class)&&void 0!==r?r:[]]),static:GS(null!==(i=t?.static)&&void 0!==i?i:{},null!==(s=e?.static)&&void 0!==s?s:{}),instance:GS(null!==(o=t?.instance)&&void 0!==o?o:{},null!==(a=e?.instance)&&void 0!==a?a:{})}},ly=new Map;const zS=(t,e)=>{const n=t.property,r=t.method;if(n)for(let i in n)for(let s of n[i])s(e,i);if(r)for(let i in r)for(let s of r[i])s(e,i,Object.getOwnPropertyDescriptor(e,i))};class WS extends MG{constructor(e){super(),e&&(this.view=e,this.enabled=!0)}set view(e){!!this._view&&this.disconnectEvents(this._view),this._view=e,this.connectEvents(this._view)}get view(){return this._view}set enabled(e){this.view?(this.view.eventMode=e?"static":"auto",this.view.cursor=e?"pointer":"default",!e&&this.isDown&&this.processUp()):console.error("Button view is not set. Please set it before enabling the button.")}get enabled(){return"static"===this.view.eventMode}}function us(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XS(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}!function $S(...t){var e,n,r;const i=t.map(l=>l.prototype);function o(...l){for(const u of t)BS(this,new u(...l))}o.prototype=US(i,o),Object.setPrototypeOf(o,US(t,null,["prototype"]));let a=o;{const l=((...t)=>{const e=((...t)=>{var e;const n=new Set,r=new Set([...t]);for(;r.size>0;)for(let i of r){const l=[...xo(i.prototype).map(u=>u.constructor),...null!==(e=NG(i))&&void 0!==e?e:[]].filter(u=>!n.has(u));for(let u of l)r.add(u);n.add(i),r.delete(i)}return[...n]})(...t).map(n=>ly.get(n)).filter(n=>!!n);return 0==e.length?{}:1==e.length?e[0]:e.reduce((n,r)=>jS(n,r))})(...t);for(let u of null!==(e=l?.class)&&void 0!==e?e:[]){const c=u(a);c&&(a=c)}zS(null!==(n=l?.static)&&void 0!==n?n:{},a),zS(null!==(r=l?.instance)&&void 0!==r?r:{},a.prototype)}return((t,e)=>{ay.set(t,e)})(a,t),a}(Sn,WS);var cy,In,Yt,$t,Or,my,_y,JS,n1,ol,Xu,_r={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},tl={duration:.5,overwrite:!1,delay:0},Nr=1e8,At=1e-8,hy=2*Math.PI,HG=hy/4,VG=0,YS=Math.sqrt,GG=Math.cos,jG=Math.sin,fn=function(e){return"string"==typeof e},qt=function(e){return"function"==typeof e},cs=function(e){return"number"==typeof e},dy=function(e){return typeof e>"u"},Mi=function(e){return"object"==typeof e},tr=function(e){return!1!==e},fy=function(){return typeof window<"u"},Xd=function(e){return qt(e)||fn(e)},qS="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},An=Array.isArray,py=/(?:-?\.?\d|\.)+/gi,ZS=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,nl=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,gy=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,KS=/[+-]=-?[.\d]+/,QS=/[^,'"\[\]\s]+/gi,$G=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,yr={},Yd={},e1=function(e){return(Yd=Eo(e,yr))&&sr},yy=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},qd=function(e,n){return!n&&console.warn(e)},t1=function(e,n){return e&&(yr[e]=n)&&Yd&&(Yd[e]=n)||yr},Hu=function(){return 0},zG={suppressEvents:!0,isStart:!0,kill:!1},Zd={suppressEvents:!0,kill:!1},WG={suppressEvents:!0},vy={},Ls=[],wy={},vr={},xy={},r1=30,Kd=[],by="",Ey=function(e){var r,i,n=e[0];if(Mi(n)||qt(n)||(e=[e]),!(r=(n._gsap||{}).harness)){for(i=Kd.length;i--&&!Kd[i].targetTest(n););r=Kd[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new R1(e[i],r)))||e.splice(i,1);return e},bo=function(e){return e._gsap||Ey(kr(e))[0]._gsap},i1=function(e,n,r){return(r=e[n])&&qt(r)?e[n]():dy(r)&&e.getAttribute&&e.getAttribute(n)||r},nr=function(e,n){return(e=e.split(",")).forEach(n)||e},en=function(e){return Math.round(1e5*e)/1e5||0},wn=function(e){return Math.round(1e7*e)/1e7||0},rl=function(e,n){var r=n.charAt(0),i=parseFloat(n.substr(2));return e=parseFloat(e),"+"===r?e+i:"-"===r?e-i:"*"===r?e*i:e/i},XG=function(e,n){for(var r=n.length,i=0;e.indexOf(n[i])<0&&++i<r;);return i<r},Qd=function(){var r,i,e=Ls.length,n=Ls.slice(0);for(wy={},Ls.length=0,r=0;r<e;r++)(i=n[r])&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},s1=function(e,n,r,i){Ls.length&&!In&&Qd(),e.render(n,r,i||In&&n<0&&(e._initted||e._startAt)),Ls.length&&!In&&Qd()},o1=function(e){var n=parseFloat(e);return(n||0===n)&&(e+"").match(QS).length<2?n:fn(e)?e.trim():e},a1=function(e){return e},Fr=function(e,n){for(var r in n)r in e||(e[r]=n[r]);return e},Eo=function(e,n){for(var r in n)e[r]=n[r];return e},l1=function t(e,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(e[r]=Mi(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},Jd=function(e,n){var i,r={};for(i in e)i in n||(r[i]=e[i]);return r},Vu=function(e){var n=e.parent||$t,r=e.keyframes?function(e){return function(n,r){for(var i in r)i in n||"duration"===i&&e||"ease"===i||(n[i]=r[i])}}(An(e.keyframes)):Fr;if(tr(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},u1=function(e,n,r,i,s){void 0===r&&(r="_first"),void 0===i&&(i="_last");var a,o=e[i];if(s)for(a=n[s];o&&o[s]>a;)o=o._prev;return o?(n._next=o._next,o._next=n):(n._next=e[r],e[r]=n),n._next?n._next._prev=n:e[i]=n,n._prev=o,n.parent=n._dp=e,n},ef=function(e,n,r,i){void 0===r&&(r="_first"),void 0===i&&(i="_last");var s=n._prev,o=n._next;s?s._next=o:e[r]===n&&(e[r]=o),o?o._prev=s:e[i]===n&&(e[i]=s),n._next=n._prev=n.parent=null},ks=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},To=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},Ty=function(e,n,r,i){return e._startAt&&(In?e._startAt.revert(Zd):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,i))},KG=function t(e){return!e||e._ts&&t(e.parent)},c1=function(e){return e._repeat?il(e._tTime,e=e.duration()+e._rDelay)*e:0},il=function(e,n){var r=Math.floor(e/=n);return e&&r===e?r-1:r},tf=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},nf=function(e){return e._end=wn(e._start+(e._tDur/Math.abs(e._ts||e._rts||At)||0))},rf=function(e,n){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=wn(r._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),nf(e),r._dirty||To(r,e)),e},h1=function(e,n){var r;if((n._time||!n._dur&&n._initted||n._start<e._time&&(n._dur||!n.add))&&(r=tf(e.rawTime(),n),(!n._dur||ju(0,n.totalDuration(),r)-n._tTime>At)&&n.render(r,!0)),To(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-At}},Pi=function(e,n,r,i){return n.parent&&ks(n),n._start=wn((cs(r)?r:r||e!==$t?Lr(e,r,n):e._time)+n._delay),n._end=wn(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),u1(e,n,"_first","_last",e._sort?"_start":0),Dy(n)||(e._recent=n),i||h1(e,n),e._ts<0&&rf(e,e._tTime),e},d1=function(e,n){return(yr.ScrollTrigger||yy("scrollTrigger",n))&&yr.ScrollTrigger.create(n,e)},f1=function(e,n,r,i,s){return Oy(e,n,s),e._initted?!r&&e._pt&&!In&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&n1!==wr.frame?(Ls.push(e),e._lazy=[s,i],1):void 0:1},QG=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},Dy=function(e){var n=e.data;return"isFromStart"===n||"isStart"===n},sl=function(e,n,r,i){var s=e._repeat,o=wn(n)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:wn(o*(s+1)+e._rDelay*s):o,a>0&&!i&&rf(e,e._tTime=e._tDur*a),e.parent&&nf(e),r||To(e.parent,e),e},p1=function(e){return e instanceof rr?To(e):sl(e,e._dur)},t4={_start:0,endTime:Hu,totalDuration:Hu},Lr=function t(e,n,r){var a,l,u,i=e.labels,s=e._recent||t4,o=e.duration()>=Nr?s.endTime(!1):e._dur;return fn(n)&&(isNaN(n)||n in i)?(l=n.charAt(0),u="%"===n.substr(-1),a=n.indexOf("="),"<"===l||">"===l?(a>=0&&(n=n.replace(/=/,"")),("<"===l?s._start:s.endTime(s._repeat>=0))+(parseFloat(n.substr(1))||0)*(u?(a<0?s:r).totalDuration()/100:1)):a<0?(n in i||(i[n]=o),i[n]):(l=parseFloat(n.charAt(a-1)+n.substr(a+1)),u&&r&&(l=l/100*(An(r)?r[0]:r).totalDuration()),a>1?t(e,n.substr(0,a-1),r)+l:o+l)):null==n?o:+n},Gu=function(e,n,r){var a,l,i=cs(n[1]),s=(i?2:1)+(e<2?0:1),o=n[s];if(i&&(o.duration=n[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=tr(l.vars.inherit)&&l.parent;o.immediateRender=tr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=n[s-1]}return new on(n[0],o,n[s+1])},Bs=function(e,n){return e||0===e?n(e):n},ju=function(e,n,r){return r<e?e:r>n?n:r},Mn=function(e,n){return fn(e)&&(n=$G.exec(e))?n[1]:""},Cy=[].slice,g1=function(e,n){return e&&Mi(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&Mi(e[0]))&&!e.nodeType&&e!==Or},kr=function(e,n,r){return Yt&&!n&&Yt.selector?Yt.selector(e):!fn(e)||r||!my&&al()?An(e)?function(e,n,r){return void 0===r&&(r=[]),e.forEach(function(i){var s;return fn(i)&&!n||g1(i,1)?(s=r).push.apply(s,kr(i)):r.push(i)})||r}(e,r):g1(e)?Cy.call(e,0):e?[e]:[]:Cy.call((n||_y).querySelectorAll(e),0)},Sy=function(e){return e=kr(e)[0]||qd("Invalid scope")||{},function(n){var r=e.current||e.nativeElement||e;return kr(n,r.querySelectorAll?r:r===e?qd("Invalid scope")||_y.createElement("div"):e)}},m1=function(e){return e.sort(function(){return.5-Math.random()})},_1=function(e){if(qt(e))return e;var n=Mi(e)?e:{each:e},r=Do(n.ease),i=n.from||0,s=parseFloat(n.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,u=n.axis,c=i,h=i;return fn(i)?c=h={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(c=i[0],h=i[1]),function(d,f,p){var y,v,w,E,M,H,k,F,V,g=(p||n).length,m=o[g];if(!m){if(!(V="auto"===n.grid?0:(n.grid||[1,Nr])[1])){for(k=-Nr;k<(k=p[V++].getBoundingClientRect().left)&&V<g;);V--}for(m=o[g]=[],y=l?Math.min(V,g)*c-.5:i%V,v=V===Nr?0:l?g*h/V-.5:i/V|0,k=0,F=Nr,H=0;H<g;H++)w=H%V-y,E=v-(H/V|0),m[H]=M=u?Math.abs("y"===u?E:w):YS(w*w+E*E),M>k&&(k=M),M<F&&(F=M);"random"===i&&m1(m),m.max=k-F,m.min=F,m.v=g=(parseFloat(n.amount)||parseFloat(n.each)*(V>g?g-1:u?"y"===u?g/V:V:Math.max(V,g/V))||0)*("edges"===i?-1:1),m.b=g<0?s-g:s,m.u=Mn(n.amount||n.each)||0,r=r&&g<0?A1(r):r}return g=(m[d]-m.min)/m.max||0,wn(m.b+(r?r(g):g)*m.v)+m.u}},Iy=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=wn(Math.round(parseFloat(r)/e)*e*n);return(i-i%1)/n+(cs(r)?0:Mn(r))}},y1=function(e,n){var i,s,r=An(e);return!r&&Mi(e)&&(i=r=e.radius||Nr,e.values?(e=kr(e.values),(s=!cs(e[0]))&&(i*=i)):e=Iy(e.increment)),Bs(n,r?qt(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var d,f,a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),u=Nr,c=0,h=e.length;h--;)(d=s?(d=e[h].x-a)*d+(f=e[h].y-l)*f:Math.abs(e[h]-a))<u&&(u=d,c=h);return c=!i||u<=i?e[c]:o,s||c===o||cs(o)?c:c+Mn(o)}:Iy(e))},v1=function(e,n,r,i){return Bs(An(e)?!n:!0===r?!!(r=0):!i,function(){return An(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(n-e+.99*r))/r)*r*i)/i})},w1=function(e,n,r){return Bs(r,function(i){return e[~~n(i)]})},$u=function(e){for(var i,s,o,a,n=0,r="";~(i=e.indexOf("random(",n));)o=e.indexOf(")",i),a="["===e.charAt(i+7),s=e.substr(i+7,o-i-7).match(a?QS:py),r+=e.substr(n,i-n)+v1(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),n=o+1;return r+e.substr(n,e.length-n)},x1=function(e,n,r,i,s){var o=n-e,a=i-r;return Bs(s,function(l){return r+((l-e)/o*a||0)})},b1=function(e,n,r){var o,a,l,i=e.labels,s=Nr;for(o in i)(a=i[o]-n)<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Br=function(e,n,r){var l,u,c,i=e.vars,s=i[n],o=Yt,a=e._ctx;if(s)return l=i[n+"Params"],u=i.callbackScope||e,r&&Ls.length&&Qd(),a&&(Yt=a),c=l?s.apply(u,l):s.call(u),Yt=o,c},zu=function(e){return ks(e),e.scrollTrigger&&e.scrollTrigger.kill(!!In),e.progress()<1&&Br(e,"onInterrupt"),e},E1=[],T1=function(e){if(fy()&&e){var n=(e=!e.name&&e.default||e).name,r=qt(e),i=n&&!r&&e.init?function(){this._props=[]}:e,s={init:Hu,render:ky,add:Ry,kill:D4,modifier:T4,rawVars:0},o={targetTest:0,get:0,getSetter:Ly,aliases:{},register:0};if(al(),e!==i){if(vr[n])return;Fr(i,Fr(Jd(e,s),o)),Eo(i.prototype,Eo(s,Jd(e,o))),vr[i.prop=n]=i,e.targetTest&&(Kd.push(i),vy[n]=1),n=("css"===n?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}t1(n,i),e.register&&e.register(sr,i,ir)}else e&&E1.push(e)},Mt=255,Wu={aqua:[0,Mt,Mt],lime:[0,Mt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Mt],navy:[0,0,128],white:[Mt,Mt,Mt],olive:[128,128,0],yellow:[Mt,Mt,0],orange:[Mt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Mt,0,0],pink:[Mt,192,203],cyan:[0,Mt,Mt],transparent:[Mt,Mt,Mt,0]},Ay=function(e,n,r){return(6*(e+=e<0?1:e>1?-1:0)<1?n+(r-n)*e*6:e<.5?r:3*e<2?n+(r-n)*(2/3-e)*6:n)*Mt+.5|0},D1=function(e,n,r){var s,o,a,l,u,c,h,d,f,p,i=e?cs(e)?[e>>16,e>>8&Mt,e&Mt]:0:Wu.black;if(!i){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),Wu[e])i=Wu[e];else if("#"===e.charAt(0)){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(i=parseInt(e.substr(1,6),16))>>16,i>>8&Mt,i&Mt,parseInt(e.substr(7),16)/255];i=[(e=parseInt(e.substr(1),16))>>16,e>>8&Mt,e&Mt]}else if("hsl"===e.substr(0,3))if(i=p=e.match(py),n){if(~e.indexOf("="))return i=e.match(ZS),r&&i.length<4&&(i[3]=1),i}else l=+i[0]%360/360,u=+i[1]/100,s=2*(c=+i[2]/100)-(o=c<=.5?c*(u+1):c+u-c*u),i.length>3&&(i[3]*=1),i[0]=Ay(l+1/3,s,o),i[1]=Ay(l,s,o),i[2]=Ay(l-1/3,s,o);else i=e.match(py)||Wu.transparent;i=i.map(Number)}return n&&!p&&(s=i[0]/Mt,o=i[1]/Mt,a=i[2]/Mt,c=((h=Math.max(s,o,a))+(d=Math.min(s,o,a)))/2,h===d?l=u=0:(f=h-d,u=c>.5?f/(2-h-d):f/(h+d),l=h===s?(o-a)/f+(o<a?6:0):h===o?(a-s)/f+2:(s-o)/f+4,l*=60),i[0]=~~(l+.5),i[1]=~~(100*u+.5),i[2]=~~(100*c+.5)),r&&i.length<4&&(i[3]=1),i},C1=function(e){var n=[],r=[],i=-1;return e.split(Us).forEach(function(s){var o=s.match(nl)||[];n.push.apply(n,o),r.push(i+=o.length+1)}),n.c=r,n},S1=function(e,n,r){var l,u,c,h,i="",s=(e+i).match(Us),o=n?"hsla(":"rgba(",a=0;if(!s)return e;if(s=s.map(function(d){return(d=D1(d,n,1))&&o+(n?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),r&&(c=C1(e),(l=r.c).join(i)!==c.c.join(i)))for(h=(u=e.replace(Us,"1").split(nl)).length-1;a<h;a++)i+=u[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:r).shift());if(!u)for(h=(u=e.split(Us)).length-1;a<h;a++)i+=u[a]+s[a];return i+u[h]},Us=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in Wu)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),c4=/hsl[a]?\(/,I1=function(e){var r,n=e.join(" ");if(Us.lastIndex=0,Us.test(n))return r=c4.test(n),e[1]=S1(e[1],r),e[0]=S1(e[0],r,C1(e[1])),!0},wr=function(){var l,u,c,h,d,f,t=Date.now,e=500,n=33,r=t(),i=r,s=1e3/240,o=s,a=[],p=function g(m){var w,E,M,H,y=t()-i,v=!0===m;if(y>e&&(r+=y-n),((w=(M=(i+=y)-r)-o)>0||v)&&(H=++h.frame,d=M-1e3*h.time,h.time=M/=1e3,o+=w+(w>=s?4:s-w),E=1),v||(l=u(g)),E)for(f=0;f<a.length;f++)a[f](M,d,H,m)};return h={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(m){return d/(1e3/(m||60))},wake:function(){JS&&(!my&&fy()&&(Or=my=window,_y=Or.document||{},yr.gsap=sr,(Or.gsapVersions||(Or.gsapVersions=[])).push(sr.version),e1(Yd||Or.GreenSockGlobals||!Or.gsap&&Or||{}),c=Or.requestAnimationFrame,E1.forEach(T1)),l&&h.sleep(),u=c||function(m){return setTimeout(m,o-1e3*h.time+1|0)},Xu=1,p(2))},sleep:function(){(c?Or.cancelAnimationFrame:clearTimeout)(l),Xu=0,u=Hu},lagSmoothing:function(m,y){e=m||1/0,n=Math.min(y||33,e)},fps:function(m){o=1e3*h.time+(s=1e3/(m||240))},add:function(m,y,v){var w=y?function(E,M,H,k){m(E,M,H,k),h.remove(w)}:m;return h.remove(m),a[v?"unshift":"push"](w),al(),w},remove:function(m,y){~(y=a.indexOf(m))&&a.splice(y,1)&&f>=y&&f--},_listeners:a}}(),al=function(){return!Xu&&wr.wake()},dt={},h4=/^[\d.\-M][\d.\-,\s]/,d4=/["']/g,f4=function(e){for(var a,l,u,n={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),n[i]=isNaN(u)?u.replace(d4,"").trim():+u,i=l.substr(a+1).trim();return n},A1=function(e){return function(n){return 1-e(1-n)}},M1=function t(e,n){for(var i,r=e._first;r;)r instanceof rr?t(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?t(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},Do=function(e,n){return e&&(qt(e)?e:dt[e]||function(e){var n=(e+"").split("("),r=dt[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[f4(n[1])]:function(e){var n=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",n);return e.substring(n,~i&&i<r?e.indexOf(")",r+1):r)}(e).split(",").map(o1)):dt._CE&&h4.test(e)?dt._CE("",e):r}(e))||n},Co=function(e,n,r,i){void 0===r&&(r=function(l){return 1-n(1-l)}),void 0===i&&(i=function(l){return l<.5?n(2*l)/2:1-n(2*(1-l))/2});var o,s={easeIn:n,easeOut:r,easeInOut:i};return nr(e,function(a){for(var l in dt[a]=yr[a]=s,dt[o=a.toLowerCase()]=r,s)dt[o+("easeIn"===l?".in":"easeOut"===l?".out":".inOut")]=dt[a+"."+l]=s[l]}),s},P1=function(e){return function(n){return n<.5?(1-e(1-2*n))/2:.5+e(2*(n-.5))/2}},My=function t(e,n,r){var i=n>=1?n:1,s=(r||(e?.3:.45))/(n<1?n:1),o=s/hy*(Math.asin(1/i)||0),a=function(c){return 1===c?1:i*Math.pow(2,-10*c)*jG((c-o)*s)+1},l="out"===e?a:"in"===e?function(u){return 1-a(1-u)}:P1(a);return s=hy/s,l.config=function(u,c){return t(e,u,c)},l},Py=function t(e,n){void 0===n&&(n=1.70158);var r=function(o){return o?--o*o*((n+1)*o+n)+1:0},i="out"===e?r:"in"===e?function(s){return 1-r(1-s)}:P1(r);return i.config=function(s){return t(e,s)},i};nr("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;Co(t+",Power"+(n-1),e?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(2*r,n)/2:1-Math.pow(2*(1-r),n)/2})}),dt.Linear.easeNone=dt.none=dt.Linear.easeIn,Co("Elastic",My("in"),My("out"),My()),function(t,e){var s=function(a){return a<.36363636363636365?t*a*a:a<.7272727272727273?t*Math.pow(a-1.5/e,2)+.75:a<.9090909090909092?t*(a-=2.25/e)*a+.9375:t*Math.pow(a-2.625/e,2)+.984375};Co("Bounce",function(o){return 1-s(1-o)},s)}(7.5625,2.75),Co("Expo",function(t){return t?Math.pow(2,10*(t-1)):0}),Co("Circ",function(t){return-(YS(1-t*t)-1)}),Co("Sine",function(t){return 1===t?1:1-GG(t*HG)}),Co("Back",Py("in"),Py("out"),Py()),dt.SteppedEase=dt.steps=yr.SteppedEase={config:function(e,n){void 0===e&&(e=1);var r=1/e,i=e+(n?0:1),s=n?1:0;return function(a){return((i*ju(0,.99999999,a)|0)+s)*r}}},tl.ease=dt["quad.out"],nr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return by+=t+","+t+"Params,"});var R1=function(e,n){this.id=VG++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:i1,this.set=n?n.getSetter:Ly},Yu=function(){function t(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,sl(this,+n.duration,1,1),this.data=n.data,Yt&&(this._ctx=Yt,Yt.data.push(this)),Xu||wr.wake()}var e=t.prototype;return e.delay=function(r){return r||0===r?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,sl(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(al(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(rf(this,r),!s._dp||s.parent||h1(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Pi(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===At||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),s1(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+c1(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?r:1-r)+c1(this),i):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?il(this._tTime,s)+1:1},e.timeScale=function(r){if(!arguments.length)return this._rts===-At?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?tf(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-At?0:this._rts,this.totalTime(ju(-Math.abs(this._delay),this._tDur,i),!0),nf(this),function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e}(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(al(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==At&&(this._tTime-=At)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Pi(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(tr(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?tf(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){void 0===r&&(r=WG);var i=In;return In=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),"nested"!==this.data&&!1!==r.kill&&this.kill(),In=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(i._ts||1),i=i._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,p1(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,p1(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(Lr(this,r),tr(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,tr(i))},e.play=function(r,i){return null!=r&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return null!=r&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return null!=r&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-At:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-At,this},e.isActive=function(){var s,r=this.parent||this._dp,i=this._start;return!(r&&!(this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-At))},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),"onUpdate"===r&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=qt(r)?r:a1,a=function(){var u=i.then;i.then=null,qt(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=u),s(o),i.then=u};i._initted&&1===i.totalProgress()&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){zu(this)},t}();Fr(Yu.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-At,_prom:0,_ps:!1,_rts:1});var rr=function(t){function e(r,i){var s;return void 0===r&&(r={}),(s=t.call(this,r)||this).labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=tr(r.sortChildren),$t&&Pi(r.parent||$t,us(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&d1(us(s),r.scrollTrigger),s}XS(e,t);var n=e.prototype;return n.to=function(i,s,o){return Gu(0,arguments,this),this},n.from=function(i,s,o){return Gu(1,arguments,this),this},n.fromTo=function(i,s,o,a){return Gu(2,arguments,this),this},n.set=function(i,s,o){return s.duration=0,s.parent=this,Vu(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new on(i,s,Lr(this,o),1),this},n.call=function(i,s,o){return Pi(this,on.delayedCall(0,i,s),o)},n.staggerTo=function(i,s,o,a,l,u,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=u,o.onCompleteParams=c,o.parent=this,new on(i,o,Lr(this,l)),this},n.staggerFrom=function(i,s,o,a,l,u,c){return o.runBackwards=1,Vu(o).immediateRender=tr(o.immediateRender),this.staggerTo(i,s,o,a,l,u,c)},n.staggerFromTo=function(i,s,o,a,l,u,c,h){return a.startAt=o,Vu(a).immediateRender=tr(a.immediateRender),this.staggerTo(i,s,a,l,u,c,h)},n.render=function(i,s,o){var d,f,p,g,m,y,v,w,E,M,H,k,a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,c=i<=0?0:wn(i),h=this._zTime<0!=i<0&&(this._initted||!u);if(this!==$t&&c>l&&i>=0&&(c=l),c!==this._tTime||o||h){if(a!==this._time&&u&&(c+=this._time-a,i+=this._time-a),d=c,E=this._start,y=!(w=this._ts),h&&(u||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(H=this._yoyo,m=u+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(100*m+i,s,o);if(d=wn(c%m),c===l?(g=this._repeat,d=u):((g=~~(c/m))&&g===c/m&&(d=u,g--),d>u&&(d=u)),M=il(this._tTime,m),!a&&this._tTime&&M!==g&&this._tTime-M*m-this._dur<=0&&(M=g),H&&1&g&&(d=u-d,k=1),g!==M&&!this._lock){var F=H&&1&M,V=F===(H&&1&g);if(g<M&&(F=!F),a=F?0:c%u?u:c,this._lock=1,this.render(a||(k?0:wn(g*m)),s,!u)._lock=0,this._tTime=c,!s&&this.parent&&Br(this,"onRepeat"),this.vars.repeatRefresh&&!k&&(this.invalidate()._lock=1),a&&a!==this._time||y!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,V&&(this._lock=2,this.render(a=F?u:-1e-4,!0),this.vars.repeatRefresh&&!k&&this.invalidate()),this._lock=0,!this._ts&&!y)return this;M1(this,k)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(v=function(e,n,r){var i;if(r>n)for(i=e._first;i&&i._start<=r;){if("isPause"===i.data&&i._start>n)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if("isPause"===i.data&&i._start<n)return i;i=i._prev}}(this,wn(a),wn(d)),v&&(c-=d-(d=v._start))),this._tTime=c,this._time=d,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&d&&!s&&!g&&(Br(this,"onStart"),this._tTime!==c))return this;if(d>=a&&i>=0)for(f=this._first;f;){if(p=f._next,(f._act||d>=f._start)&&f._ts&&v!==f){if(f.parent!==this)return this.render(i,s,o);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,s,o),d!==this._time||!this._ts&&!y){v=0,p&&(c+=this._zTime=-At);break}}f=p}else{f=this._last;for(var W=i<0?i:d;f;){if(p=f._prev,(f._act||W<=f._end)&&f._ts&&v!==f){if(f.parent!==this)return this.render(i,s,o);if(f.render(f._ts>0?(W-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(W-f._start)*f._ts,s,o||In&&(f._initted||f._startAt)),d!==this._time||!this._ts&&!y){v=0,p&&(c+=this._zTime=W?-At:At);break}}f=p}}if(v&&!s&&(this.pause(),v.render(d>=a?0:-At)._zTime=d>=a?1:-1,this._ts))return this._start=E,nf(this),this.render(i,s,o);this._onUpdate&&!s&&Br(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&a)&&(E===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((i||!u)&&(c===l&&this._ts>0||!c&&this._ts<0)&&ks(this,1),!s&&(!(i<0)||a)&&(c||a||!l)&&(Br(this,c===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(i,s){var o=this;if(cs(s)||(s=Lr(this,s,i)),!(i instanceof Yu)){if(An(i))return i.forEach(function(a){return o.add(a,s)}),this;if(fn(i))return this.addLabel(i,s);if(!qt(i))return this;i=on.delayedCall(0,i)}return this!==i?Pi(this,i,s):this},n.getChildren=function(i,s,o,a){void 0===i&&(i=!0),void 0===s&&(s=!0),void 0===o&&(o=!0),void 0===a&&(a=-Nr);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof on?s&&l.push(u):(o&&l.push(u),i&&l.push.apply(l,u.getChildren(!0,s,o)))),u=u._next;return l},n.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},n.remove=function(i){return fn(i)?this.removeLabel(i):qt(i)?this.killTweensOf(i):(ef(this,i),i===this._recent&&(this._recent=this._last),To(this))},n.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=wn(wr.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),t.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},n.addLabel=function(i,s){return this.labels[i]=Lr(this,s),this},n.removeLabel=function(i){return delete this.labels[i],this},n.addPause=function(i,s,o){var a=on.delayedCall(0,s||Hu,o);return a.data="isPause",this._hasPause=1,Pi(this,a,Lr(this,i))},n.removePause=function(i){var s=this._first;for(i=Lr(this,i);s;)s._start===i&&"isPause"===s.data&&ks(s),s=s._next},n.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)Hs!==a[l]&&a[l].kill(i,s);return this},n.getTweensOf=function(i,s){for(var c,o=[],a=kr(i),l=this._first,u=cs(s);l;)l instanceof on?XG(l._targets,a)&&(u?(!Hs||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(c=l.getTweensOf(a,s)).length&&o.push.apply(o,c),l=l._next;return o},n.tweenTo=function(i,s){s=s||{};var f,o=this,a=Lr(o,i),u=s.startAt,c=s.onStart,h=s.onStartParams,d=s.immediateRender,p=on.to(o,Fr({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale())||At,onStart:function(){if(o.pause(),!f){var m=s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale());p._dur!==m&&sl(p,m,0,1).render(p._time,!0,!0),f=1}c&&c.apply(p,h||[])}},s));return d?p.render(0):p},n.tweenFromTo=function(i,s,o){return this.tweenTo(s,Fr({startAt:{time:Lr(this,i)}},o))},n.recent=function(){return this._recent},n.nextLabel=function(i){return void 0===i&&(i=this._time),b1(this,Lr(this,i))},n.previousLabel=function(i){return void 0===i&&(i=this._time),b1(this,Lr(this,i),1)},n.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+At)},n.shiftChildren=function(i,s,o){void 0===o&&(o=0);for(var u,a=this._first,l=this.labels;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(u in l)l[u]>=o&&(l[u]+=i);return To(this)},n.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return t.prototype.invalidate.call(this,i)},n.clear=function(i){void 0===i&&(i=!0);for(var o,s=this._first;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),To(this)},n.totalDuration=function(i){var u,c,h,s=0,o=this,a=o._last,l=Nr;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(h=o.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),(c=a._start)>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Pi(o,a,c-a._delay,1)._lock=0):l=c,c<0&&a._ts&&(s-=c,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=u;sl(o,o===$t&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if($t._ts&&(s1($t,tf(i,$t)),n1=wr.frame),wr.frame>=r1){r1+=_r.autoSleep||120;var s=$t._first;if((!s||!s._ts)&&_r.autoSleep&&wr._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||wr.sleep()}}},e}(Yu);Fr(rr.prototype,{_lock:0,_hasPause:0,_forcing:0});var Hs,Ny,m4=function(e,n,r,i,s,o,a){var h,d,f,p,g,m,y,v,l=new ir(this._pt,e,n,0,1,B1,null,s),u=0,c=0;for(l.b=r,l.e=i,r+="",(y=~(i+="").indexOf("random("))&&(i=$u(i)),o&&(o(v=[r,i],e,n),r=v[0],i=v[1]),d=r.match(gy)||[];h=gy.exec(i);)p=h[0],g=i.substring(u,h.index),f?f=(f+1)%5:"rgba("===g.substr(-5)&&(f=1),p!==d[c++]&&(m=parseFloat(d[c-1])||0,l._pt={_next:l._pt,p:g||1===c?g:",",s:m,c:"="===p.charAt(1)?rl(m,p)-m:parseFloat(p)-m,m:f&&f<4?Math.round:0},u=gy.lastIndex);return l.c=u<i.length?i.substring(u,i.length):"",l.fp=a,(KS.test(i)||y)&&(l.e=0),this._pt=l,l},Ry=function(e,n,r,i,s,o,a,l,u,c){qt(i)&&(i=i(s||0,e,o));var p,h=e[n],d="get"!==r?r:qt(h)?u?e[n.indexOf("set")||!qt(e["get"+n.substr(3)])?n:"get"+n.substr(3)](u):e[n]():h,f=qt(h)?u?x4:L1:Fy;if(fn(i)&&(~i.indexOf("random(")&&(i=$u(i)),"="===i.charAt(1)&&((p=rl(d,i)+(Mn(d)||0))||0===p)&&(i=p)),!c||d!==i||Ny)return isNaN(d*i)||""===i?(!h&&!(n in e)&&yy(n,i),m4.call(this,e,n,d,i,f,l||_r.stringFilter,u)):(p=new ir(this._pt,e,n,+d||0,i-(d||0),"boolean"==typeof h?E4:k1,0,f),u&&(p.fp=u),a&&p.modifier(a,this,e),this._pt=p)},N1=function(e,n,r,i,s,o){var a,l,u,c;if(vr[e]&&!1!==(a=new vr[e]).init(s,a.rawVars?n[e]:function(e,n,r,i,s){if(qt(e)&&(e=qu(e,s,n,r,i)),!Mi(e)||e.style&&e.nodeType||An(e)||qS(e))return fn(e)?qu(e,s,n,r,i):e;var a,o={};for(a in e)o[a]=qu(e[a],s,n,r,i);return o}(n[e],i,s,o,r),r,i,o)&&(r._pt=l=new ir(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==ol))for(u=r._ptLookup[r._targets.indexOf(s)],c=a._props.length;c--;)u[a._props[c]]=l;return a},Oy=function t(e,n,r){var k,F,V,W,Q,Ne,Y,K,Ue,Ae,Se,tt,rt,i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,u=i.onUpdate,c=i.onUpdateParams,h=i.callbackScope,d=i.runBackwards,f=i.yoyoEase,p=i.keyframes,g=i.autoRevert,m=e._dur,y=e._startAt,v=e._targets,w=e.parent,E=w&&"nested"===w.data?w.vars.targets:v,M="auto"===e._overwrite&&!cy,H=e.timeline;if(H&&(!p||!s)&&(s="none"),e._ease=Do(s,tl.ease),e._yEase=f?A1(Do(!0===f?s:f,tl.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!H&&!!i.runBackwards,!H||p&&!i.stagger){if(tt=(K=v[0]?bo(v[0]).harness:0)&&i[K.prop],k=Jd(i,vy),y&&(y._zTime<0&&y.progress(1),n<0&&d&&a&&!g?y.render(-1,!0):y.revert(d&&m?Zd:zG),y._lazy=0),o){if(ks(e._startAt=on.set(v,Fr({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!y&&tr(l),startAt:null,delay:0,onUpdate:u,onUpdateParams:c,callbackScope:h,stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(In||!a&&!g)&&e._startAt.revert(Zd),a&&m&&n<=0&&r<=0)return void(n&&(e._zTime=n))}else if(d&&m&&!y)if(n&&(a=!1),V=Fr({overwrite:!1,data:"isFromStart",lazy:a&&!y&&tr(l),immediateRender:a,stagger:0,parent:w},k),tt&&(V[K.prop]=tt),ks(e._startAt=on.set(v,V)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(In?e._startAt.revert(Zd):e._startAt.render(-1,!0)),e._zTime=n,a){if(!n)return}else t(e._startAt,At,At);for(e._pt=e._ptCache=0,l=m&&tr(l)||l&&!m,F=0;F<v.length;F++){if(Y=(Q=v[F])._gsap||Ey(v)[F]._gsap,e._ptLookup[F]=Ae={},wy[Y.id]&&Ls.length&&Qd(),Se=E===v?F:E.indexOf(Q),K&&!1!==(Ue=new K).init(Q,tt||k,e,Se,E)&&(e._pt=W=new ir(e._pt,Q,Ue.name,0,1,Ue.render,Ue,0,Ue.priority),Ue._props.forEach(function(xr){Ae[xr]=W}),Ue.priority&&(Ne=1)),!K||tt)for(V in k)vr[V]&&(Ue=N1(V,k,e,Se,Q,E))?Ue.priority&&(Ne=1):Ae[V]=W=Ry.call(e,Q,V,"get",k[V],Se,E,0,i.stringFilter);e._op&&e._op[F]&&e.kill(Q,e._op[F]),M&&e._pt&&(Hs=e,$t.killTweensOf(Q,Ae,e.globalTime(n)),rt=!e.parent,Hs=0),e._pt&&l&&(wy[Y.id]=1)}Ne&&U1(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!rt,p&&n<=0&&H.render(Nr,!0,!0)},w4=function(e,n,r,i){var o,a,s=n.ease||i||"power1.inOut";if(An(n))a=r[e]||(r[e]=[]),n.forEach(function(l,u){return a.push({t:u/(n.length-1)*100,v:l,e:s})});else for(o in n)a=r[o]||(r[o]=[]),"ease"===o||a.push({t:parseFloat(e),v:n[o],e:s})},qu=function(e,n,r,i,s){return qt(e)?e.call(n,r,i,s):fn(e)&&~e.indexOf("random(")?$u(e):e},O1=by+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",F1={};nr(O1+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return F1[t]=1});var on=function(t){function e(r,i,s,o){var a;"number"==typeof i&&(s.duration=i,i=s,s=null);var E,M,H,k,F,V,W,Q,l=(a=t.call(this,o?i:Vu(i))||this).vars,u=l.duration,c=l.delay,h=l.immediateRender,d=l.stagger,f=l.overwrite,p=l.keyframes,g=l.defaults,m=l.scrollTrigger,y=l.yoyoEase,v=i.parent||$t,w=(An(r)||qS(r)?cs(r[0]):"length"in i)?[r]:kr(r);if(a._targets=w.length?Ey(w):qd("GSAP target "+r+" not found. https://greensock.com",!_r.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,p||d||Xd(u)||Xd(c)){if(i=a.vars,(E=a.timeline=new rr({data:"nested",defaults:g||{},targets:v&&"nested"===v.data?v.vars.targets:w})).kill(),E.parent=E._dp=us(a),E._start=0,d||Xd(u)||Xd(c)){if(k=w.length,W=d&&_1(d),Mi(d))for(F in d)~O1.indexOf(F)&&(Q||(Q={}),Q[F]=d[F]);for(M=0;M<k;M++)(H=Jd(i,F1)).stagger=0,y&&(H.yoyoEase=y),Q&&Eo(H,Q),V=w[M],H.duration=+qu(u,us(a),M,V,w),H.delay=(+qu(c,us(a),M,V,w)||0)-a._delay,!d&&1===k&&H.delay&&(a._delay=c=H.delay,a._start+=c,H.delay=0),E.to(V,H,W?W(M,V,w):0),E._ease=dt.none;E.duration()?u=c=0:a.timeline=0}else if(p){Vu(Fr(E.vars.defaults,{ease:"none"})),E._ease=Do(p.ease||i.ease||"none");var Y,K,Ue,Ne=0;if(An(p))p.forEach(function(Ae){return E.to(w,Ae,">")}),E.duration();else{for(F in H={},p)"ease"===F||"easeEach"===F||w4(F,p[F],H,p.easeEach);for(F in H)for(Y=H[F].sort(function(Ae,Se){return Ae.t-Se.t}),Ne=0,M=0;M<Y.length;M++)(Ue={ease:(K=Y[M]).e,duration:(K.t-(M?Y[M-1].t:0))/100*u})[F]=K.v,E.to(w,Ue,Ne),Ne+=Ue.duration;E.duration()<u&&E.to({},{duration:u-E.duration()})}}u||a.duration(u=E.duration())}else a.timeline=0;return!0===f&&!cy&&(Hs=us(a),$t.killTweensOf(w),Hs=0),Pi(v,us(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(h||!u&&!p&&a._start===wn(v._time)&&tr(h)&&KG(us(a))&&"nested"!==v.data)&&(a._tTime=-At,a.render(Math.max(0,-c)||0)),m&&d1(us(a),m),a}XS(e,t);var n=e.prototype;return n.render=function(i,s,o){var d,f,p,g,m,y,v,w,E,a=this._time,l=this._tDur,u=this._dur,c=i<0,h=i>l-At&&!c?l:i<At?0:i;if(u){if(h!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(d=h,w=this.timeline,this._repeat){if(g=u+this._rDelay,this._repeat<-1&&c)return this.totalTime(100*g+i,s,o);if(d=wn(h%g),h===l?(p=this._repeat,d=u):((p=~~(h/g))&&p===h/g&&(d=u,p--),d>u&&(d=u)),(y=this._yoyo&&1&p)&&(E=this._yEase,d=u-d),m=il(this._tTime,g),d===a&&!o&&this._initted)return this._tTime=h,this;p!==m&&(w&&this._yEase&&M1(w,y),this.vars.repeatRefresh&&!y&&!this._lock&&(this._lock=o=1,this.render(wn(g*p),!0).invalidate()._lock=0))}if(!this._initted){if(f1(this,c?i:d,o,s,h))return this._tTime=0,this;if(a!==this._time)return this;if(u!==this._dur)return this.render(i,s,o)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=v=(E||this._ease)(d/u),this._from&&(this.ratio=v=1-v),d&&!a&&!s&&!p&&(Br(this,"onStart"),this._tTime!==h))return this;for(f=this._pt;f;)f.r(v,f.d),f=f._next;w&&w.render(i<0?i:!d&&y?-At:w._dur*w._ease(d/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(c&&Ty(this,i,0,o),Br(this,"onUpdate")),this._repeat&&p!==m&&this.vars.onRepeat&&!s&&this.parent&&Br(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(c&&!this._onUpdate&&Ty(this,i,0,!0),(i||!u)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&ks(this,1),!s&&(!c||a)&&(h||a||y)&&(Br(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}}else!function(e,n,r,i){var u,c,h,s=e.ratio,o=n<0||!n&&(!e._start&&QG(e)&&(e._initted||!Dy(e))||(e._ts<0||e._dp._ts<0)&&!Dy(e))?0:1,a=e._rDelay,l=0;if(a&&e._repeat&&(l=ju(0,e._tDur,n),c=il(l,a),e._yoyo&&1&c&&(o=1-o),c!==il(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||In||i||e._zTime===At||!n&&e._zTime){if(!e._initted&&f1(e,n,i,r,l))return;for(h=e._zTime,e._zTime=n||(r?At:0),r||(r=n&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,u=e._pt;u;)u.r(o,u.d),u=u._next;n<0&&Ty(e,n,0,!0),e._onUpdate&&!r&&Br(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&Br(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===o&&(o&&ks(e,1),!r&&!In&&(Br(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)}(this,i,s,o);return this},n.targets=function(){return this._targets},n.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),t.prototype.invalidate.call(this,i)},n.resetTo=function(i,s,o,a){Xu||wr.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Oy(this,l),function(e,n,r,i,s,o,a){var u,c,h,d,l=(e._pt&&e._ptCache||(e._ptCache={}))[n];if(!l)for(l=e._ptCache[n]=[],h=e._ptLookup,d=e._targets.length;d--;){if((u=h[d][n])&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==n&&u.fp!==n;)u=u._next;if(!u)return Ny=1,e.vars[n]="+=0",Oy(e,a),Ny=0,1;l.push(u)}for(d=l.length;d--;)(u=(c=l[d])._pt||c).s=!i&&0!==i||s?u.s+(i||0)+o*u.c:i,u.c=r-u.s,c.e&&(c.e=en(r)+Mn(c.e)),c.b&&(c.b=u.s+Mn(c.b))}(this,i,s,o,a,this._ease(l/this._dur),l)?this.resetTo(i,s,o,a):(rf(this,0),this.parent||u1(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(i,s){if(void 0===s&&(s="all"),!(i||s&&"all"!==s))return this._lazy=this._pt=0,this.parent?zu(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,Hs&&!0!==Hs.vars.overwrite)._first||zu(this),this.parent&&o!==this.timeline.totalDuration()&&sl(this,this._dur*this.timeline._tDur/o,0,1),this}var h,d,f,p,g,m,y,a=this._targets,l=i?kr(i):a,u=this._ptLookup,c=this._pt;if((!s||"all"===s)&&function(e,n){for(var r=e.length,i=r===n.length;i&&r--&&e[r]===n[r];);return r<0}(a,l))return"all"===s&&(this._pt=0),zu(this);for(h=this._op=this._op||[],"all"!==s&&(fn(s)&&(g={},nr(s,function(v){return g[v]=1}),s=g),s=function(e,n){var s,o,a,l,r=e[0]?bo(e[0]).harness:0,i=r&&r.aliases;if(!i)return n;for(o in s=Eo({},n),i)if(o in s)for(a=(l=i[o].split(",")).length;a--;)s[l[a]]=s[o];return s}(a,s)),y=a.length;y--;)if(~l.indexOf(a[y]))for(g in d=u[y],"all"===s?(h[y]=s,p=d,f={}):(f=h[y]=h[y]||{},p=s),p)(m=d&&d[g])&&((!("kill"in m.d)||!0===m.d.kill(g))&&ef(this,m,"_pt"),delete d[g]),"all"!==f&&(f[g]=1);return this._initted&&!this._pt&&c&&zu(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Gu(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return Gu(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return $t.killTweensOf(i,s,o)},e}(Yu);Fr(on.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),nr("staggerTo,staggerFrom,staggerFromTo",function(t){on[t]=function(){var e=new rr,n=Cy.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}});var Fy=function(e,n,r){return e[n]=r},L1=function(e,n,r){return e[n](r)},x4=function(e,n,r,i){return e[n](i.fp,r)},b4=function(e,n,r){return e.setAttribute(n,r)},Ly=function(e,n){return qt(e[n])?L1:dy(e[n])&&e.setAttribute?b4:Fy},k1=function(e,n){return n.set(n.t,n.p,Math.round(1e6*(n.s+n.c*e))/1e6,n)},E4=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},B1=function(e,n){var r=n._pt,i="";if(!e&&n.b)i=n.b;else if(1===e&&n.e)i=n.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round(1e4*(r.s+r.c*e))/1e4)+i,r=r._next;i+=n.c}n.set(n.t,n.p,i,n)},ky=function(e,n){for(var r=n._pt;r;)r.r(e,r.d),r=r._next},T4=function(e,n,r,i){for(var o,s=this._pt;s;)o=s._next,s.p===i&&s.modifier(e,n,r),s=o},D4=function(e){for(var r,i,n=this._pt;n;)i=n._next,n.p===e&&!n.op||n.op===e?ef(this,n,"_pt"):n.dep||(r=1),n=i;return!r},C4=function(e,n,r,i){i.mSet(e,n,i.m.call(i.tween,r,i.mt),i)},U1=function(e){for(var r,i,s,o,n=e._pt;n;){for(r=n._next,i=s;i&&i.pr>n.pr;)i=i._next;(n._prev=i?i._prev:o)?n._prev._next=n:s=n,(n._next=i)?i._prev=n:o=n,n=r}e._pt=s},ir=function(){function t(n,r,i,s,o,a,l,u,c){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||k1,this.d=l||this,this.set=u||Fy,this.pr=c||0,this._next=n,n&&(n._prev=this)}return t.prototype.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=C4,this.m=r,this.mt=s,this.tween=i},t}();nr(by+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return vy[t]=1}),yr.TweenMax=yr.TweenLite=on,yr.TimelineLite=yr.TimelineMax=rr,$t=new rr({sortChildren:!1,defaults:tl,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),_r.stringFilter=I1;var So=[],sf={},S4=[],H1=0,I4=0,By=function(e){return(sf[e]||S4).map(function(n){return n()})},Uy=function(){var e=Date.now(),n=[];e-H1>2&&(By("matchMediaInit"),So.forEach(function(r){var o,a,l,u,i=r.queries,s=r.conditions;for(a in i)(o=Or.matchMedia(i[a]).matches)&&(l=1),o!==s[a]&&(s[a]=o,u=1);u&&(r.revert(),l&&n.push(r))}),By("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r)}),H1=e,By("matchMedia"))},V1=function(){function t(n,r){this.selector=r&&Sy(r),this.data=[],this._r=[],this.isReverted=!1,this.id=I4++,n&&this.add(n)}var e=t.prototype;return e.add=function(r,i,s){qt(r)&&(s=i,i=r,r=qt);var o=this,a=function(){var h,u=Yt,c=o.selector;return u&&u!==o&&u.data.push(o),s&&(o.selector=Sy(s)),Yt=o,h=i.apply(o,arguments),qt(h)&&o._r.push(h),Yt=u,o.selector=c,o.isReverted=!1,h};return o.last=a,r===qt?a(o):r?o[r]=a:a},e.ignore=function(r){var i=Yt;Yt=null,r(this),Yt=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof t?r.push.apply(r,i.getTweens()):i instanceof on&&!(i.parent&&"nested"===i.parent.data)&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r){var o=this.getTweens();this.data.forEach(function(l){"isFlip"===l.data&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(u){return o.splice(o.indexOf(u),1)}))}),o.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,u){return u.g-l.g||-1/0}).forEach(function(l){return l.t.revert(r)}),this.data.forEach(function(l){return!(l instanceof on)&&l.revert&&l.revert(r)}),this._r.forEach(function(l){return l(r,s)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),i)for(var a=So.length;a--;)So[a].id===this.id&&So.splice(a,1)},e.revert=function(r){this.kill(r||{})},t}(),A4=function(){function t(n){this.contexts=[],this.scope=n}var e=t.prototype;return e.add=function(r,i,s){Mi(r)||(r={matches:r});var l,u,c,o=new V1(0,s||this.scope),a=o.conditions={};for(u in Yt&&!o.selector&&(o.selector=Yt.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=r,r)"all"===u?c=1:(l=Or.matchMedia(r[u]))&&(So.indexOf(o)<0&&So.push(o),(a[u]=l.matches)&&(c=1),l.addListener?l.addListener(Uy):l.addEventListener("change",Uy));return c&&i(o),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},t}(),of={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(i){return T1(i)})},timeline:function(e){return new rr(e)},getTweensOf:function(e,n){return $t.getTweensOf(e,n)},getProperty:function(e,n,r,i){fn(e)&&(e=kr(e)[0]);var s=bo(e||{}).get,o=r?a1:o1;return"native"===r&&(r=""),e&&(n?o((vr[n]&&vr[n].get||s)(e,n,r,i)):function(a,l,u){return o((vr[a]&&vr[a].get||s)(e,a,l,u))})},quickSetter:function(e,n,r){if((e=kr(e)).length>1){var i=e.map(function(c){return sr.quickSetter(c,n,r)}),s=i.length;return function(c){for(var h=s;h--;)i[h](c)}}var o=vr[n],a=bo(e=e[0]||{}),l=a.harness&&(a.harness.aliases||{})[n]||n,u=o?function(c){var h=new o;ol._pt=0,h.init(e,r?c+r:c,ol,0,[e]),h.render(1,h),ol._pt&&ky(1,ol)}:a.set(e,l);return o?u:function(c){return u(e,l,r?c+r:c,a,1)}},quickTo:function(e,n,r){var i,s=sr.to(e,Eo(((i={})[n]="+=0.1",i.paused=!0,i),r||{})),o=function(l,u,c){return s.resetTo(n,l,u,c)};return o.tween=s,o},isTweening:function(e){return $t.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Do(e.ease,tl.ease)),l1(tl,e||{})},config:function(e){return l1(_r,e||{})},registerEffect:function(e){var n=e.name,r=e.effect,s=e.defaults,o=e.extendTimeline;(e.plugins||"").split(",").forEach(function(a){return a&&!vr[a]&&!yr[a]&&qd(n+" effect requires "+a+" plugin.")}),xy[n]=function(a,l,u){return r(kr(a),Fr(l||{},s),u)},o&&(rr.prototype[n]=function(a,l,u){return this.add(xy[n](a,Mi(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,n){dt[e]=Do(n)},parseEase:function(e,n){return arguments.length?Do(e,n):dt},getById:function(e){return $t.getById(e)},exportRoot:function(e,n){void 0===e&&(e={});var i,s,r=new rr(e);for(r.smoothChildTiming=tr(e.smoothChildTiming),$t.remove(r),r._dp=0,r._time=r._tTime=$t._time,i=$t._first;i;)s=i._next,(n||!(!i._dur&&i instanceof on&&i.vars.onComplete===i._targets[0]))&&Pi(r,i,i._start-i._delay),i=s;return Pi($t,r,0),r},context:function(e,n){return e?new V1(e,n):Yt},matchMedia:function(e){return new A4(e)},matchMediaRefresh:function(){return So.forEach(function(e){var r,i,n=e.conditions;for(i in n)n[i]&&(n[i]=!1,r=1);r&&e.revert()})||Uy()},addEventListener:function(e,n){var r=sf[e]||(sf[e]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(e,n){var r=sf[e],i=r&&r.indexOf(n);i>=0&&r.splice(i,1)},utils:{wrap:function t(e,n,r){var i=n-e;return An(e)?w1(e,t(0,e.length),n):Bs(r,function(s){return(i+(s-e)%i)%i+e})},wrapYoyo:function t(e,n,r){var i=n-e,s=2*i;return An(e)?w1(e,t(0,e.length-1),n):Bs(r,function(o){return e+((o=(s+(o-e)%s)%s||0)>i?s-o:o)})},distribute:_1,random:v1,snap:y1,normalize:function(e,n,r){return x1(e,n,0,1,r)},getUnit:Mn,clamp:function(e,n,r){return Bs(r,function(i){return ju(e,n,i)})},splitColor:D1,toArray:kr,selector:Sy,mapRange:x1,pipe:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(i){return n.reduce(function(s,o){return o(s)},i)}},unitize:function(e,n){return function(r){return e(parseFloat(r))+(n||Mn(r))}},interpolate:function t(e,n,r,i){var s=isNaN(e+n)?0:function(f){return(1-f)*e+f*n};if(!s){var l,u,c,h,d,o=fn(e),a={};if(!0===r&&(i=1)&&(r=null),o)e={p:e},n={p:n};else if(An(e)&&!An(n)){for(c=[],d=(h=e.length)-2,u=1;u<h;u++)c.push(t(e[u-1],e[u]));h--,s=function(p){p*=h;var g=Math.min(d,~~p);return c[g](p-g)},r=n}else i||(e=Eo(An(e)?[]:{},e));if(!c){for(l in n)Ry.call(a,e,l,"get",n[l]);s=function(p){return ky(p,a)||(o?e.p:e)}}}return Bs(r,s)},shuffle:m1},install:e1,effects:xy,ticker:wr,updateRoot:rr.updateRoot,plugins:vr,globalTimeline:$t,core:{PropTween:ir,globals:t1,Tween:on,Timeline:rr,Animation:Yu,getCache:bo,_removeLinkedListItem:ef,reverting:function(){return In},context:function(e){return e&&Yt&&(Yt.data.push(e),e._ctx=Yt),Yt},suppressOverwrites:function(e){return cy=e}}};nr("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return of[t]=on[t]}),wr.add(rr.updateRoot),ol=of.to({},{duration:0});var M4=function(e,n){for(var r=e._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},Hy=function(e,n){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,u;if(fn(s)&&(l={},nr(s,function(c){return l[c]=1}),s=l),n){for(u in l={},s)l[u]=n(s[u]);s=l}!function(e,n){var i,s,o,r=e._targets;for(i in n)for(s=r.length;s--;)(o=e._ptLookup[s][i])&&(o=o.d)&&(o._pt&&(o=M4(o,i)),o&&o.modifier&&o.modifier(n[i],e,r[s],i))}(a,s)}}}},sr=of.registerPlugin({name:"attr",init:function(e,n,r,i,s){var o,a,l;for(o in this.tween=r,n)l=e.getAttribute(o)||"",(a=this.add(e,"setAttribute",(l||0)+"",n[o],i,s,0,0,o)).op=o,a.b=l,this._props.push(o)},render:function(e,n){for(var r=n._pt;r;)In?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,n){for(var r=n.length;r--;)this.add(e,r,e[r]||0,n[r],0,0,0,0,0,1)}},Hy("roundProps",Iy),Hy("modifiers"),Hy("snap",y1))||of;on.version=rr.version=sr.version="3.12.2",JS=1,fy()&&al();var G1,Vs,ll,Vy,Io,j1,Gy,q1,hs={},Ao=180/Math.PI,ul=Math.PI/180,cl=Math.atan2,$1=1e8,jy=/([A-Z])/g,O4=/(left|right|width|margin|padding|x)/i,F4=/[\s,\(]\S/,Ri={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},$y=function(e,n){return n.set(n.t,n.p,Math.round(1e4*(n.s+n.c*e))/1e4+n.u,n)},L4=function(e,n){return n.set(n.t,n.p,1===e?n.e:Math.round(1e4*(n.s+n.c*e))/1e4+n.u,n)},k4=function(e,n){return n.set(n.t,n.p,e?Math.round(1e4*(n.s+n.c*e))/1e4+n.u:n.b,n)},B4=function(e,n){var r=n.s+n.c*e;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},z1=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},W1=function(e,n){return n.set(n.t,n.p,1!==e?n.b:n.e,n)},U4=function(e,n,r){return e.style[n]=r},H4=function(e,n,r){return e.style.setProperty(n,r)},V4=function(e,n,r){return e._gsap[n]=r},G4=function(e,n,r){return e._gsap.scaleX=e._gsap.scaleY=r},j4=function(e,n,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},$4=function(e,n,r,i,s){var o=e._gsap;o[n]=r,o.renderTransform(s,o)},zt="transform",oi=zt+"Origin",z4=function t(e,n){var r=this,i=this.target,s=i.style;if(e in hs&&s){if(this.tfm=this.tfm||{},"transform"===e)return Ri.transform.split(",").forEach(function(o){return t.call(r,o,n)});if(~(e=Ri[e]||e).indexOf(",")?e.split(",").forEach(function(o){return r.tfm[o]=ds(i,o)}):this.tfm[e]=i._gsap.x?i._gsap[e]:ds(i,e),this.props.indexOf(zt)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(oi,n,"")),e=zt}(s||n)&&this.props.push(e,n,s[e])},X1=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},W4=function(){var s,o,e=this.props,n=this.target,r=n.style,i=n._gsap;for(s=0;s<e.length;s+=3)e[s+1]?n[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty("--"===e[s].substr(0,2)?e[s]:e[s].replace(jy,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),(!(s=Gy())||!s.isStart)&&!r[zt]&&(X1(r),i.uncache=1)}},Y1=function(e,n){var r={target:e,props:[],revert:W4,save:z4};return e._gsap||sr.core.getCache(e),n&&n.split(",").forEach(function(i){return r.save(i)}),r},zy=function(e,n){var r=Vs.createElementNS?Vs.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Vs.createElement(e);return r.style?r:Vs.createElement(e)},Ni=function t(e,n,r){var i=getComputedStyle(e);return i[n]||i.getPropertyValue(n.replace(jy,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&t(e,hl(n)||n,1)||""},Z1="O,Moz,ms,Ms,Webkit".split(","),hl=function(e,n,r){var s=(n||Io).style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Z1[o]+e in s););return o<0?null:(3===o?"ms":o>=0?Z1[o]:"")+e},Wy=function(){typeof window<"u"&&window.document&&(G1=window,ll=(Vs=G1.document).documentElement,Io=zy("div")||{style:{}},zy("div"),zt=hl(zt),oi=zt+"Origin",Io.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",q1=!!hl("perspective"),Gy=sr.core.reverting,Vy=1)},Xy=function t(e){var o,n=zy("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText;if(ll.appendChild(n),n.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch{}else this._gsapBBox&&(o=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),ll.removeChild(n),this.style.cssText=s,o},K1=function(e,n){for(var r=n.length;r--;)if(e.hasAttribute(n[r]))return e.getAttribute(n[r])},Q1=function(e){var n;try{n=e.getBBox()}catch{n=Xy.call(e,!0)}return n&&(n.width||n.height)||e.getBBox===Xy||(n=Xy.call(e,!0)),!n||n.width||n.x||n.y?n:{x:+K1(e,["x","cx","x1"])||0,y:+K1(e,["y","cy","y1"])||0,width:0,height:0}},J1=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!Q1(e))},Zu=function(e,n){if(n){var r=e.style;n in hs&&n!==oi&&(n=zt),r.removeProperty?(("ms"===n.substr(0,2)||"webkit"===n.substr(0,6))&&(n="-"+n),r.removeProperty(n.replace(jy,"-$1").toLowerCase())):r.removeAttribute(n)}},Gs=function(e,n,r,i,s,o){var a=new ir(e._pt,n,r,0,1,o?W1:z1);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},eI={deg:1,rad:1,turn:1},X4={grid:1,flex:1},js=function t(e,n,r,i){var p,g,m,y,s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=Io.style,l=O4.test(n),u="svg"===e.tagName.toLowerCase(),c=(u?"client":"offset")+(l?"Width":"Height"),h=100,d="px"===i,f="%"===i;return i===o||!s||eI[i]||eI[o]?s:("px"!==o&&!d&&(s=t(e,n,r,"px")),y=e.getCTM&&J1(e),!f&&"%"!==o||!hs[n]&&!~n.indexOf("adius")?(a[l?"width":"height"]=h+(d?o:i),g=~n.indexOf("adius")||"em"===i&&e.appendChild&&!u?e:e.parentNode,y&&(g=(e.ownerSVGElement||{}).parentNode),(!g||g===Vs||!g.appendChild)&&(g=Vs.body),(m=g._gsap)&&f&&m.width&&l&&m.time===wr.time&&!m.uncache?en(s/m.width*h):((f||"%"===o)&&!X4[Ni(g,"display")]&&(a.position=Ni(e,"position")),g===e&&(a.position="static"),g.appendChild(Io),p=Io[c],g.removeChild(Io),a.position="absolute",l&&f&&((m=bo(g)).time=wr.time,m.width=g[c]),en(d?p*s/h:p&&s?h/p*s:0))):(p=y?e.getBBox()[l?"width":"height"]:e[c],en(f?s/p*h:s/100*p)))},ds=function(e,n,r,i){var s;return Vy||Wy(),n in Ri&&"transform"!==n&&~(n=Ri[n]).indexOf(",")&&(n=n.split(",")[0]),hs[n]&&"transform"!==n?(s=Qu(e,i),s="transformOrigin"!==n?s[n]:s.svg?s.origin:lf(Ni(e,oi))+" "+s.zOrigin+"px"):(!(s=e.style[n])||"auto"===s||i||~(s+"").indexOf("calc("))&&(s=af[n]&&af[n](e,n,r)||Ni(e,n)||i1(e,n)||("opacity"===n?1:0)),r&&!~(s+"").trim().indexOf(" ")?js(e,n,s,r)+r:s},Y4=function(e,n,r,i){if(!r||"none"===r){var s=hl(n,e,1),o=s&&Ni(e,s,1);o&&o!==r?(n=s,r=o):"borderColor"===n&&(r=Ni(e,"borderTopColor"))}var c,h,d,f,p,g,m,y,v,w,E,a=new ir(this._pt,e.style,n,0,1,B1),l=0,u=0;if(a.b=r,a.e=i,r+="","auto"==(i+="")&&(e.style[n]=i,i=Ni(e,n)||i,e.style[n]=r),I1(c=[r,i]),i=c[1],d=(r=c[0]).match(nl)||[],(i.match(nl)||[]).length){for(;h=nl.exec(i);)m=h[0],v=i.substring(l,h.index),p?p=(p+1)%5:("rgba("===v.substr(-5)||"hsla("===v.substr(-5))&&(p=1),m!==(g=d[u++]||"")&&(f=parseFloat(g)||0,E=g.substr((f+"").length),"="===m.charAt(1)&&(m=rl(f,m)+E),y=parseFloat(m),w=m.substr((y+"").length),l=nl.lastIndex-w.length,w||(w=w||_r.units[n]||E,l===i.length&&(i+=w,a.e+=w)),E!==w&&(f=js(e,n,g,w)||0),a._pt={_next:a._pt,p:v||1===u?v:",",s:f,c:y-f,m:p&&p<4||"zIndex"===n?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r="display"===n&&"none"===i?W1:z1;return KS.test(i)&&(a.e=0),this._pt=a,a},tI={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},q4=function(e){var n=e.split(" "),r=n[0],i=n[1]||"50%";return("top"===r||"bottom"===r||"left"===i||"right"===i)&&(e=r,r=i,i=e),n[0]=tI[r]||r,n[1]=tI[i]||i,n.join(" ")},Z4=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var a,l,u,r=n.t,i=r.style,s=n.u,o=r._gsap;if("all"===s||!0===s)i.cssText="",l=1;else for(u=(s=s.split(",")).length;--u>-1;)hs[a=s[u]]&&(l=1,a="transformOrigin"===a?oi:zt),Zu(r,a);l&&(Zu(r,zt),o&&(o.svg&&r.removeAttribute("transform"),Qu(r,1),o.uncache=1,X1(i)))}},af={clearProps:function(e,n,r,i,s){if("isFromStart"!==s.data){var o=e._pt=new ir(e._pt,n,r,0,0,Z4);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},Ku=[1,0,0,1,0,0],nI={},rI=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},iI=function(e){var n=Ni(e,zt);return rI(n)?Ku:n.substr(7).match(ZS).map(en)},Yy=function(e,n){var o,a,l,u,r=e._gsap||bo(e),i=e.style,s=iI(e);return r.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(l=e.transform.baseVal.consolidate().matrix).a,l.b,l.c,l.d,l.e,l.f]).join(",")?Ku:s:(s===Ku&&!e.offsetParent&&e!==ll&&!r.svg&&(l=i.display,i.display="block",(!(o=e.parentNode)||!e.offsetParent)&&(u=1,a=e.nextElementSibling,ll.appendChild(e)),s=iI(e),l?i.display=l:Zu(e,"display"),u&&(a?o.insertBefore(e,a):o?o.appendChild(e):ll.removeChild(e))),n&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},qy=function(e,n,r,i,s,o){var H,k,V,a=e._gsap,l=s||Yy(e,!0),u=a.xOrigin||0,c=a.yOrigin||0,h=a.xOffset||0,d=a.yOffset||0,f=l[0],p=l[1],g=l[2],m=l[3],y=l[4],v=l[5],w=n.split(" "),E=parseFloat(w[0])||0,M=parseFloat(w[1])||0;r?l!==Ku&&(k=f*m-p*g)&&(V=E*(-p/k)+M*(f/k)-(f*v-p*y)/k,E=E*(m/k)+M*(-g/k)+(g*v-m*y)/k,M=V):(E=(H=Q1(e)).x+(~w[0].indexOf("%")?E/100*H.width:E),M=H.y+(~(w[1]||w[0]).indexOf("%")?M/100*H.height:M)),i||!1!==i&&a.smooth?(a.xOffset=h+((y=E-u)*f+(v=M-c)*g)-y,a.yOffset=d+(y*p+v*m)-v):a.xOffset=a.yOffset=0,a.xOrigin=E,a.yOrigin=M,a.smooth=!!i,a.origin=n,a.originIsAbsolute=!!r,e.style[oi]="0px 0px",o&&(Gs(o,a,"xOrigin",u,E),Gs(o,a,"yOrigin",c,M),Gs(o,a,"xOffset",h,a.xOffset),Gs(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",E+" "+M)},Qu=function(e,n){var r=e._gsap||new R1(e);if("x"in r&&!n&&!r.uncache)return r;var c,h,d,f,p,g,m,y,v,w,E,M,H,k,F,V,W,Q,Ne,Y,K,Ue,Ae,Se,tt,rt,xr,ai,Oi,Fo,Gn,Fi,i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),u=Ni(e,oi)||"0";return c=h=d=g=m=y=v=w=E=0,f=p=1,r.svg=!(!e.getCTM||!J1(e)),l.translate&&(("none"!==l.translate||"none"!==l.scale||"none"!==l.rotate)&&(i[zt]=("none"!==l.translate?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==l.rotate?"rotate("+l.rotate+") ":"")+("none"!==l.scale?"scale("+l.scale.split(" ").join(",")+") ":"")+("none"!==l[zt]?l[zt]:"")),i.scale=i.rotate=i.translate="none"),k=Yy(e,r.svg),r.svg&&(r.uncache?(tt=e.getBBox(),u=r.xOrigin-tt.x+"px "+(r.yOrigin-tt.y)+"px",Se=""):Se=!n&&e.getAttribute("data-svg-origin"),qy(e,Se||u,!!Se||r.originIsAbsolute,!1!==r.smooth,k)),M=r.xOrigin||0,H=r.yOrigin||0,k!==Ku&&(Q=k[0],Ne=k[1],Y=k[2],K=k[3],c=Ue=k[4],h=Ae=k[5],6===k.length?(f=Math.sqrt(Q*Q+Ne*Ne),p=Math.sqrt(K*K+Y*Y),g=Q||Ne?cl(Ne,Q)*Ao:0,(v=Y||K?cl(Y,K)*Ao+g:0)&&(p*=Math.abs(Math.cos(v*ul))),r.svg&&(c-=M-(M*Q+H*Y),h-=H-(M*Ne+H*K))):(Fo=k[7],xr=k[8],ai=k[9],Gn=k[11],c=k[12],h=k[13],d=k[14],m=(F=cl(Fi=k[6],Oi=k[10]))*Ao,F&&(Se=Ue*(V=Math.cos(-F))+xr*(W=Math.sin(-F)),tt=Ae*V+ai*W,rt=Fi*V+Oi*W,xr=Ue*-W+xr*V,ai=Ae*-W+ai*V,Oi=Fi*-W+Oi*V,Gn=Fo*-W+Gn*V,Ue=Se,Ae=tt,Fi=rt),y=(F=cl(-Y,Oi))*Ao,F&&(V=Math.cos(-F),Gn=K*(W=Math.sin(-F))+Gn*V,Q=Se=Q*V-xr*W,Ne=tt=Ne*V-ai*W,Y=rt=Y*V-Oi*W),g=(F=cl(Ne,Q))*Ao,F&&(Se=Q*(V=Math.cos(F))+Ne*(W=Math.sin(F)),tt=Ue*V+Ae*W,Ne=Ne*V-Q*W,Ae=Ae*V-Ue*W,Q=Se,Ue=tt),m&&Math.abs(m)+Math.abs(g)>359.9&&(m=g=0,y=180-y),f=en(Math.sqrt(Q*Q+Ne*Ne+Y*Y)),p=en(Math.sqrt(Ae*Ae+Fi*Fi)),F=cl(Ue,Ae),v=Math.abs(F)>2e-4?F*Ao:0,E=Gn?1/(Gn<0?-Gn:Gn):0),r.svg&&(Se=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!rI(Ni(e,zt)),Se&&e.setAttribute("transform",Se))),Math.abs(v)>90&&Math.abs(v)<270&&(s?(f*=-1,v+=g<=0?180:-180,g+=g<=0?180:-180):(p*=-1,v+=v<=0?180:-180)),n=n||r.uncache,r.x=c-((r.xPercent=c&&(!n&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=h-((r.yPercent=h&&(!n&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=d+o,r.scaleX=en(f),r.scaleY=en(p),r.rotation=en(g)+a,r.rotationX=en(m)+a,r.rotationY=en(y)+a,r.skewX=v+a,r.skewY=w+a,r.transformPerspective=E+o,(r.zOrigin=parseFloat(u.split(" ")[2])||0)&&(i[oi]=lf(u)),r.xOffset=r.yOffset=0,r.force3D=_r.force3D,r.renderTransform=r.svg?Q4:q1?sI:K4,r.uncache=0,r},lf=function(e){return(e=e.split(" "))[0]+" "+e[1]},Zy=function(e,n,r){var i=Mn(n);return en(parseFloat(n)+parseFloat(js(e,"x",r+"px",i)))+i},K4=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,sI(e,n)},Mo="0deg",Ju="0px",Po=") ",sI=function(e,n){var r=n||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,u=r.rotation,c=r.rotationY,h=r.rotationX,d=r.skewX,f=r.skewY,p=r.scaleX,g=r.scaleY,m=r.transformPerspective,y=r.force3D,v=r.target,w=r.zOrigin,E="",M="auto"===y&&e&&1!==e||!0===y;if(w&&(h!==Mo||c!==Mo)){var V,H=parseFloat(c)*ul,k=Math.sin(H),F=Math.cos(H);H=parseFloat(h)*ul,V=Math.cos(H),o=Zy(v,o,k*V*-w),a=Zy(v,a,-Math.sin(H)*-w),l=Zy(v,l,F*V*-w+w)}m!==Ju&&(E+="perspective("+m+Po),(i||s)&&(E+="translate("+i+"%, "+s+"%) "),(M||o!==Ju||a!==Ju||l!==Ju)&&(E+=l!==Ju||M?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Po),u!==Mo&&(E+="rotate("+u+Po),c!==Mo&&(E+="rotateY("+c+Po),h!==Mo&&(E+="rotateX("+h+Po),(d!==Mo||f!==Mo)&&(E+="skew("+d+", "+f+Po),(1!==p||1!==g)&&(E+="scale("+p+", "+g+Po),v.style[zt]=E||"translate(0, 0)"},Q4=function(e,n){var M,H,k,F,V,r=n||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,u=r.skewX,c=r.skewY,h=r.scaleX,d=r.scaleY,f=r.target,p=r.xOrigin,g=r.yOrigin,m=r.xOffset,y=r.yOffset,v=r.forceCSS,w=parseFloat(o),E=parseFloat(a);l=parseFloat(l),u=parseFloat(u),(c=parseFloat(c))&&(u+=c=parseFloat(c),l+=c),l||u?(l*=ul,u*=ul,M=Math.cos(l)*h,H=Math.sin(l)*h,k=Math.sin(l-u)*-d,F=Math.cos(l-u)*d,u&&(c*=ul,V=Math.tan(u-c),k*=V=Math.sqrt(1+V*V),F*=V,c&&(V=Math.tan(c),M*=V=Math.sqrt(1+V*V),H*=V)),M=en(M),H=en(H),k=en(k),F=en(F)):(M=h,F=d,H=k=0),(w&&!~(o+"").indexOf("px")||E&&!~(a+"").indexOf("px"))&&(w=js(f,"x",o,"px"),E=js(f,"y",a,"px")),(p||g||m||y)&&(w=en(w+p-(p*M+g*k)+m),E=en(E+g-(p*H+g*F)+y)),(i||s)&&(V=f.getBBox(),w=en(w+i/100*V.width),E=en(E+s/100*V.height)),f.setAttribute("transform",V="matrix("+M+","+H+","+k+","+F+","+w+","+E+")"),v&&(f.style[zt]=V)},J4=function(e,n,r,i,s){var h,d,o=360,a=fn(s),u=parseFloat(s)*(a&&~s.indexOf("rad")?Ao:1)-i,c=i+u+"deg";return a&&("short"===(h=s.split("_")[1])&&(u%=o)!=u%180&&(u+=u<0?o:-o),"cw"===h&&u<0?u=(u+o*$1)%o-~~(u/o)*o:"ccw"===h&&u>0&&(u=(u-o*$1)%o-~~(u/o)*o)),e._pt=d=new ir(e._pt,n,r,i,u,L4),d.e=c,d.u="deg",e._props.push(r),d},oI=function(e,n){for(var r in n)e[r]=n[r];return e},ej=function(e,n,r){var a,l,u,c,h,d,p,i=oI({},r._gsap),o=r.style;for(l in i.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),o[zt]=n,a=Qu(r,1),Zu(r,zt),r.setAttribute("transform",u)):(u=getComputedStyle(r)[zt],o[zt]=n,a=Qu(r,1),o[zt]=u),hs)(u=i[l])!==(c=a[l])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(l)<0&&(h=Mn(u)!==(p=Mn(c))?js(r,l,u,p):parseFloat(u),d=parseFloat(c),e._pt=new ir(e._pt,a,l,h,d-h,$y),e._pt.u=p||0,e._props.push(l));oI(a,i)};nr("padding,margin,Width,Radius",function(t,e){var n="Top",r="Right",i="Bottom",s="Left",o=(e<3?[n,r,i,s]:[n+s,n+r,i+r,i+s]).map(function(a){return e<2?t+a:"border"+a+t});af[e>1?"border"+t:t]=function(a,l,u,c,h){var d,f;if(arguments.length<4)return d=o.map(function(p){return ds(a,p,u)}),5===(f=d.join(" ")).split(d[0]).length?d[0]:f;d=(c+"").split(" "),f={},o.forEach(function(p,g){return f[p]=d[g]=d[g]||d[(g-1)/2|0]}),a.init(l,f,h)}});var aI={name:"css",register:Wy,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,r,i,s){var u,c,h,d,f,p,g,m,y,v,w,E,M,H,k,F,o=this._props,a=e.style,l=r.vars.startAt;for(g in Vy||Wy(),this.styles=this.styles||Y1(e),F=this.styles.props,this.tween=r,n)if("autoRound"!==g&&(c=n[g],!vr[g]||!N1(g,n,r,i,e,s)))if(p=af[g],"function"==(f=typeof c)&&(f=typeof(c=c.call(r,i,e,s))),"string"===f&&~c.indexOf("random(")&&(c=$u(c)),p)p(this,e,g,c,r)&&(k=1);else if("--"===g.substr(0,2))u=(getComputedStyle(e).getPropertyValue(g)+"").trim(),c+="",Us.lastIndex=0,Us.test(u)||(m=Mn(u),y=Mn(c)),y?m!==y&&(u=js(e,g,u,y)+y):m&&(c+=m),this.add(a,"setProperty",u,c,i,s,0,0,g),o.push(g),F.push(g,0,a[g]);else if("undefined"!==f){if(l&&g in l?(u="function"==typeof l[g]?l[g].call(r,i,e,s):l[g],fn(u)&&~u.indexOf("random(")&&(u=$u(u)),Mn(u+"")||(u+=_r.units[g]||Mn(ds(e,g))||""),"="===(u+"").charAt(1)&&(u=ds(e,g))):u=ds(e,g),d=parseFloat(u),(v="string"===f&&"="===c.charAt(1)&&c.substr(0,2))&&(c=c.substr(2)),h=parseFloat(c),g in Ri&&("autoAlpha"===g&&(1===d&&"hidden"===ds(e,"visibility")&&h&&(d=0),F.push("visibility",0,a.visibility),Gs(this,a,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),"scale"!==g&&"transform"!==g&&~(g=Ri[g]).indexOf(",")&&(g=g.split(",")[0])),w=g in hs)if(this.styles.save(g),E||((M=e._gsap).renderTransform&&!n.parseTransform||Qu(e,n.parseTransform),H=!1!==n.smoothOrigin&&M.smooth,(E=this._pt=new ir(this._pt,a,zt,0,1,M.renderTransform,M,0,-1)).dep=1),"scale"===g)this._pt=new ir(this._pt,M,"scaleY",M.scaleY,(v?rl(M.scaleY,v+h):h)-M.scaleY||0,$y),this._pt.u=0,o.push("scaleY",g),g+="X";else{if("transformOrigin"===g){F.push(oi,0,a[oi]),c=q4(c),M.svg?qy(e,c,0,H,0,this):((y=parseFloat(c.split(" ")[2])||0)!==M.zOrigin&&Gs(this,M,"zOrigin",M.zOrigin,y),Gs(this,a,g,lf(u),lf(c)));continue}if("svgOrigin"===g){qy(e,c,1,H,0,this);continue}if(g in nI){J4(this,M,g,d,v?rl(d,v+c):c);continue}if("smoothOrigin"===g){Gs(this,M,"smooth",M.smooth,c);continue}if("force3D"===g){M[g]=c;continue}if("transform"===g){ej(this,c,e);continue}}else g in a||(g=hl(g)||g);if(w||(h||0===h)&&(d||0===d)&&!F4.test(c)&&g in a)h||(h=0),(m=(u+"").substr((d+"").length))!==(y=Mn(c)||(g in _r.units?_r.units[g]:m))&&(d=js(e,g,u,y)),this._pt=new ir(this._pt,w?M:a,g,d,(v?rl(d,v+h):h)-d,w||"px"!==y&&"zIndex"!==g||!1===n.autoRound?$y:B4),this._pt.u=y||0,m!==y&&"%"!==y&&(this._pt.b=u,this._pt.r=k4);else if(g in a)Y4.call(this,e,g,u,v?v+c:c);else if(g in e)this.add(e,g,u||e[g],v?v+c:c,i,s);else if("parseTransform"!==g){yy(g,c);continue}w||(g in a?F.push(g,0,a[g]):F.push(g,1,u||e[g])),o.push(g)}k&&U1(this)},render:function(e,n){if(n.tween._time||!Gy())for(var r=n._pt;r;)r.r(e,r.d),r=r._next;else n.styles.revert()},get:ds,aliases:Ri,getSetter:function(e,n,r){var i=Ri[n];return i&&i.indexOf(",")<0&&(n=i),n in hs&&n!==oi&&(e._gsap.x||ds(e,"x"))?r&&j1===r?"scale"===n?G4:V4:(j1=r||{})&&("scale"===n?j4:$4):e.style&&!dy(e.style[n])?U4:~n.indexOf("-")?H4:Ly(e,n)},core:{_removeProperty:Zu,_getMatrix:Yy}};sr.utils.checkPrefix=hl,sr.core.getStyleSaver=Y1,function(t,e,n,r){var i=nr(t+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(s){hs[s]=1});nr(e,function(s){_r.units[s]="deg",nI[s]=1}),Ri[i[13]]=t+","+e,nr("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(s){var o=s.split(":");Ri[o[1]]=i[o[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),nr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){_r.units[t]="px"}),sr.registerPlugin(aI);var fs=sr.registerPlugin(aI)||sr;class uf extends Sn{constructor(e){super(),this.background=ti.from(be.WHITE),this.background.tint=16763989,this.background.eventMode="none",this.addChild(this.background),this.panel=ti.from("assets/ui/navigation-popup.png"),this.panel.anchor.set(.5),this.panel.width=265,this.panel.height=230,this.addChild(this.panel),this.panelBase=new Sn,this.panelBase.height=400,this.panelBase.width=400,this.panel.addChild(this.panelBase),this.title=new Fs(e,{fontFamily:"DefaultFont",dropShadowColor:"000000",fontSize:14}),this.title.x=0,this.title.y=-96,this.title.anchor.set(.5,.5),this.panel.addChild(this.title)}show(){var e=this;return(0,De.Z)(function*(){fs.killTweensOf(e.background),fs.killTweensOf(e.panel.pivot),e.background.alpha=0,e.panel.pivot.y=-400,fs.to(e.background,{alpha:.8,duration:.2,ease:"linear"}),yield fs.to(e.panel.pivot,{y:0,duration:.3,ease:"back.out"})})()}hide(){var e=this;return(0,De.Z)(function*(){fs.killTweensOf(e.background),fs.killTweensOf(e.panel.pivot),fs.to(e.background,{alpha:0,duration:.2,ease:"linear"}),yield fs.to(e.panel.pivot,{y:-500,duration:.3,ease:"back.in"})})()}resize(e,n){this.background.width=e,this.background.height=n,this.panel.x=.5*e,this.panel.y=.5*n}addText(e,n,r,i){const s=new Fs(n,{fontFamily:"DefaultFont",dropShadowColor:"000000",fontSize:r.size});s.x=i.x??0,s.y=i.y,s.anchor.set(.5,.5),s.rotation=r.rotated?-1.57:0,e.addChild(s)}addButton(e,n,r,i){const s=new WS(ti.from("assets/ui/yellow_button00.png"));s.view.width=190,s.view.height=49,s.view.x=-95,s.view.y=60*r-65;const o=new Fs(e,{fontFamily:"DefaultFont",dropShadowColor:"000000",fontSize:14});o.anchor.set(.5,.5),o.x=100,o.y=20,s.view.addChild(o),s.onPress.connect(n),i.addChild(s.view)}}class tj extends uf{constructor(e){super("Credits"),this.addText(this.panel,"Idee & Programmierung",{size:14},{y:-60}),this.addText(this.panel,"Thomas Renger",{size:12},{y:-40}),this.addText(this.panel,"Grafiken",{size:14},{y:-10}),this.addText(this.panel,"Kenney (www.kenney.nl)",{size:12},{y:10}),this.addButton("Schlie\xdfen!",()=>e.openNavigation(this),2,this.panel)}}var cf=function(t){return t.games="games",t}(cf||{});let lI=(()=>{var t;class e{toStore(r,i,s=!1){const o=Array.isArray(i)?i:[i];return new Promise((a,l)=>{const u=indexedDB.open("data",4);u.onerror=()=>{l(Error("IndexedDB database error"))},u.onupgradeneeded=c=>{this.migrateDatabase(c.currentTarget.result)},u.onsuccess=function(c){const d=c.currentTarget.result.transaction([r],"readwrite").objectStore(r);s&&(d.clear().onsuccess=()=>{}),o.forEach(f=>{const p=d.put(f);p.onerror=()=>l(),p.onsuccess=()=>a()})},a()})}getFromStore(r,i){return new Promise((s,o)=>{const a=indexedDB.open("data");a.onerror=function(){s(void 0)},a.onupgradeneeded=function(l){l.currentTarget.transaction?.abort(),s(void 0)},a.onsuccess=function(l){const h=l.currentTarget.result.transaction([r]).objectStore(r).getAll();h.onerror=function(){o(Error("Error text"))},h.onsuccess=function(){s(h.result.find(d=>i(d)))}}})}getManyFromStore(r,i){return new Promise((s,o)=>{const a=indexedDB.open("data");a.onerror=function(){s([])},a.onupgradeneeded=function(l){l.currentTarget.transaction?.abort(),s([])},a.onsuccess=function(l){const h=l.currentTarget.result.transaction([r]).objectStore(r).getAll();h.onerror=function(){o(Error("Error text"))},h.onsuccess=function(){s(h.result.filter(d=>!i||i(d)))}}})}migrateDatabase(r){r.createObjectStore(cf.games,{keyPath:"id"})}getHighscore(){return this.getManyFromStore(cf.games,()=>!0)}setHighscore(r,i){return this.toStore(cf.games,{id:crypto.randomUUID(),date:(new Date).toISOString(),kills:r,level:i})}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275prov=Ct({token:t,factory:t.\u0275fac,providedIn:"root"}),e})();class nj extends uf{constructor(e){super("Highscore"),this.storage=new lI,this.addButton("Schlie\xdfen!",()=>e.openNavigation(this),2,this.panel)}show(){var e=()=>super.show,n=this;return(0,De.Z)(function*(){const r=yield n.storage.getHighscore();r.sort((i,s)=>s.kills-i.kills);for(let i=0;i<Math.min(r.length,5);i++){const s=r[i],o=new Date(s.date),a=`${o.getDate()}.${o.getMonth()+1}.${o.getFullYear()} ${o.getHours()}:${o.getMinutes()}`;n.addText(n.panel,a,{size:12},{y:20*i-60,x:-60}),n.addText(n.panel,s.kills.toString(),{size:12},{y:20*i-60,x:25}),n.addText(n.panel,s.level.toString(),{size:12},{y:20*i-60,x:75})}yield e().call(n)})()}}class uI extends uf{constructor(e){super("Solarstriker"),this.addText(this.panel,"Version. 1.1.0",{size:11,rotated:!0},{y:60,x:120}),this.addButton("Spiel starten!",()=>e.start(this),0,this.panel),this.addButton("Highscore",()=>e.openHighscore(this),1,this.panel),this.addButton("Credits",()=>e.openCredits(this),2,this.panel)}}class ij extends uf{constructor(e){super("Credits"),this.addText(this.panel,"Du bist gestorben",{size:14},{y:-60}),this.addText(this.panel,"Du bist leider unterlegen\n\t und der Kampf ist vorbei",{size:12},{y:-40}),this.addText(this.panel,"Punkte",{size:14},{y:-10}),this.addText(this.panel,e.kills.value.toString(),{size:12},{y:10}),this.addButton("Schlie\xdfen!",()=>e.endGame(this),2,this.panel)}}class hf extends Ka{constructor(e,n,r){super(n,r),this.speed=1,this.speed=e}update(e){super.update(e),this.y+=e*this.speed}hit(e){const n=this.getBounds(),r=e.getBounds();return n.x<r.x+r.width&&n.x+n.width>r.x&&n.y<r.y+r.height&&n.y+n.height>r.y}}var ec=function(t){return t[t.speed=0]="speed",t[t.shotSpeed=1]="shotSpeed",t[t.shotPower=2]="shotPower",t}(ec||{});class sj extends hf{constructor(e,n,r){super(e,n),this.config=r}}const tc={enemy:{autoSpawnSpeed:1.35},ship:{shotSpeed:3},powerUpConfig:[{type:ec.speed,assetUrl:"assets/game/power-up-1.json",animationName:"power-up-1",powerUp:{speed:.1,shot:0,energy:0}},{type:ec.shotSpeed,assetUrl:"assets/game/power-up-2.json",animationName:"power-up-2",powerUp:{speed:0,shot:1,energy:0}},{type:ec.shotPower,assetUrl:"assets/game/powerups/bolt/bolt.json",animationName:"bolt",powerUp:{speed:.1,shot:0,energy:0}},{type:ec.shotPower,assetUrl:"assets/game/powerups/pill/pill.json",animationName:"pill",powerUp:{speed:.1,shot:0,energy:1}}]};class oj{constructor(e){this.app=e,this.collectables=[],this.animations={}}init(){var e=this;return(0,De.Z)(function*(){for(const n of tc.powerUpConfig){const r=yield as.load(n.assetUrl);e.animations[n.type]=r.animations[n.animationName]}})()}spawn(e,n){if(Math.random()>.2)return;const i=Math.floor(Math.random()*tc.powerUpConfig.length),s=tc.powerUpConfig[i],a=new sj(1,this.animations[s.type],s);a.animationSpeed=.167,a.play(),a.anchor.set(.5),a.x=e,a.y=n,this.app.stage.addChild(a),this.collectables.push(a)}collect(e){if(!e||e.destroyed)return;const n=this.collectables.find(r=>!r.destroyed&&e.hit(r));n&&(e.shotSpeed+=n.config.powerUp.speed,e.shotPower+=n.config.powerUp.shot,e.energy+=n.config.powerUp.energy,n.destroy(),this.collectables=this.collectables.filter(r=>!r.destroyed))}}function df(t,e,n){(function aj(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function cI(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Bt(t,e){return function lj(t,e){return e.get?e.get.call(t):e.value}(t,cI(t,e,"get"))}function Ro(t,e,n){return function uj(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,cI(t,e,"set"),n),n}var No=new WeakMap;class cj{constructor(e,n){df(this,No,{writable:!0,value:void 0}),this.app=e,this.collectables=n,Ro(this,No,[]),this.elapsed=0,this.lastEnemySpawn=-1}get enemies(){return[...Bt(this,No)]}init(){var e=this;return(0,De.Z)(function*(){e.explosionSprite=yield as.load("assets/game/explosion.json"),e.enemySprite=yield as.load("assets/game/enemy.json")})()}update(e,n){this.elapsed+=e,Ro(this,No,Bt(this,No).filter(i=>!i.destroyed)),Bt(this,No).filter(i=>i.y>this.app.screen.height+50).forEach(i=>{i.y=0});const r=Math.floor(this.elapsed);r%Math.floor(60/(tc.enemy.autoSpawnSpeed+.1*(n-1)))==0&&r!==this.lastEnemySpawn&&(this.lastEnemySpawn=r,this.spawn(n))}hit(e){let n=0;for(const r of e){const i=this.enemies.find(s=>!s.destroyed&&r.hit(s));if(i){const s=new Ka(this.explosionSprite.animations.explosion);s.animationSpeed=.167,s.loop=!1,s.x=i.x,s.y=i.y,s.onComplete=()=>{this.collectables.spawn(s.x,s.y),s.destroy()},this.app.stage.addChild(s),i.destroy(),r.destroy(),s.play(),n++}}return n}kill(e){if(!e||e.destroyed)return!1;const n=this.enemies.find(r=>!r.destroyed&&e.hit(r));if(n){const r=new Ka(this.explosionSprite.animations.explosion);return r.animationSpeed=.167,r.loop=!1,r.x=n.x,r.y=n.y,r.onComplete=()=>{r.destroy()},this.app.stage.addChild(r),n.destroy(),r.play(),!0}return!1}spawn(e){const n=Math.floor(Math.random()*this.app.screen.width-20)+10,r=new hf(1+.25*e,this.enemySprite.animations.frame);r.animationSpeed=.167,r.play(),r.anchor.set(.5),r.x=n,r.y=10,Bt(this,No).push(r),this.app.stage.addChild(r)}}class Ky extends ey{constructor(e,n,r,i,s,o=0,a=1e3){super(r,i,s),this.speedTilepositionY=e,this.speedTilepositionX=n,this.speedY=o,this.maxY=a,this.speedTilepositionY=e,this.speedTilepositionX=n}update(e){this.tilePosition.y+=e*this.speedTilepositionY,this.tilePosition.x+=e*this.speedTilepositionX,this.y+=e*this.speedY,this.y>this.maxY&&(this.y=-this.height)}}class hj{constructor(e){this.app=e,this.landscapes=[]}setup(){if(this.landscapes.length)throw new Error("do not call setup twice");const e=new Ky(.25,0,be.from("assets/game/desert-background-looped.png"),this.app.screen.width,this.app.screen.height);this.landscapes.push(e),this.app.stage.addChild(e);const n=new Ky(0,.25,be.from("assets/game/clouds-transparent.png"),this.app.screen.width,103,.75,this.app.screen.height);n.y=Math.floor(this.app.screen.height/2),this.landscapes.push(n),this.app.stage.addChild(n);const r=new Ky(0,.27,be.from("assets/game/clouds-transparent.png"),this.app.screen.width,103,.8,this.app.screen.height);r.y=Math.floor(this.app.screen.height/4),this.landscapes.push(r),this.app.stage.addChild(r)}update(e){this.landscapes.forEach(n=>n.update(e))}}class dj{constructor(e){this.app=e,this.style=new Ai({fontFamily:"Arial",fontSize:24,fontStyle:"normal",fontWeight:"bold",fill:["#ffffff","#00ff99"],stroke:"#4a1850",strokeThickness:5,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:3,align:"right"}),this.points=new Fs("0000000",this.style),this.points.x=5,this.points.y=65,this.app.stage.addChild(this.points);const n=new Sn;this.lifesLabel=new Ou,this.lifesLabel.beginFill(16711680),this.lifesLabel.drawRect(0,0,250,10),this.lifesLabel.endFill(),n.addChild(this.lifesLabel),this.app.stage.addChild(n),this.lifesLabel.x=5,this.lifesLabel.y=35,this.app.stage.addChild(this.lifesLabel),this.levelLabel=new Fs("Level: 1",this.style),this.levelLabel.x=this.app.screen.width-this.levelLabel.width,this.levelLabel.y=35,this.app.stage.addChild(this.levelLabel)}set kills(e){this.points.text=e.toString().padStart(7,"0")}set lifes(e){this.lifesLabel.width=25*e}set level(e){this.levelLabel.text="Level: "+e.toString(),this.levelLabel.updateText(!0),this.levelLabel.x=this.app.screen.width-this.levelLabel.width}}var ff=new WeakMap;class fj extends hf{constructor(){super(...arguments),df(this,ff,{writable:!0,value:void 0}),this.shotPower=1,this.shotSpeed=1,Ro(this,ff,10)}set energy(e){Ro(this,ff,Math.min(e,10))}get energy(){return Bt(this,ff)}}var Oo=new WeakMap,xn=new WeakMap;class pj{constructor(e){df(this,Oo,{writable:!0,value:void 0}),df(this,xn,{writable:!0,value:void 0}),this.app=e,this.autoFire=!1,Ro(this,Oo,[]),this.elapsed=0,this.lastShot=0}init(){var e=this;return(0,De.Z)(function*(){const n=yield as.load("assets/game/ship/ship_blue.json");e.shipAnimation=n.animations.ship;const r=yield as.load("assets/game/laser.json");e.laserAnimation=r.animations.laser})()}get instance(){if(!Bt(this,xn))throw new Error("Where is my ship?");return Bt(this,xn)}get shots(){return[...Bt(this,Oo)]}spawn(){Ro(this,xn,new fj(0,this.shipAnimation)),Bt(this,xn).animationSpeed=.167,Bt(this,xn).play(),Bt(this,xn).x=Math.floor(this.app.screen.width/2),Bt(this,xn).y=this.app.screen.height-100,this.app.stage.addChild(Bt(this,xn))}shot(){if(!Bt(this,xn)||Bt(this,xn).destroyed)return;const e=Math.min(this.instance.shotPower,3);for(let n=1;n<=e;n++){const r=new hf(-tc.ship.shotSpeed,this.laserAnimation);r.animationSpeed=.167,r.play(),r.anchor.set(.5),1===e||3===e&&2===n?(r.x=Bt(this,xn).x,r.y=Bt(this,xn).y-45):e>1&&1===n?(r.x=Bt(this,xn).x-45,r.y=Bt(this,xn).y-12):(r.x=Bt(this,xn).x+45,r.y=Bt(this,xn).y-12),Bt(this,Oo).push(r),this.app.stage.addChild(r)}}update(e){this.elapsed+=e;const n=Math.floor(this.elapsed);this.autoFire&&n%Math.floor(60/this.instance.shotSpeed)==0&&n!==this.lastShot&&(this.lastShot=n,this.shot()),Bt(this,Oo).filter(r=>!r.destroyed&&r.y<0).forEach(r=>r.destroy()),Ro(this,Oo,Bt(this,Oo).filter(r=>!r.destroyed))}}let hI=(()=>{var t;class e{constructor(r){this.storage=r,this.kills=new wf(0),this.level=new wf(1),this.started=!1}init(r){var i=this;return(0,De.Z)(function*(){i.app=new L_({height:r.nativeElement.clientHeight,width:r.nativeElement.clientWidth,backgroundColor:0});const s=new oj(i.app);yield s.init();const o=new hj(i.app),a=new cj(i.app,s);yield a.init();const l=new pj(i.app);yield l.init(),o.setup();const u=new dj(i.app);i.setup(o,s,a,l,u),i.kills.pipe(bf(),function AG(t,e){return X((n,r)=>{let i=0;n.subscribe(le(r,s=>t.call(e,s,i++)&&r.next(s)))})}(c=>!!c),sy(c=>i.level.next(Math.ceil(c/10))),sy(c=>u.kills=c)).subscribe(),i.level.pipe(bf(),sy(c=>u.level=c)).subscribe(),r.nativeElement.appendChild(i.app.view),yield i.presentPopup(uI)})()}setup(r,i,s,o,a){const l=this.app;o.spawn(),this.setupInteractions(o),l.ticker.add(u=>{if(!this.started)return;r.update(u),s.update(u,this.level.value);const c=s.hit(o.shots);this.kills.next(this.kills.value+c),s.kill(o.instance)&&(o.instance.energy-=1,a.lifes=o.instance.energy,0===o.instance.energy&&(this.storage.setHighscore(this.kills.value,this.level.value),this.presentPopup(ij),o.instance.destroy(),this.started=!1)),a.lifes=o.instance.energy,i.collect(o.instance),o.update(u)})}setupInteractions(r){this.app.stage.eventMode="dynamic",this.app.stage.hitArea=this.app.screen,this.app.stage.on("pointerdown",()=>r.autoFire=!0),this.app.stage.on("pointerup",()=>r.autoFire=!1),this.app.stage.on("pointermove",i=>function gj(t,e){!e||e.destroyed||(e.x=t.data.originalEvent.clientX??t.data.originalEvent.touches[0].clientX)}(i,r.instance))}presentPopup(r){var i=this;return(0,De.Z)(function*(){i.currentPopup&&(yield i.hideAndRemoveScreen(i.currentPopup)),i.currentPopup=new r(i),yield i.addAndShowScreen(i.currentPopup)})()}hideAndRemoveScreen(r){var i=this;return(0,De.Z)(function*(){r.interactiveChildren=!1,r.hide&&(yield r.hide()),r.update&&i.app.ticker.remove(r.update,r),r.parent?.removeChild(r),r.reset&&r.reset()})()}addAndShowScreen(r){var i=this;return(0,De.Z)(function*(){i.app.stage.addChild(r),r.prepare&&r.prepare(),r.resize&&r.resize(i.app.screen.width,i.app.screen.height),r.update&&i.app.ticker.add(r.update,r),r.show&&(r.interactiveChildren=!1,yield r.show(),r.interactiveChildren=!0)})()}start(r){var i=this;return(0,De.Z)(function*(){yield i.hideAndRemoveScreen(r),i.started=!0})()}openCredits(r){var i=this;return(0,De.Z)(function*(){yield i.hideAndRemoveScreen(r),yield i.presentPopup(tj)})()}openNavigation(r){var i=this;return(0,De.Z)(function*(){yield i.hideAndRemoveScreen(r),yield i.presentPopup(uI)})()}endGame(r){var i=this;return(0,De.Z)(function*(){yield i.hideAndRemoveScreen(r),window.location.reload()})()}openHighscore(r){var i=this;return(0,De.Z)(function*(){yield i.hideAndRemoveScreen(r),yield i.presentPopup(nj)})()}}return(t=e).\u0275fac=function(r){return new(r||t)(ht(lI))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),e})(),mj=(()=>{var t;class e{constructor(r,i,s){this.elementRef=r,this.ngZone=i,this.pixiGame=s}ngOnInit(){return this.ngZone.runOutsideAngular(()=>this.pixiGame.init(this.elementRef))}}return(t=e).\u0275fac=function(r){return new(r||t)(nt(eo),nt(Vt),nt(hI))},t.\u0275cmp=Uf({type:t,selectors:[["app-pixijs"]],features:[vE([hI])],decls:0,vars:0,template:function(r,i){},encapsulation:2}),e})(),_j=(()=>{var t;class e{ngOnInit(){dU.hide()}}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Uf({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&Ag(0,"app-pixijs")},dependencies:[mj],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}"]}),e})(),yj=(()=>{var t;class e{}return(t=e).\u0275fac=function(r){return new(r||t)},t.\u0275mod=xl({type:t,bootstrap:[_j]}),t.\u0275inj=zo({imports:[iU]}),e})();nU().bootstrapModule(yj,{ngZone:"noop"}).catch(t=>console.error(t))},726:(Ce,pe,z)=>{"use strict";z.d(pe,{Uw:()=>L,fo:()=>G});var A=z(861);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var he=function(q){return q.Unimplemented="UNIMPLEMENTED",q.Unavailable="UNAVAILABLE",q}(he||{});class de extends Error{constructor(S,_,b){super(S),this.message=S,this.code=_,this.data=b}}const ye=q=>{var S,_,b,x,D;const R=q.CapacitorCustomPlatform||null,T=q.Capacitor||{},P=T.Plugins=T.Plugins||{},B=q.CapacitorPlatforms,se=(null===(S=B?.currentPlatform)||void 0===S?void 0:S.getPlatform)||(()=>null!==R?R.name:(q=>{var S,_;return q?.androidBridge?"android":null!==(_=null===(S=q?.webkit)||void 0===S?void 0:S.messageHandlers)&&void 0!==_&&_.bridge?"ios":"web"})(q)),le=(null===(_=B?.currentPlatform)||void 0===_?void 0:_.isNativePlatform)||(()=>"web"!==se()),Oe=(null===(b=B?.currentPlatform)||void 0===b?void 0:b.isPluginAvailable)||(Ye=>{const Pt=_t.get(Ye);return!(!Pt?.platforms.has(se())&&!xt(Ye))}),xt=(null===(x=B?.currentPlatform)||void 0===x?void 0:x.getPluginHeader)||(Ye=>{var Pt;return null===(Pt=T.PluginHeaders)||void 0===Pt?void 0:Pt.find(jn=>jn.name===Ye)}),_t=new Map,Le=(null===(D=B?.currentPlatform)||void 0===D?void 0:D.registerPlugin)||((Ye,Pt={})=>{const jn=_t.get(Ye);if(jn)return console.warn(`Capacitor plugin "${Ye}" already registered. Cannot register plugins twice.`),jn.proxy;const bn=se(),or=xt(Ye);let ar;const $s=function(){var bt=(0,A.Z)(function*(){return!ar&&bn in Pt?ar=ar="function"==typeof Pt[bn]?yield Pt[bn]():Pt[bn]:null!==R&&!ar&&"web"in Pt&&(ar=ar="function"==typeof Pt.web?yield Pt.web():Pt.web),ar});return function(){return bt.apply(this,arguments)}}(),Li=bt=>{let tn;const $n=(...Pn)=>{const Rn=$s().then(N=>{const U=((bt,tn)=>{var $n,Pn;if(!or){if(bt)return null===(Pn=bt[tn])||void 0===Pn?void 0:Pn.bind(bt);throw new de(`"${Ye}" plugin is not implemented on ${bn}`,he.Unimplemented)}{const Rn=or?.methods.find(N=>tn===N.name);if(Rn)return"promise"===Rn.rtype?N=>T.nativePromise(Ye,tn.toString(),N):(N,U)=>T.nativeCallback(Ye,tn.toString(),N,U);if(bt)return null===($n=bt[tn])||void 0===$n?void 0:$n.bind(bt)}})(N,bt);if(U){const lt=U(...Pn);return tn=lt?.remove,lt}throw new de(`"${Ye}.${bt}()" is not implemented on ${bn}`,he.Unimplemented)});return"addListener"===bt&&(Rn.remove=(0,A.Z)(function*(){return tn()})),Rn};return $n.toString=()=>`${bt.toString()}() { [capacitor code] }`,Object.defineProperty($n,"name",{value:bt,writable:!1,configurable:!1}),$n},ps=Li("addListener"),Ho=Li("removeListener"),ki=(bt,tn)=>{const $n=ps({eventName:bt},tn),Pn=function(){var N=(0,A.Z)(function*(){const U=yield $n;Ho({eventName:bt,callbackId:U},tn)});return function(){return N.apply(this,arguments)}}(),Rn=new Promise(N=>$n.then(()=>N({remove:Pn})));return Rn.remove=(0,A.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Pn()}),Rn},Bi=new Proxy({},{get(bt,tn){switch(tn){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return or?ki:ps;case"removeListener":return Ho;default:return Li(tn)}}});return P[Ye]=Bi,_t.set(Ye,{name:Ye,proxy:Bi,platforms:new Set([...Object.keys(Pt),...or?[bn]:[]])}),Bi});return T.convertFileSrc||(T.convertFileSrc=Ye=>Ye),T.getPlatform=se,T.handleError=Ye=>q.console.error(Ye),T.isNativePlatform=le,T.isPluginAvailable=Oe,T.pluginMethodNoop=(Ye,Pt,jn)=>Promise.reject(`${jn} does not have an implementation of "${Pt}".`),T.registerPlugin=Le,T.Exception=de,T.DEBUG=!!T.DEBUG,T.isLoggingEnabled=!!T.isLoggingEnabled,T.platform=T.getPlatform(),T.isNative=T.isNativePlatform(),T},Te=(q=>q.Capacitor=ye(q))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),G=Te.registerPlugin;class L{constructor(S){this.listeners={},this.windowListeners={},S&&(console.warn(`Capacitor WebPlugin "${S.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=S)}addListener(S,_){var b=this;this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push(_);const D=this.windowListeners[S];D&&!D.registered&&this.addWindowListener(D);const R=function(){var P=(0,A.Z)(function*(){return b.removeListener(S,_)});return function(){return P.apply(this,arguments)}}(),T=Promise.resolve({remove:R});return Object.defineProperty(T,"remove",{value:(P=(0,A.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield R()}),function(){return P.apply(this,arguments)})}),T;var P}removeAllListeners(){var S=this;return(0,A.Z)(function*(){S.listeners={};for(const _ in S.windowListeners)S.removeWindowListener(S.windowListeners[_]);S.windowListeners={}})()}notifyListeners(S,_){const b=this.listeners[S];b&&b.forEach(x=>x(_))}hasListeners(S){return!!this.listeners[S].length}registerWindowListener(S,_){this.windowListeners[_]={registered:!1,windowEventName:S,pluginEventName:_,handler:b=>{this.notifyListeners(_,b)}}}unimplemented(S="not implemented"){return new Te.Exception(S,he.Unimplemented)}unavailable(S="not available"){return new Te.Exception(S,he.Unavailable)}removeListener(S,_){var b=this;return(0,A.Z)(function*(){const x=b.listeners[S];if(!x)return;const D=x.indexOf(_);b.listeners[S].splice(D,1),b.listeners[S].length||b.removeWindowListener(b.windowListeners[S])})()}addWindowListener(S){window.addEventListener(S.windowEventName,S.handler),S.registered=!0}removeWindowListener(S){S&&(window.removeEventListener(S.windowEventName,S.handler),S.registered=!1)}}const j=q=>encodeURIComponent(q).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),$=q=>q.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ae extends L{getCookies(){return(0,A.Z)(function*(){const S=document.cookie,_={};return S.split(";").forEach(b=>{if(b.length<=0)return;let[x,D]=b.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");x=$(x).trim(),D=$(D).trim(),_[x]=D}),_})()}setCookie(S){return(0,A.Z)(function*(){try{const _=j(S.key),b=j(S.value),x=`; expires=${(S.expires||"").replace("expires=","")}`,D=(S.path||"/").replace("path=",""),R=null!=S.url&&S.url.length>0?`domain=${S.url}`:"";document.cookie=`${_}=${b||""}${x}; path=${D}; ${R};`}catch(_){return Promise.reject(_)}})()}deleteCookie(S){return(0,A.Z)(function*(){try{document.cookie=`${S.key}=; Max-Age=0`}catch(_){return Promise.reject(_)}})()}clearCookies(){return(0,A.Z)(function*(){try{const S=document.cookie.split(";")||[];for(const _ of S)document.cookie=_.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(S){return Promise.reject(S)}})()}clearAllCookies(){var S=this;return(0,A.Z)(function*(){try{yield S.clearCookies()}catch(_){return Promise.reject(_)}})()}}G("CapacitorCookies",{web:()=>new ae});const O=function(){var q=(0,A.Z)(function*(S){return new Promise((_,b)=>{const x=new FileReader;x.onload=()=>{const D=x.result;_(D.indexOf(",")>=0?D.split(",")[1]:D)},x.onerror=D=>b(D),x.readAsDataURL(S)})});return function(_){return q.apply(this,arguments)}}();class He extends L{request(S){return(0,A.Z)(function*(){const _=((q,S={})=>{const _=Object.assign({method:q.method||"GET",headers:q.headers},S),x=((q={})=>{const S=Object.keys(q);return Object.keys(q).map(x=>x.toLocaleLowerCase()).reduce((x,D,R)=>(x[D]=q[S[R]],x),{})})(q.headers)["content-type"]||"";if("string"==typeof q.data)_.body=q.data;else if(x.includes("application/x-www-form-urlencoded")){const D=new URLSearchParams;for(const[R,T]of Object.entries(q.data||{}))D.set(R,T);_.body=D.toString()}else if(x.includes("multipart/form-data")){const D=new FormData;if(q.data instanceof FormData)q.data.forEach((T,P)=>{D.append(P,T)});else for(const T of Object.keys(q.data))D.append(T,q.data[T]);_.body=D;const R=new Headers(_.headers);R.delete("content-type"),_.headers=R}else(x.includes("application/json")||"object"==typeof q.data)&&(_.body=JSON.stringify(q.data));return _})(S,S.webFetchExtra),b=((q,S=!0)=>q?Object.entries(q).reduce((b,x)=>{const[D,R]=x;let T,P;return Array.isArray(R)?(P="",R.forEach(B=>{T=S?encodeURIComponent(B):B,P+=`${D}=${T}&`}),P.slice(0,-1)):(T=S?encodeURIComponent(R):R,P=`${D}=${T}`),`${b}&${P}`},"").substr(1):null)(S.params,S.shouldEncodeUrlParams),x=b?`${S.url}?${b}`:S.url,D=yield fetch(x,_),R=D.headers.get("content-type")||"";let P,B,{responseType:T="text"}=D.ok?S:{};switch(R.includes("application/json")&&(T="json"),T){case"arraybuffer":case"blob":B=yield D.blob(),P=yield O(B);break;case"json":P=yield D.json();break;default:P=yield D.text()}const ee={};return D.headers.forEach((se,X)=>{ee[X]=se}),{data:P,headers:ee,status:D.status,url:D.url}})()}get(S){var _=this;return(0,A.Z)(function*(){return _.request(Object.assign(Object.assign({},S),{method:"GET"}))})()}post(S){var _=this;return(0,A.Z)(function*(){return _.request(Object.assign(Object.assign({},S),{method:"POST"}))})()}put(S){var _=this;return(0,A.Z)(function*(){return _.request(Object.assign(Object.assign({},S),{method:"PUT"}))})()}patch(S){var _=this;return(0,A.Z)(function*(){return _.request(Object.assign(Object.assign({},S),{method:"PATCH"}))})()}delete(S){var _=this;return(0,A.Z)(function*(){return _.request(Object.assign(Object.assign({},S),{method:"DELETE"}))})()}}G("CapacitorHttp",{web:()=>new He})},98:(Ce,pe,z)=>{"use strict";var A=z(491),te=z(436),ce=te(A("String.prototype.indexOf"));Ce.exports=function(J,ne){var re=A(J,!!ne);return"function"==typeof re&&ce(J,".prototype.")>-1?te(re):re}},436:(Ce,pe,z)=>{"use strict";var A=z(333),te=z(491),ce=te("%Function.prototype.apply%"),oe=te("%Function.prototype.call%"),J=te("%Reflect.apply%",!0)||A.call(oe,ce),ne=te("%Object.getOwnPropertyDescriptor%",!0),re=te("%Object.defineProperty%",!0),he=te("%Math.max%");if(re)try{re({},"a",{value:1})}catch{re=null}Ce.exports=function(ye){var ge=J(A,oe,arguments);return ne&&re&&ne(ge,"length").configurable&&re(ge,"length",{value:1+he(0,ye.length-(arguments.length-1))}),ge};var de=function(){return J(A,ce,arguments)};re?re(Ce.exports,"apply",{value:de}):Ce.exports.apply=de},145:Ce=>{"use strict";function pe(_,b,x){x=x||2;var B,ee,se,X,le,we,Oe,D=b&&b.length,R=D?b[0]*x:_.length,T=z(_,0,R,x,!0),P=[];if(!T||T.next===T.prev)return P;if(D&&(T=function re(_,b,x,D){var T,P,se,R=[];for(T=0,P=b.length;T<P;T++)(se=z(_,b[T]*D,T<P-1?b[T+1]*D:_.length,D,!1))===se.next&&(se.steiner=!0),R.push(Ie(se));for(R.sort(he),T=0;T<R.length;T++)x=de(R[T],x);return x}(_,b,T,x)),_.length>80*x){B=se=_[0],ee=X=_[1];for(var Pe=x;Pe<R;Pe+=x)(le=_[Pe])<B&&(B=le),(we=_[Pe+1])<ee&&(ee=we),le>se&&(se=le),we>X&&(X=we);Oe=0!==(Oe=Math.max(se-B,X-ee))?32767/Oe:0}return te(T,P,x,B,ee,Oe,0),P}function z(_,b,x,D,R){var T,P;if(R===S(_,b,x,D)>0)for(T=b;T<x;T+=D)P=He(T,_[T],_[T+1],P);else for(T=x-D;T>=b;T-=D)P=He(T,_[T],_[T+1],P);return P&&j(P,P.next)&&(at(P),P=P.next),P}function A(_,b){if(!_)return _;b||(b=_);var D,x=_;do{if(D=!1,x.steiner||!j(x,x.next)&&0!==I(x.prev,x,x.next))x=x.next;else{if(at(x),(x=b=x.prev)===x.next)break;D=!0}}while(D||x!==b);return b}function te(_,b,x,D,R,T,P){if(_){!P&&T&&function ge(_,b,x,D){var R=_;do{0===R.z&&(R.z=G(R.x,R.y,b,x,D)),R.prevZ=R.prev,R.nextZ=R.next,R=R.next}while(R!==_);R.prevZ.nextZ=null,R.prevZ=null,function Te(_){var b,x,D,R,T,P,B,ee,se=1;do{for(x=_,_=null,T=null,P=0;x;){for(P++,D=x,B=0,b=0;b<se&&(B++,D=D.nextZ);b++);for(ee=se;B>0||ee>0&&D;)0!==B&&(0===ee||!D||x.z<=D.z)?(R=x,x=x.nextZ,B--):(R=D,D=D.nextZ,ee--),T?T.nextZ=R:_=R,R.prevZ=T,T=R;x=D}T.nextZ=null,se*=2}while(P>1)}(R)}(_,D,R,T);for(var ee,se,B=_;_.prev!==_.next;)if(ee=_.prev,se=_.next,T?oe(_,D,R,T):ce(_))b.push(ee.i/x|0),b.push(_.i/x|0),b.push(se.i/x|0),at(_),_=se.next,B=se.next;else if((_=se)===B){P?1===P?te(_=J(A(_),b,x),b,x,D,R,T,2):2===P&&ne(_,b,x,D,R,T):te(A(_),b,x,D,R,T,1);break}}}function ce(_){var b=_.prev,x=_,D=_.next;if(I(b,x,D)>=0)return!1;for(var R=b.x,T=x.x,P=D.x,B=b.y,ee=x.y,se=D.y,X=R<T?R<P?R:P:T<P?T:P,le=B<ee?B<se?B:se:ee<se?ee:se,we=R>T?R>P?R:P:T>P?T:P,Oe=B>ee?B>se?B:se:ee>se?ee:se,Pe=D.next;Pe!==b;){if(Pe.x>=X&&Pe.x<=we&&Pe.y>=le&&Pe.y<=Oe&&ve(R,B,T,ee,P,se,Pe.x,Pe.y)&&I(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.next}return!0}function oe(_,b,x,D){var R=_.prev,T=_,P=_.next;if(I(R,T,P)>=0)return!1;for(var B=R.x,ee=T.x,se=P.x,X=R.y,le=T.y,we=P.y,Oe=B<ee?B<se?B:se:ee<se?ee:se,Pe=X<le?X<we?X:we:le<we?le:we,xt=B>ee?B>se?B:se:ee>se?ee:se,Je=X>le?X>we?X:we:le>we?le:we,it=G(Oe,Pe,b,x,D),_t=G(xt,Je,b,x,D),Be=_.prevZ,Le=_.nextZ;Be&&Be.z>=it&&Le&&Le.z<=_t;){if(Be.x>=Oe&&Be.x<=xt&&Be.y>=Pe&&Be.y<=Je&&Be!==R&&Be!==P&&ve(B,X,ee,le,se,we,Be.x,Be.y)&&I(Be.prev,Be,Be.next)>=0||(Be=Be.prevZ,Le.x>=Oe&&Le.x<=xt&&Le.y>=Pe&&Le.y<=Je&&Le!==R&&Le!==P&&ve(B,X,ee,le,se,we,Le.x,Le.y)&&I(Le.prev,Le,Le.next)>=0))return!1;Le=Le.nextZ}for(;Be&&Be.z>=it;){if(Be.x>=Oe&&Be.x<=xt&&Be.y>=Pe&&Be.y<=Je&&Be!==R&&Be!==P&&ve(B,X,ee,le,se,we,Be.x,Be.y)&&I(Be.prev,Be,Be.next)>=0)return!1;Be=Be.prevZ}for(;Le&&Le.z<=_t;){if(Le.x>=Oe&&Le.x<=xt&&Le.y>=Pe&&Le.y<=Je&&Le!==R&&Le!==P&&ve(B,X,ee,le,se,we,Le.x,Le.y)&&I(Le.prev,Le,Le.next)>=0)return!1;Le=Le.nextZ}return!0}function J(_,b,x){var D=_;do{var R=D.prev,T=D.next.next;!j(R,T)&&$(R,D,D.next,T)&&ue(R,T)&&ue(T,R)&&(b.push(R.i/x|0),b.push(D.i/x|0),b.push(T.i/x|0),at(D),at(D.next),D=_=T),D=D.next}while(D!==_);return A(D)}function ne(_,b,x,D,R,T){var P=_;do{for(var B=P.next.next;B!==P.prev;){if(P.i!==B.i&&L(P,B)){var ee=Ge(P,B);return P=A(P,P.next),ee=A(ee,ee.next),te(P,b,x,D,R,T,0),void te(ee,b,x,D,R,T,0)}B=B.next}P=P.next}while(P!==_)}function he(_,b){return _.x-b.x}function de(_,b){var x=function Me(_,b){var P,x=b,D=_.x,R=_.y,T=-1/0;do{if(R<=x.y&&R>=x.next.y&&x.next.y!==x.y){var B=x.x+(R-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(B<=D&&B>T&&(T=B,P=x.x<x.next.x?x:x.next,B===D))return P}x=x.next}while(x!==b);if(!P)return null;var we,ee=P,se=P.x,X=P.y,le=1/0;x=P;do{D>=x.x&&x.x>=se&&D!==x.x&&ve(R<X?D:T,R,se,X,R<X?T:D,R,x.x,x.y)&&(we=Math.abs(R-x.y)/(D-x.x),ue(x,_)&&(we<le||we===le&&(x.x>P.x||x.x===P.x&&ye(P,x)))&&(P=x,le=we)),x=x.next}while(x!==ee);return P}(_,b);if(!x)return b;var D=Ge(x,_);return A(D,D.next),A(x,x.next)}function ye(_,b){return I(_.prev,_,b.prev)<0&&I(b.next,_,_.next)<0}function G(_,b,x,D,R){return(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_=(_-x)*R|0)|_<<8))|_<<4))|_<<2))|_<<1))|(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b=(b-D)*R|0)|b<<8))|b<<4))|b<<2))|b<<1))<<1}function Ie(_){var b=_,x=_;do{(b.x<x.x||b.x===x.x&&b.y<x.y)&&(x=b),b=b.next}while(b!==_);return x}function ve(_,b,x,D,R,T,P,B){return(R-P)*(b-B)>=(_-P)*(T-B)&&(_-P)*(D-B)>=(x-P)*(b-B)&&(x-P)*(T-B)>=(R-P)*(D-B)}function L(_,b){return _.next.i!==b.i&&_.prev.i!==b.i&&!function O(_,b){var x=_;do{if(x.i!==_.i&&x.next.i!==_.i&&x.i!==b.i&&x.next.i!==b.i&&$(x,x.next,_,b))return!0;x=x.next}while(x!==_);return!1}(_,b)&&(ue(_,b)&&ue(b,_)&&function C(_,b){var x=_,D=!1,R=(_.x+b.x)/2,T=(_.y+b.y)/2;do{x.y>T!=x.next.y>T&&x.next.y!==x.y&&R<(x.next.x-x.x)*(T-x.y)/(x.next.y-x.y)+x.x&&(D=!D),x=x.next}while(x!==_);return D}(_,b)&&(I(_.prev,_,b.prev)||I(_,b.prev,b))||j(_,b)&&I(_.prev,_,_.next)>0&&I(b.prev,b,b.next)>0)}function I(_,b,x){return(b.y-_.y)*(x.x-b.x)-(b.x-_.x)*(x.y-b.y)}function j(_,b){return _.x===b.x&&_.y===b.y}function $(_,b,x,D){var R=ie(I(_,b,x)),T=ie(I(_,b,D)),P=ie(I(x,D,_)),B=ie(I(x,D,b));return!!(R!==T&&P!==B||0===R&&ae(_,x,b)||0===T&&ae(_,D,b)||0===P&&ae(x,_,D)||0===B&&ae(x,b,D))}function ae(_,b,x){return b.x<=Math.max(_.x,x.x)&&b.x>=Math.min(_.x,x.x)&&b.y<=Math.max(_.y,x.y)&&b.y>=Math.min(_.y,x.y)}function ie(_){return _>0?1:_<0?-1:0}function ue(_,b){return I(_.prev,_,_.next)<0?I(_,b,_.next)>=0&&I(_,_.prev,b)>=0:I(_,b,_.prev)<0||I(_,_.next,b)<0}function Ge(_,b){var x=new q(_.i,_.x,_.y),D=new q(b.i,b.x,b.y),R=_.next,T=b.prev;return _.next=b,b.prev=_,x.next=R,R.prev=x,D.next=x,x.prev=D,T.next=D,D.prev=T,D}function He(_,b,x,D){var R=new q(_,b,x);return D?(R.next=D.next,R.prev=D,D.next.prev=R,D.next=R):(R.prev=R,R.next=R),R}function at(_){_.next.prev=_.prev,_.prev.next=_.next,_.prevZ&&(_.prevZ.nextZ=_.nextZ),_.nextZ&&(_.nextZ.prevZ=_.prevZ)}function q(_,b,x){this.i=_,this.x=b,this.y=x,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function S(_,b,x,D){for(var R=0,T=b,P=x-D;T<x;T+=D)R+=(_[P]-_[T])*(_[T+1]+_[P+1]),P=T;return R}Ce.exports=pe,Ce.exports.default=pe,pe.deviation=function(_,b,x,D){var R=b&&b.length,P=Math.abs(S(_,0,R?b[0]*x:_.length,x));if(R)for(var B=0,ee=b.length;B<ee;B++)P-=Math.abs(S(_,b[B]*x,B<ee-1?b[B+1]*x:_.length,x));var le=0;for(B=0;B<D.length;B+=3){var we=D[B]*x,Oe=D[B+1]*x,Pe=D[B+2]*x;le+=Math.abs((_[we]-_[Pe])*(_[Oe+1]-_[we+1])-(_[we]-_[Oe])*(_[Pe+1]-_[we+1]))}return 0===P&&0===le?0:Math.abs((le-P)/P)},pe.flatten=function(_){for(var b=_[0][0].length,x={vertices:[],holes:[],dimensions:b},D=0,R=0;R<_.length;R++){for(var T=0;T<_[R].length;T++)for(var P=0;P<b;P++)x.vertices.push(_[R][T][P]);R>0&&x.holes.push(D+=_[R-1].length)}return x}},472:Ce=>{"use strict";var pe=Object.prototype.hasOwnProperty,z="~";function A(){}function te(ne,re,he){this.fn=ne,this.context=re,this.once=he||!1}function ce(ne,re,he,de,Me){if("function"!=typeof he)throw new TypeError("The listener must be a function");var ye=new te(he,de||ne,Me),ge=z?z+re:re;return ne._events[ge]?ne._events[ge].fn?ne._events[ge]=[ne._events[ge],ye]:ne._events[ge].push(ye):(ne._events[ge]=ye,ne._eventsCount++),ne}function oe(ne,re){0==--ne._eventsCount?ne._events=new A:delete ne._events[re]}function J(){this._events=new A,this._eventsCount=0}Object.create&&(A.prototype=Object.create(null),(new A).__proto__||(z=!1)),J.prototype.eventNames=function(){var he,de,re=[];if(0===this._eventsCount)return re;for(de in he=this._events)pe.call(he,de)&&re.push(z?de.slice(1):de);return Object.getOwnPropertySymbols?re.concat(Object.getOwnPropertySymbols(he)):re},J.prototype.listeners=function(re){var de=this._events[z?z+re:re];if(!de)return[];if(de.fn)return[de.fn];for(var Me=0,ye=de.length,ge=new Array(ye);Me<ye;Me++)ge[Me]=de[Me].fn;return ge},J.prototype.listenerCount=function(re){var de=this._events[z?z+re:re];return de?de.fn?1:de.length:0},J.prototype.emit=function(re,he,de,Me,ye,ge){var Te=z?z+re:re;if(!this._events[Te])return!1;var ve,L,G=this._events[Te],Ie=arguments.length;if(G.fn){switch(G.once&&this.removeListener(re,G.fn,void 0,!0),Ie){case 1:return G.fn.call(G.context),!0;case 2:return G.fn.call(G.context,he),!0;case 3:return G.fn.call(G.context,he,de),!0;case 4:return G.fn.call(G.context,he,de,Me),!0;case 5:return G.fn.call(G.context,he,de,Me,ye),!0;case 6:return G.fn.call(G.context,he,de,Me,ye,ge),!0}for(L=1,ve=new Array(Ie-1);L<Ie;L++)ve[L-1]=arguments[L];G.fn.apply(G.context,ve)}else{var j,I=G.length;for(L=0;L<I;L++)switch(G[L].once&&this.removeListener(re,G[L].fn,void 0,!0),Ie){case 1:G[L].fn.call(G[L].context);break;case 2:G[L].fn.call(G[L].context,he);break;case 3:G[L].fn.call(G[L].context,he,de);break;case 4:G[L].fn.call(G[L].context,he,de,Me);break;default:if(!ve)for(j=1,ve=new Array(Ie-1);j<Ie;j++)ve[j-1]=arguments[j];G[L].fn.apply(G[L].context,ve)}}return!0},J.prototype.on=function(re,he,de){return ce(this,re,he,de,!1)},J.prototype.once=function(re,he,de){return ce(this,re,he,de,!0)},J.prototype.removeListener=function(re,he,de,Me){var ye=z?z+re:re;if(!this._events[ye])return this;if(!he)return oe(this,ye),this;var ge=this._events[ye];if(ge.fn)ge.fn===he&&(!Me||ge.once)&&(!de||ge.context===de)&&oe(this,ye);else{for(var Te=0,G=[],Ie=ge.length;Te<Ie;Te++)(ge[Te].fn!==he||Me&&!ge[Te].once||de&&ge[Te].context!==de)&&G.push(ge[Te]);G.length?this._events[ye]=1===G.length?G[0]:G:oe(this,ye)}return this},J.prototype.removeAllListeners=function(re){var he;return re?this._events[he=z?z+re:re]&&oe(this,he):(this._events=new A,this._eventsCount=0),this},J.prototype.off=J.prototype.removeListener,J.prototype.addListener=J.prototype.on,J.prefixed=z,J.EventEmitter=J,Ce.exports=J},238:Ce=>{"use strict";var z=Array.prototype.slice,A=Object.prototype.toString;Ce.exports=function(oe){var J=this;if("function"!=typeof J||"[object Function]"!==A.call(J))throw new TypeError("Function.prototype.bind called on incompatible "+J);for(var re,ne=z.call(arguments,1),de=Math.max(0,J.length-ne.length),Me=[],ye=0;ye<de;ye++)Me.push("$"+ye);if(re=Function("binder","return function ("+Me.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof re){var Te=J.apply(this,ne.concat(z.call(arguments)));return Object(Te)===Te?Te:this}return J.apply(oe,ne.concat(z.call(arguments)))}),J.prototype){var ge=function(){};ge.prototype=J.prototype,re.prototype=new ge,ge.prototype=null}return re}},333:(Ce,pe,z)=>{"use strict";var A=z(238);Ce.exports=Function.prototype.bind||A},491:(Ce,pe,z)=>{"use strict";var A,te=SyntaxError,ce=Function,oe=TypeError,J=function(q){try{return ce('"use strict"; return ('+q+").constructor;")()}catch{}},ne=Object.getOwnPropertyDescriptor;if(ne)try{ne({},"")}catch{ne=null}var re=function(){throw new oe},he=ne?function(){try{return re}catch{try{return ne(arguments,"callee").get}catch{return re}}}():re,de=z(152)(),Me=z(28)(),ye=Object.getPrototypeOf||(Me?function(q){return q.__proto__}:null),ge={},Te=typeof Uint8Array>"u"||!ye?A:ye(Uint8Array),G={"%AggregateError%":typeof AggregateError>"u"?A:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?A:ArrayBuffer,"%ArrayIteratorPrototype%":de&&ye?ye([][Symbol.iterator]()):A,"%AsyncFromSyncIteratorPrototype%":A,"%AsyncFunction%":ge,"%AsyncGenerator%":ge,"%AsyncGeneratorFunction%":ge,"%AsyncIteratorPrototype%":ge,"%Atomics%":typeof Atomics>"u"?A:Atomics,"%BigInt%":typeof BigInt>"u"?A:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?A:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?A:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?A:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?A:Float32Array,"%Float64Array%":typeof Float64Array>"u"?A:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?A:FinalizationRegistry,"%Function%":ce,"%GeneratorFunction%":ge,"%Int8Array%":typeof Int8Array>"u"?A:Int8Array,"%Int16Array%":typeof Int16Array>"u"?A:Int16Array,"%Int32Array%":typeof Int32Array>"u"?A:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":de&&ye?ye(ye([][Symbol.iterator]())):A,"%JSON%":"object"==typeof JSON?JSON:A,"%Map%":typeof Map>"u"?A:Map,"%MapIteratorPrototype%":typeof Map>"u"||!de||!ye?A:ye((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?A:Promise,"%Proxy%":typeof Proxy>"u"?A:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?A:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?A:Set,"%SetIteratorPrototype%":typeof Set>"u"||!de||!ye?A:ye((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?A:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":de&&ye?ye(""[Symbol.iterator]()):A,"%Symbol%":de?Symbol:A,"%SyntaxError%":te,"%ThrowTypeError%":he,"%TypedArray%":Te,"%TypeError%":oe,"%Uint8Array%":typeof Uint8Array>"u"?A:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?A:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?A:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?A:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?A:WeakMap,"%WeakRef%":typeof WeakRef>"u"?A:WeakRef,"%WeakSet%":typeof WeakSet>"u"?A:WeakSet};if(ye)try{null.error}catch(q){var Ie=ye(ye(q));G["%Error.prototype%"]=Ie}var ve=function q(S){var _;if("%AsyncFunction%"===S)_=J("async function () {}");else if("%GeneratorFunction%"===S)_=J("function* () {}");else if("%AsyncGeneratorFunction%"===S)_=J("async function* () {}");else if("%AsyncGenerator%"===S){var b=q("%AsyncGeneratorFunction%");b&&(_=b.prototype)}else if("%AsyncIteratorPrototype%"===S){var x=q("%AsyncGenerator%");x&&ye&&(_=ye(x.prototype))}return G[S]=_,_},L={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},I=z(333),j=z(533),$=I.call(Function.call,Array.prototype.concat),ae=I.call(Function.apply,Array.prototype.splice),ie=I.call(Function.call,String.prototype.replace),O=I.call(Function.call,String.prototype.slice),ue=I.call(Function.call,RegExp.prototype.exec),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ge=/\\(\\)?/g,at=function(S,_){var x,b=S;if(j(L,b)&&(b="%"+(x=L[b])[0]+"%"),j(G,b)){var D=G[b];if(D===ge&&(D=ve(b)),typeof D>"u"&&!_)throw new oe("intrinsic "+S+" exists, but is not available. Please file an issue!");return{alias:x,name:b,value:D}}throw new te("intrinsic "+S+" does not exist!")};Ce.exports=function(S,_){if("string"!=typeof S||0===S.length)throw new oe("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof _)throw new oe('"allowMissing" argument must be a boolean');if(null===ue(/^%?[^%]*%?$/,S))throw new te("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var b=function(S){var _=O(S,0,1),b=O(S,-1);if("%"===_&&"%"!==b)throw new te("invalid intrinsic syntax, expected closing `%`");if("%"===b&&"%"!==_)throw new te("invalid intrinsic syntax, expected opening `%`");var x=[];return ie(S,C,function(D,R,T,P){x[x.length]=T?ie(P,Ge,"$1"):R||D}),x}(S),x=b.length>0?b[0]:"",D=at("%"+x+"%",_),R=D.name,T=D.value,P=!1,B=D.alias;B&&(x=B[0],ae(b,$([0,1],B)));for(var ee=1,se=!0;ee<b.length;ee+=1){var X=b[ee],le=O(X,0,1),we=O(X,-1);if(('"'===le||"'"===le||"`"===le||'"'===we||"'"===we||"`"===we)&&le!==we)throw new te("property names with quotes must have matching quotes");if(("constructor"===X||!se)&&(P=!0),j(G,R="%"+(x+="."+X)+"%"))T=G[R];else if(null!=T){if(!(X in T)){if(!_)throw new oe("base intrinsic for "+S+" exists, but the property is not available.");return}if(ne&&ee+1>=b.length){var Oe=ne(T,X);T=(se=!!Oe)&&"get"in Oe&&!("originalValue"in Oe.get)?Oe.get:T[X]}else se=j(T,X),T=T[X];se&&!P&&(G[R]=T)}}return T}},28:Ce=>{"use strict";var pe={foo:{}},z=Object;Ce.exports=function(){return{__proto__:pe}.foo===pe.foo&&!({__proto__:null}instanceof z)}},152:(Ce,pe,z)=>{"use strict";var A=typeof Symbol<"u"&&Symbol,te=z(441);Ce.exports=function(){return"function"==typeof A&&"function"==typeof Symbol&&"symbol"==typeof A("foo")&&"symbol"==typeof Symbol("bar")&&te()}},441:Ce=>{"use strict";Ce.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var z={},A=Symbol("test"),te=Object(A);if("string"==typeof A||"[object Symbol]"!==Object.prototype.toString.call(A)||"[object Symbol]"!==Object.prototype.toString.call(te))return!1;for(A in z[A]=42,z)return!1;if("function"==typeof Object.keys&&0!==Object.keys(z).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(z).length)return!1;var oe=Object.getOwnPropertySymbols(z);if(1!==oe.length||oe[0]!==A||!Object.prototype.propertyIsEnumerable.call(z,A))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var J=Object.getOwnPropertyDescriptor(z,A);if(42!==J.value||!0!==J.enumerable)return!1}return!0}},533:(Ce,pe,z)=>{"use strict";var A=z(333);Ce.exports=A.call(Function.call,Object.prototype.hasOwnProperty)},826:(Ce,pe,z)=>{var A="function"==typeof Map&&Map.prototype,te=Object.getOwnPropertyDescriptor&&A?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ce=A&&te&&"function"==typeof te.get?te.get:null,oe=A&&Map.prototype.forEach,J="function"==typeof Set&&Set.prototype,ne=Object.getOwnPropertyDescriptor&&J?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,re=J&&ne&&"function"==typeof ne.get?ne.get:null,he=J&&Set.prototype.forEach,Me="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,ge="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,G="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,Ie=Boolean.prototype.valueOf,ve=Object.prototype.toString,L=Function.prototype.toString,I=String.prototype.match,j=String.prototype.slice,$=String.prototype.replace,ae=String.prototype.toUpperCase,ie=String.prototype.toLowerCase,O=RegExp.prototype.test,ue=Array.prototype.concat,C=Array.prototype.join,Ge=Array.prototype.slice,He=Math.floor,at="function"==typeof BigInt?BigInt.prototype.valueOf:null,q=Object.getOwnPropertySymbols,S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,_="function"==typeof Symbol&&"object"==typeof Symbol.iterator,b="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol,1)?Symbol.toStringTag:null,x=Object.prototype.propertyIsEnumerable,D=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(N){return N.__proto__}:null);function R(N,U){if(N===1/0||N===-1/0||N!=N||N&&N>-1e3&&N<1e3||O.call(/e/,U))return U;var lt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof N){var Tt=N<0?-He(-N):He(N);if(Tt!==N){var Ut=String(Tt),st=j.call(U,Ut.length+1);return $.call(Ut,lt,"$&_")+"."+$.call($.call(st,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $.call(U,lt,"$&_")}var T=z(654),P=T.custom,B=it(P)?P:null;function ee(N,U,lt){var Tt="double"===(lt.quoteStyle||U)?'"':"'";return Tt+N+Tt}function se(N){return $.call(String(N),/"/g,"&quot;")}function X(N){return!("[object Array]"!==Ye(N)||b&&"object"==typeof N&&b in N)}function we(N){return!("[object RegExp]"!==Ye(N)||b&&"object"==typeof N&&b in N)}function it(N){if(_)return N&&"object"==typeof N&&N instanceof Symbol;if("symbol"==typeof N)return!0;if(!N||"object"!=typeof N||!S)return!1;try{return S.call(N),!0}catch{}return!1}Ce.exports=function N(U,lt,Tt,Ut){var st=lt||{};if(Le(st,"quoteStyle")&&"single"!==st.quoteStyle&&"double"!==st.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Le(st,"maxStringLength")&&("number"==typeof st.maxStringLength?st.maxStringLength<0&&st.maxStringLength!==1/0:null!==st.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var li=!Le(st,"customInspect")||st.customInspect;if("boolean"!=typeof li&&"symbol"!==li)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Le(st,"indent")&&null!==st.indent&&"\t"!==st.indent&&!(parseInt(st.indent,10)===st.indent&&st.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Le(st,"numericSeparator")&&"boolean"!=typeof st.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Ui=st.numericSeparator;if(typeof U>"u")return"undefined";if(null===U)return"null";if("boolean"==typeof U)return U?"true":"false";if("string"==typeof U)return ps(U,st);if("number"==typeof U){if(0===U)return 1/0/U>0?"0":"-0";var Nn=String(U);return Ui?R(U,Nn):Nn}if("bigint"==typeof U){var Hi=String(U)+"n";return Ui?R(U,Hi):Hi}var Vo=typeof st.depth>"u"?5:st.depth;if(typeof Tt>"u"&&(Tt=0),Tt>=Vo&&Vo>0&&"object"==typeof U)return X(U)?"[Array]":"[Object]";var Vi=function $n(N,U){var lt;if("\t"===N.indent)lt="\t";else{if(!("number"==typeof N.indent&&N.indent>0))return null;lt=C.call(Array(N.indent+1)," ")}return{base:lt,prev:C.call(Array(U+1),lt)}}(st,Tt);if(typeof Ut>"u")Ut=[];else if(jn(Ut,U)>=0)return"[Circular]";function zn(ms,Ws,yf){if(Ws&&(Ut=Ge.call(Ut)).push(Ws),yf){var ml={depth:st.depth};return Le(st,"quoteStyle")&&(ml.quoteStyle=st.quoteStyle),N(ms,ml,Tt+1,Ut)}return N(ms,st,Tt+1,Ut)}if("function"==typeof U&&!we(U)){var fl=function Pt(N){if(N.name)return N.name;var U=I.call(L.call(N),/^function\s*([\w$]+)/);return U?U[1]:null}(U),pl=Rn(U,zn);return"[Function"+(fl?": "+fl:" (anonymous)")+"]"+(pl.length>0?" { "+C.call(pl,", ")+" }":"")}if(it(U)){var nc=_?$.call(String(U),/^(Symbol\(.*\))_[^)]*$/,"$1"):S.call(U);return"object"!=typeof U||_?nc:ki(nc)}if(function Li(N){return!(!N||"object"!=typeof N)&&(typeof HTMLElement<"u"&&N instanceof HTMLElement||"string"==typeof N.nodeName&&"function"==typeof N.getAttribute)}(U)){for(var gs="<"+ie.call(String(U.nodeName)),Go=U.attributes||[],zs=0;zs<Go.length;zs++)gs+=" "+Go[zs].name+"="+ee(se(Go[zs].value),"double",st);return gs+=">",U.childNodes&&U.childNodes.length&&(gs+="..."),gs+"</"+ie.call(String(U.nodeName))+">"}if(X(U)){if(0===U.length)return"[]";var jo=Rn(U,zn);return Vi&&!function tn(N){for(var U=0;U<N.length;U++)if(jn(N[U],"\n")>=0)return!1;return!0}(jo)?"["+Pn(jo,Vi)+"]":"[ "+C.call(jo,", ")+" ]"}if(function Oe(N){return!("[object Error]"!==Ye(N)||b&&"object"==typeof N&&b in N)}(U)){var lr=Rn(U,zn);return"cause"in Error.prototype||!("cause"in U)||x.call(U,"cause")?0===lr.length?"["+String(U)+"]":"{ ["+String(U)+"] "+C.call(lr,", ")+" }":"{ ["+String(U)+"] "+C.call(ue.call("[cause]: "+zn(U.cause),lr),", ")+" }"}if("object"==typeof U&&li){if(B&&"function"==typeof U[B]&&T)return T(U,{depth:Vo-Tt});if("symbol"!==li&&"function"==typeof U.inspect)return U.inspect()}if(function bn(N){if(!ce||!N||"object"!=typeof N)return!1;try{ce.call(N);try{re.call(N)}catch{return!0}return N instanceof Map}catch{}return!1}(U)){var rc=[];return oe&&oe.call(U,function(ms,Ws){rc.push(zn(Ws,U,!0)+" => "+zn(ms,U))}),bt("Map",ce.call(U),rc,Vi)}if(function $s(N){if(!re||!N||"object"!=typeof N)return!1;try{re.call(N);try{ce.call(N)}catch{return!0}return N instanceof Set}catch{}return!1}(U)){var ic=[];return he&&he.call(U,function(ms){ic.push(zn(ms,U))}),bt("Set",re.call(U),ic,Vi)}if(function or(N){if(!Me||!N||"object"!=typeof N)return!1;try{Me.call(N,Me);try{ge.call(N,ge)}catch{return!0}return N instanceof WeakMap}catch{}return!1}(U))return Bi("WeakMap");if(function dl(N){if(!ge||!N||"object"!=typeof N)return!1;try{ge.call(N,ge);try{Me.call(N,Me)}catch{return!0}return N instanceof WeakSet}catch{}return!1}(U))return Bi("WeakSet");if(function ar(N){if(!G||!N||"object"!=typeof N)return!1;try{return G.call(N),!0}catch{}return!1}(U))return Bi("WeakRef");if(function xt(N){return!("[object Number]"!==Ye(N)||b&&"object"==typeof N&&b in N)}(U))return ki(zn(Number(U)));if(function _t(N){if(!N||"object"!=typeof N||!at)return!1;try{return at.call(N),!0}catch{}return!1}(U))return ki(zn(at.call(U)));if(function Je(N){return!("[object Boolean]"!==Ye(N)||b&&"object"==typeof N&&b in N)}(U))return ki(Ie.call(U));if(function Pe(N){return!("[object String]"!==Ye(N)||b&&"object"==typeof N&&b in N)}(U))return ki(zn(String(U)));if(!function le(N){return!("[object Date]"!==Ye(N)||b&&"object"==typeof N&&b in N)}(U)&&!we(U)){var gl=Rn(U,zn),sc=D?D(U)===Object.prototype:U instanceof Object||U.constructor===Object,$o=U instanceof Object?"":"null prototype",oc=!sc&&b&&Object(U)===U&&b in U?j.call(Ye(U),8,-1):$o?"Object":"",br=(sc||"function"!=typeof U.constructor?"":U.constructor.name?U.constructor.name+" ":"")+(oc||$o?"["+C.call(ue.call([],oc||[],$o||[]),": ")+"] ":"");return 0===gl.length?br+"{}":Vi?br+"{"+Pn(gl,Vi)+"}":br+"{ "+C.call(gl,", ")+" }"}return String(U)};var Be=Object.prototype.hasOwnProperty||function(N){return N in this};function Le(N,U){return Be.call(N,U)}function Ye(N){return ve.call(N)}function jn(N,U){if(N.indexOf)return N.indexOf(U);for(var lt=0,Tt=N.length;lt<Tt;lt++)if(N[lt]===U)return lt;return-1}function ps(N,U){if(N.length>U.maxStringLength){var lt=N.length-U.maxStringLength,Tt="... "+lt+" more character"+(lt>1?"s":"");return ps(j.call(N,0,U.maxStringLength),U)+Tt}return ee($.call($.call(N,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Ho),"single",U)}function Ho(N){var U=N.charCodeAt(0),lt={8:"b",9:"t",10:"n",12:"f",13:"r"}[U];return lt?"\\"+lt:"\\x"+(U<16?"0":"")+ae.call(U.toString(16))}function ki(N){return"Object("+N+")"}function Bi(N){return N+" { ? }"}function bt(N,U,lt,Tt){return N+" ("+U+") {"+(Tt?Pn(lt,Tt):C.call(lt,", "))+"}"}function Pn(N,U){if(0===N.length)return"";var lt="\n"+U.prev+U.base;return lt+C.call(N,","+lt)+"\n"+U.prev}function Rn(N,U){var lt=X(N),Tt=[];if(lt){Tt.length=N.length;for(var Ut=0;Ut<N.length;Ut++)Tt[Ut]=Le(N,Ut)?U(N[Ut],N):""}var li,st="function"==typeof q?q(N):[];if(_){li={};for(var Ui=0;Ui<st.length;Ui++)li["$"+st[Ui]]=st[Ui]}for(var Nn in N)Le(N,Nn)&&(lt&&String(Number(Nn))===Nn&&Nn<N.length||_&&li["$"+Nn]instanceof Symbol||(O.call(/[^\w$]/,Nn)?Tt.push(U(Nn,N)+": "+U(N[Nn],N)):Tt.push(Nn+": "+U(N[Nn],N))));if("function"==typeof q)for(var Hi=0;Hi<st.length;Hi++)x.call(N,st[Hi])&&Tt.push("["+U(st[Hi])+"]: "+U(N[st[Hi]],N));return Tt}},439:Ce=>{"use strict";var pe=String.prototype.replace,z=/%20/g;Ce.exports={default:"RFC3986",formatters:{RFC1738:function(te){return pe.call(te,z,"+")},RFC3986:function(te){return String(te)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},956:(Ce,pe,z)=>{"use strict";var A=z(562),te=z(625),ce=z(439);Ce.exports={formats:ce,parse:te,stringify:A}},625:(Ce,pe,z)=>{"use strict";var A=z(978),te=Object.prototype.hasOwnProperty,ce=Array.isArray,oe={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:A.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},ne=function(Te,G){return Te&&"string"==typeof Te&&G.comma&&Te.indexOf(",")>-1?Te.split(","):Te},ye=function(G,Ie,ve,L){if(G){var I=ve.allowDots?G.replace(/\.([^.[]+)/g,"[$1]"):G,$=/(\[[^[\]]*])/g,ae=ve.depth>0&&/(\[[^[\]]*])/.exec(I),ie=ae?I.slice(0,ae.index):I,O=[];if(ie){if(!ve.plainObjects&&te.call(Object.prototype,ie)&&!ve.allowPrototypes)return;O.push(ie)}for(var ue=0;ve.depth>0&&null!==(ae=$.exec(I))&&ue<ve.depth;){if(ue+=1,!ve.plainObjects&&te.call(Object.prototype,ae[1].slice(1,-1))&&!ve.allowPrototypes)return;O.push(ae[1])}return ae&&O.push("["+I.slice(ae.index)+"]"),function(Te,G,Ie,ve){for(var L=ve?G:ne(G,Ie),I=Te.length-1;I>=0;--I){var j,$=Te[I];if("[]"===$&&Ie.parseArrays)j=[].concat(L);else{j=Ie.plainObjects?Object.create(null):{};var ae="["===$.charAt(0)&&"]"===$.charAt($.length-1)?$.slice(1,-1):$,ie=parseInt(ae,10);Ie.parseArrays||""!==ae?!isNaN(ie)&&$!==ae&&String(ie)===ae&&ie>=0&&Ie.parseArrays&&ie<=Ie.arrayLimit?(j=[])[ie]=L:"__proto__"!==ae&&(j[ae]=L):j={0:L}}L=j}return L}(O,Ie,ve,L)}};Ce.exports=function(Te,G){var Ie=function(G){if(!G)return oe;if(null!=G.decoder&&"function"!=typeof G.decoder)throw new TypeError("Decoder has to be a function.");if(typeof G.charset<"u"&&"utf-8"!==G.charset&&"iso-8859-1"!==G.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:typeof G.allowDots>"u"?oe.allowDots:!!G.allowDots,allowPrototypes:"boolean"==typeof G.allowPrototypes?G.allowPrototypes:oe.allowPrototypes,allowSparse:"boolean"==typeof G.allowSparse?G.allowSparse:oe.allowSparse,arrayLimit:"number"==typeof G.arrayLimit?G.arrayLimit:oe.arrayLimit,charset:typeof G.charset>"u"?oe.charset:G.charset,charsetSentinel:"boolean"==typeof G.charsetSentinel?G.charsetSentinel:oe.charsetSentinel,comma:"boolean"==typeof G.comma?G.comma:oe.comma,decoder:"function"==typeof G.decoder?G.decoder:oe.decoder,delimiter:"string"==typeof G.delimiter||A.isRegExp(G.delimiter)?G.delimiter:oe.delimiter,depth:"number"==typeof G.depth||!1===G.depth?+G.depth:oe.depth,ignoreQueryPrefix:!0===G.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof G.interpretNumericEntities?G.interpretNumericEntities:oe.interpretNumericEntities,parameterLimit:"number"==typeof G.parameterLimit?G.parameterLimit:oe.parameterLimit,parseArrays:!1!==G.parseArrays,plainObjects:"boolean"==typeof G.plainObjects?G.plainObjects:oe.plainObjects,strictNullHandling:"boolean"==typeof G.strictNullHandling?G.strictNullHandling:oe.strictNullHandling}}(G);if(""===Te||null===Te||typeof Te>"u")return Ie.plainObjects?Object.create(null):{};for(var ve="string"==typeof Te?function(G,Ie){var ae,ve={},j=(Ie.ignoreQueryPrefix?G.replace(/^\?/,""):G).split(Ie.delimiter,Ie.parameterLimit===1/0?void 0:Ie.parameterLimit),$=-1,ie=Ie.charset;if(Ie.charsetSentinel)for(ae=0;ae<j.length;++ae)0===j[ae].indexOf("utf8=")&&("utf8=%E2%9C%93"===j[ae]?ie="utf-8":"utf8=%26%2310003%3B"===j[ae]&&(ie="iso-8859-1"),$=ae,ae=j.length);for(ae=0;ae<j.length;++ae)if(ae!==$){var Ge,He,O=j[ae],ue=O.indexOf("]="),C=-1===ue?O.indexOf("="):ue+1;-1===C?(Ge=Ie.decoder(O,oe.decoder,ie,"key"),He=Ie.strictNullHandling?null:""):(Ge=Ie.decoder(O.slice(0,C),oe.decoder,ie,"key"),He=A.maybeMap(ne(O.slice(C+1),Ie),function(at){return Ie.decoder(at,oe.decoder,ie,"value")})),He&&Ie.interpretNumericEntities&&"iso-8859-1"===ie&&(He=He.replace(/&#(\d+);/g,function(G,Ie){return String.fromCharCode(parseInt(Ie,10))})),O.indexOf("[]=")>-1&&(He=ce(He)?[He]:He),ve[Ge]=te.call(ve,Ge)?A.combine(ve[Ge],He):He}return ve}(Te,Ie):Te,L=Ie.plainObjects?Object.create(null):{},I=Object.keys(ve),j=0;j<I.length;++j){var $=I[j],ae=ye($,ve[$],Ie,"string"==typeof Te);L=A.merge(L,ae,Ie)}return!0===Ie.allowSparse?L:A.compact(L)}},562:(Ce,pe,z)=>{"use strict";var A=z(379),te=z(978),ce=z(439),oe=Object.prototype.hasOwnProperty,J={brackets:function(I){return I+"[]"},comma:"comma",indices:function(I,j){return I+"["+j+"]"},repeat:function(I){return I}},ne=Array.isArray,re=String.prototype.split,he=Array.prototype.push,de=function(L,I){he.apply(L,ne(I)?I:[I])},Me=Date.prototype.toISOString,ye=ce.default,ge={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:te.encode,encodeValuesOnly:!1,format:ye,formatter:ce.formatters[ye],indices:!1,serializeDate:function(I){return Me.call(I)},skipNulls:!1,strictNullHandling:!1},G={},Ie=function L(I,j,$,ae,ie,O,ue,C,Ge,He,at,q,S,_,b,x){for(var D=I,R=x,T=0,P=!1;void 0!==(R=R.get(G))&&!P;){var B=R.get(I);if(T+=1,typeof B<"u"){if(B===T)throw new RangeError("Cyclic object value");P=!0}typeof R.get(G)>"u"&&(T=0)}if("function"==typeof C?D=C(j,D):D instanceof Date?D=at(D):"comma"===$&&ne(D)&&(D=te.maybeMap(D,function(Ye){return Ye instanceof Date?at(Ye):Ye})),null===D){if(ie)return ue&&!_?ue(j,ge.encoder,b,"key",q):j;D=""}if(function(I){return"string"==typeof I||"number"==typeof I||"boolean"==typeof I||"symbol"==typeof I||"bigint"==typeof I}(D)||te.isBuffer(D)){if(ue){var ee=_?j:ue(j,ge.encoder,b,"key",q);if("comma"===$&&_){for(var se=re.call(String(D),","),X="",le=0;le<se.length;++le)X+=(0===le?"":",")+S(ue(se[le],ge.encoder,b,"value",q));return[S(ee)+(ae&&ne(D)&&1===se.length?"[]":"")+"="+X]}return[S(ee)+"="+S(ue(D,ge.encoder,b,"value",q))]}return[S(j)+"="+S(String(D))]}var Oe,we=[];if(typeof D>"u")return we;if("comma"===$&&ne(D))Oe=[{value:D.length>0?D.join(",")||null:void 0}];else if(ne(C))Oe=C;else{var Pe=Object.keys(D);Oe=Ge?Pe.sort(Ge):Pe}for(var xt=ae&&ne(D)&&1===D.length?j+"[]":j,Je=0;Je<Oe.length;++Je){var it=Oe[Je],_t="object"==typeof it&&typeof it.value<"u"?it.value:D[it];if(!O||null!==_t){var Be=ne(D)?"function"==typeof $?$(xt,it):xt:xt+(He?"."+it:"["+it+"]");x.set(I,T);var Le=A();Le.set(G,x),de(we,L(_t,Be,$,ae,ie,O,ue,C,Ge,He,at,q,S,_,b,Le))}}return we};Ce.exports=function(L,I){var ae,j=L,$=function(I){if(!I)return ge;if(null!==I.encoder&&typeof I.encoder<"u"&&"function"!=typeof I.encoder)throw new TypeError("Encoder has to be a function.");var j=I.charset||ge.charset;if(typeof I.charset<"u"&&"utf-8"!==I.charset&&"iso-8859-1"!==I.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var $=ce.default;if(typeof I.format<"u"){if(!oe.call(ce.formatters,I.format))throw new TypeError("Unknown format option provided.");$=I.format}var ae=ce.formatters[$],ie=ge.filter;return("function"==typeof I.filter||ne(I.filter))&&(ie=I.filter),{addQueryPrefix:"boolean"==typeof I.addQueryPrefix?I.addQueryPrefix:ge.addQueryPrefix,allowDots:typeof I.allowDots>"u"?ge.allowDots:!!I.allowDots,charset:j,charsetSentinel:"boolean"==typeof I.charsetSentinel?I.charsetSentinel:ge.charsetSentinel,delimiter:typeof I.delimiter>"u"?ge.delimiter:I.delimiter,encode:"boolean"==typeof I.encode?I.encode:ge.encode,encoder:"function"==typeof I.encoder?I.encoder:ge.encoder,encodeValuesOnly:"boolean"==typeof I.encodeValuesOnly?I.encodeValuesOnly:ge.encodeValuesOnly,filter:ie,format:$,formatter:ae,serializeDate:"function"==typeof I.serializeDate?I.serializeDate:ge.serializeDate,skipNulls:"boolean"==typeof I.skipNulls?I.skipNulls:ge.skipNulls,sort:"function"==typeof I.sort?I.sort:null,strictNullHandling:"boolean"==typeof I.strictNullHandling?I.strictNullHandling:ge.strictNullHandling}}(I);"function"==typeof $.filter?j=(0,$.filter)("",j):ne($.filter)&&(ae=$.filter);var O=[];if("object"!=typeof j||null===j)return"";var C=J[I&&I.arrayFormat in J?I.arrayFormat:I&&"indices"in I?I.indices?"indices":"repeat":"indices"];if(I&&"commaRoundTrip"in I&&"boolean"!=typeof I.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var Ge="comma"===C&&I&&I.commaRoundTrip;ae||(ae=Object.keys(j)),$.sort&&ae.sort($.sort);for(var He=A(),at=0;at<ae.length;++at){var q=ae[at];$.skipNulls&&null===j[q]||de(O,Ie(j[q],q,C,Ge,$.strictNullHandling,$.skipNulls,$.encode?$.encoder:null,$.filter,$.sort,$.allowDots,$.serializeDate,$.format,$.formatter,$.encodeValuesOnly,$.charset,He))}var S=O.join($.delimiter),_=!0===$.addQueryPrefix?"?":"";return $.charsetSentinel&&(_+="iso-8859-1"===$.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),S.length>0?_+S:""}},978:(Ce,pe,z)=>{"use strict";var A=z(439),te=Object.prototype.hasOwnProperty,ce=Array.isArray,oe=function(){for(var ve=[],L=0;L<256;++L)ve.push("%"+((L<16?"0":"")+L.toString(16)).toUpperCase());return ve}(),ne=function(L,I){for(var j=I&&I.plainObjects?Object.create(null):{},$=0;$<L.length;++$)typeof L[$]<"u"&&(j[$]=L[$]);return j};Ce.exports={arrayToObject:ne,assign:function(L,I){return Object.keys(I).reduce(function(j,$){return j[$]=I[$],j},L)},combine:function(L,I){return[].concat(L,I)},compact:function(L){for(var I=[{obj:{o:L},prop:"o"}],j=[],$=0;$<I.length;++$)for(var ae=I[$],ie=ae.obj[ae.prop],O=Object.keys(ie),ue=0;ue<O.length;++ue){var C=O[ue],Ge=ie[C];"object"==typeof Ge&&null!==Ge&&-1===j.indexOf(Ge)&&(I.push({obj:ie,prop:C}),j.push(Ge))}return function(L){for(;L.length>1;){var I=L.pop(),j=I.obj[I.prop];if(ce(j)){for(var $=[],ae=0;ae<j.length;++ae)typeof j[ae]<"u"&&$.push(j[ae]);I.obj[I.prop]=$}}}(I),L},decode:function(ve,L,I){var j=ve.replace(/\+/g," ");if("iso-8859-1"===I)return j.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(j)}catch{return j}},encode:function(L,I,j,$,ae){if(0===L.length)return L;var ie=L;if("symbol"==typeof L?ie=Symbol.prototype.toString.call(L):"string"!=typeof L&&(ie=String(L)),"iso-8859-1"===j)return escape(ie).replace(/%u[0-9a-f]{4}/gi,function(Ge){return"%26%23"+parseInt(Ge.slice(2),16)+"%3B"});for(var O="",ue=0;ue<ie.length;++ue){var C=ie.charCodeAt(ue);45===C||46===C||95===C||126===C||C>=48&&C<=57||C>=65&&C<=90||C>=97&&C<=122||ae===A.RFC1738&&(40===C||41===C)?O+=ie.charAt(ue):C<128?O+=oe[C]:C<2048?O+=oe[192|C>>6]+oe[128|63&C]:C<55296||C>=57344?O+=oe[224|C>>12]+oe[128|C>>6&63]+oe[128|63&C]:(C=65536+((1023&C)<<10|1023&ie.charCodeAt(ue+=1)),O+=oe[240|C>>18]+oe[128|C>>12&63]+oe[128|C>>6&63]+oe[128|63&C])}return O},isBuffer:function(L){return!(!L||"object"!=typeof L||!(L.constructor&&L.constructor.isBuffer&&L.constructor.isBuffer(L)))},isRegExp:function(L){return"[object RegExp]"===Object.prototype.toString.call(L)},maybeMap:function(L,I){if(ce(L)){for(var j=[],$=0;$<L.length;$+=1)j.push(I(L[$]));return j}return I(L)},merge:function ve(L,I,j){if(!I)return L;if("object"!=typeof I){if(ce(L))L.push(I);else{if(!L||"object"!=typeof L)return[L,I];(j&&(j.plainObjects||j.allowPrototypes)||!te.call(Object.prototype,I))&&(L[I]=!0)}return L}if(!L||"object"!=typeof L)return[L].concat(I);var $=L;return ce(L)&&!ce(I)&&($=ne(L,j)),ce(L)&&ce(I)?(I.forEach(function(ae,ie){if(te.call(L,ie)){var O=L[ie];O&&"object"==typeof O&&ae&&"object"==typeof ae?L[ie]=ve(O,ae,j):L.push(ae)}else L[ie]=ae}),L):Object.keys(I).reduce(function(ae,ie){var O=I[ie];return ae[ie]=te.call(ae,ie)?ve(ae[ie],O,j):O,ae},$)}}},379:(Ce,pe,z)=>{"use strict";var A=z(491),te=z(98),ce=z(826),oe=A("%TypeError%"),J=A("%WeakMap%",!0),ne=A("%Map%",!0),re=te("WeakMap.prototype.get",!0),he=te("WeakMap.prototype.set",!0),de=te("WeakMap.prototype.has",!0),Me=te("Map.prototype.get",!0),ye=te("Map.prototype.set",!0),ge=te("Map.prototype.has",!0),Te=function(L,I){for(var $,j=L;null!==($=j.next);j=$)if($.key===I)return j.next=$.next,$.next=L.next,L.next=$,$};Ce.exports=function(){var I,j,$,ae={assert:function(ie){if(!ae.has(ie))throw new oe("Side channel does not contain "+ce(ie))},get:function(ie){if(J&&ie&&("object"==typeof ie||"function"==typeof ie)){if(I)return re(I,ie)}else if(ne){if(j)return Me(j,ie)}else if($)return function(L,I){var j=Te(L,I);return j&&j.value}($,ie)},has:function(ie){if(J&&ie&&("object"==typeof ie||"function"==typeof ie)){if(I)return de(I,ie)}else if(ne){if(j)return ge(j,ie)}else if($)return function(L,I){return!!Te(L,I)}($,ie);return!1},set:function(ie,O){J&&ie&&("object"==typeof ie||"function"==typeof ie)?(I||(I=new J),he(I,ie,O)):ne?(j||(j=new ne),ye(j,ie,O)):($||($={key:{},next:null}),function(L,I,j){var $=Te(L,I);$?$.value=j:L.next={key:I,next:L.next,value:j}}($,ie,O))}};return ae}},786:(Ce,pe)=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.Collector=void 0,pe.Collector=class z{constructor(te){this.emit=(...ce)=>{te.emitCollecting(this,ce)}}}},193:(Ce,pe,z)=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.CollectorArray=void 0;const A=z(786);pe.CollectorArray=class te extends A.Collector{constructor(){super(...arguments),this.result=[]}handleResult(oe){return this.result.push(oe),!0}getResult(){return this.result}reset(){this.result.length=0}}},258:(Ce,pe,z)=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.CollectorLast=void 0;const A=z(786);pe.CollectorLast=class te extends A.Collector{handleResult(oe){return this.result=oe,!0}getResult(){return this.result}reset(){delete this.result}}},709:(Ce,pe,z)=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.CollectorUntil0=void 0;const A=z(786);pe.CollectorUntil0=class te extends A.Collector{constructor(){super(...arguments),this.result=!1}handleResult(oe){return this.result=oe,this.result}getResult(){return this.result}reset(){this.result=!1}}},305:(Ce,pe,z)=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.CollectorWhile0=void 0;const A=z(786);pe.CollectorWhile0=class te extends A.Collector{constructor(){super(...arguments),this.result=!1}handleResult(oe){return this.result=oe,!this.result}getResult(){return this.result}reset(){this.result=!1}}},297:(Ce,pe,z)=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.Signal=void 0;const A=z(705),te=z(473);pe.Signal=class ce{constructor(){this.head=new te.SignalLink,this.hasNewLinks=!1,this.emitDepth=0,this.connectionsCount=0}getConnectionsCount(){return this.connectionsCount}hasConnections(){return this.connectionsCount>0}connect(J,ne=0){this.connectionsCount++;const re=this.head.insert(J,ne);return this.emitDepth>0&&(this.hasNewLinks=!0,re.newLink=!0),new A.SignalConnectionImpl(re,()=>this.decrementConnectionCount())}decrementConnectionCount(){this.connectionsCount--}disconnect(J){for(let ne=this.head.next;ne!==this.head;ne=ne.next)if(ne.callback===J)return this.decrementConnectionCount(),ne.unlink(),!0;return!1}disconnectAll(){for(;this.head.next!==this.head;)this.head.next.unlink();this.connectionsCount=0}emit(...J){this.emitDepth++;for(let ne=this.head.next;ne!==this.head;ne=ne.next)ne.isEnabled()&&ne.callback&&ne.callback.apply(null,J);this.emitDepth--,this.unsetNewLink()}emitCollecting(J,ne){this.emitDepth++;for(let re=this.head.next;re!==this.head;re=re.next)if(re.isEnabled()&&re.callback){const he=re.callback.apply(null,ne);if(!J.handleResult(he))break}this.emitDepth--,this.unsetNewLink()}unsetNewLink(){if(this.hasNewLinks&&0===this.emitDepth){for(let J=this.head.next;J!==this.head;J=J.next)J.newLink=!1;this.hasNewLinks=!1}}}},705:(Ce,pe)=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.SignalConnectionImpl=void 0,pe.SignalConnectionImpl=class z{constructor(te,ce){this.link=te,this.parentCleanup=ce}disconnect(){return null!==this.link&&(this.link.unlink(),this.link=null,this.parentCleanup(),this.parentCleanup=null,!0)}set enabled(te){this.link&&this.link.setEnabled(te)}get enabled(){return null!==this.link&&this.link.isEnabled()}}},353:(Ce,pe)=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.SignalConnections=void 0,pe.SignalConnections=class z{constructor(){this.list=[]}add(te){this.list.push(te)}disconnectAll(){for(const te of this.list)te.disconnect();this.list=[]}getCount(){return this.list.length}isEmpty(){return 0===this.list.length}}},473:(Ce,pe)=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0}),pe.SignalLink=void 0;class z{constructor(te=null,ce=null,oe=0){this.enabled=!0,this.newLink=!1,this.callback=null,this.prev=te??this,this.next=ce??this,this.order=oe}isEnabled(){return this.enabled&&!this.newLink}setEnabled(te){this.enabled=te}unlink(){this.callback=null,this.next.prev=this.prev,this.prev.next=this.next}insert(te,ce){let oe=this.prev;for(;oe!==this&&!(oe.order<=ce);)oe=oe.prev;const J=new z(oe,oe.next,ce);return J.callback=te,oe.next=J,J.next.prev=J,J}}pe.SignalLink=z},679:(Ce,pe,z)=>{"use strict";pe.MZ=void 0;z(786),z(193),z(258),z(709),z(305);var re=z(297);Object.defineProperty(pe,"MZ",{enumerable:!0,get:function(){return re.Signal}});z(353)},630:function(Ce,pe,z){var A;Ce=z.nmd(Ce),function(te){"object"==typeof global&&global;var ne,re=2147483647,he=36,Me=26,ye=38,ge=700,ve=/^xn--/,L=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},$=he-1,ae=Math.floor,ie=String.fromCharCode;function ue(T){throw new RangeError(j[T])}function C(T,P){for(var B=T.length,ee=[];B--;)ee[B]=P(T[B]);return ee}function Ge(T,P){var B=T.split("@"),ee="";return B.length>1&&(ee=B[0]+"@",T=B[1]),ee+C((T=T.replace(I,".")).split("."),P).join(".")}function He(T){for(var se,X,P=[],B=0,ee=T.length;B<ee;)(se=T.charCodeAt(B++))>=55296&&se<=56319&&B<ee?56320==(64512&(X=T.charCodeAt(B++)))?P.push(((1023&se)<<10)+(1023&X)+65536):(P.push(se),B--):P.push(se);return P}function at(T){return C(T,function(P){var B="";return P>65535&&(B+=ie((P-=65536)>>>10&1023|55296),P=56320|1023&P),B+ie(P)}).join("")}function q(T){return T-48<10?T-22:T-65<26?T-65:T-97<26?T-97:he}function S(T,P){return T+22+75*(T<26)-((0!=P)<<5)}function _(T,P,B){var ee=0;for(T=B?ae(T/ge):T>>1,T+=ae(T/P);T>$*Me>>1;ee+=he)T=ae(T/$);return ae(ee+($+1)*T/(T+ye))}function b(T){var ee,we,Oe,Pe,xt,Je,it,_t,Be,Le,P=[],B=T.length,se=0,X=128,le=72;for((we=T.lastIndexOf("-"))<0&&(we=0),Oe=0;Oe<we;++Oe)T.charCodeAt(Oe)>=128&&ue("not-basic"),P.push(T.charCodeAt(Oe));for(Pe=we>0?we+1:0;Pe<B;){for(xt=se,Je=1,it=he;Pe>=B&&ue("invalid-input"),((_t=q(T.charCodeAt(Pe++)))>=he||_t>ae((re-se)/Je))&&ue("overflow"),se+=_t*Je,!(_t<(Be=it<=le?1:it>=le+Me?Me:it-le));it+=he)Je>ae(re/(Le=he-Be))&&ue("overflow"),Je*=Le;le=_(se-xt,ee=P.length+1,0==xt),ae(se/ee)>re-X&&ue("overflow"),X+=ae(se/ee),se%=ee,P.splice(se++,0,X)}return at(P)}function x(T){var P,B,ee,se,X,le,we,Oe,Pe,xt,Je,_t,Be,Le,Ye,it=[];for(_t=(T=He(T)).length,P=128,B=0,X=72,le=0;le<_t;++le)(Je=T[le])<128&&it.push(ie(Je));for(ee=se=it.length,se&&it.push("-");ee<_t;){for(we=re,le=0;le<_t;++le)(Je=T[le])>=P&&Je<we&&(we=Je);for(we-P>ae((re-B)/(Be=ee+1))&&ue("overflow"),B+=(we-P)*Be,P=we,le=0;le<_t;++le)if((Je=T[le])<P&&++B>re&&ue("overflow"),Je==P){for(Oe=B,Pe=he;!(Oe<(xt=Pe<=X?1:Pe>=X+Me?Me:Pe-X));Pe+=he)it.push(ie(S(xt+(Ye=Oe-xt)%(Le=he-xt),0))),Oe=ae(Ye/Le);it.push(ie(S(Oe,0))),X=_(B,Be,ee==se),B=0,++ee}++B,++P}return it.join("")}ne={version:"1.4.1",ucs2:{decode:He,encode:at},decode:b,encode:x,toASCII:function R(T){return Ge(T,function(P){return L.test(P)?"xn--"+x(P):P})},toUnicode:function D(T){return Ge(T,function(P){return ve.test(P)?b(P.slice(4).toLowerCase()):P})}},void 0!==(A=function(){return ne}.call(pe,z,pe,Ce))&&(Ce.exports=A)}()},445:(Ce,pe,z)=>{"use strict";var te=z(630);function ce(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var oe=/^([a-z0-9.+-]+:)/i,J=/:[0-9]*$/,ne=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,he=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),de=["'"].concat(he),Me=["%","/","?",";","#"].concat(de),ye=["/","?","#"],Te=/^[+a-z0-9A-Z_-]{0,63}$/,G=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Ie={javascript:!0,"javascript:":!0},ve={javascript:!0,"javascript:":!0},L={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},I=z(956);function j(O,ue,C){if(O&&"object"==typeof O&&O instanceof ce)return O;var Ge=new ce;return Ge.parse(O,ue,C),Ge}ce.prototype.parse=function(O,ue,C){if("string"!=typeof O)throw new TypeError("Parameter 'url' must be a string, not "+typeof O);var Ge=O.indexOf("?"),He=-1!==Ge&&Ge<O.indexOf("#")?"?":"#",at=O.split(He);at[0]=at[0].replace(/\\/g,"/");var S=O=at.join(He);if(S=S.trim(),!C&&1===O.split("#").length){var _=ne.exec(S);if(_)return this.path=S,this.href=S,this.pathname=_[1],_[2]?(this.search=_[2],this.query=ue?I.parse(this.search.substr(1)):this.search.substr(1)):ue&&(this.search="",this.query={}),this}var b=oe.exec(S);if(b){var x=(b=b[0]).toLowerCase();this.protocol=x,S=S.substr(b.length)}if(C||b||S.match(/^\/\/[^@/]+@[^@/]+/)){var D="//"===S.substr(0,2);D&&(!b||!ve[b])&&(S=S.substr(2),this.slashes=!0)}if(!ve[b]&&(D||b&&!L[b])){for(var R=-1,T=0;T<ye.length;T++)-1!==(P=S.indexOf(ye[T]))&&(-1===R||P<R)&&(R=P);var B,ee;for(-1!==(ee=-1===R?S.lastIndexOf("@"):S.lastIndexOf("@",R))&&(B=S.slice(0,ee),S=S.slice(ee+1),this.auth=decodeURIComponent(B)),R=-1,T=0;T<Me.length;T++){var P;-1!==(P=S.indexOf(Me[T]))&&(-1===R||P<R)&&(R=P)}-1===R&&(R=S.length),this.host=S.slice(0,R),S=S.slice(R),this.parseHost(),this.hostname=this.hostname||"";var se="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!se)for(var X=this.hostname.split(/\./),le=(T=0,X.length);T<le;T++){var we=X[T];if(we&&!we.match(Te)){for(var Oe="",Pe=0,xt=we.length;Pe<xt;Pe++)we.charCodeAt(Pe)>127?Oe+="x":Oe+=we[Pe];if(!Oe.match(Te)){var Je=X.slice(0,T),it=X.slice(T+1),_t=we.match(G);_t&&(Je.push(_t[1]),it.unshift(_t[2])),it.length&&(S="/"+it.join(".")+S),this.hostname=Je.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),se||(this.hostname=te.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,se&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==S[0]&&(S="/"+S))}if(!Ie[x])for(T=0,le=de.length;T<le;T++){var Ye=de[T];if(-1!==S.indexOf(Ye)){var Pt=encodeURIComponent(Ye);Pt===Ye&&(Pt=escape(Ye)),S=S.split(Ye).join(Pt)}}var jn=S.indexOf("#");-1!==jn&&(this.hash=S.substr(jn),S=S.slice(0,jn));var bn=S.indexOf("?");return-1!==bn?(this.search=S.substr(bn),this.query=S.substr(bn+1),ue&&(this.query=I.parse(this.query)),S=S.slice(0,bn)):ue&&(this.search="",this.query={}),S&&(this.pathname=S),L[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},ce.prototype.format=function(){var O=this.auth||"";O&&(O=(O=encodeURIComponent(O)).replace(/%3A/i,":"),O+="@");var ue=this.protocol||"",C=this.pathname||"",Ge=this.hash||"",He=!1,at="";this.host?He=O+this.host:this.hostname&&(He=O+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(He+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(at=I.stringify(this.query));var q=this.search||at&&"?"+at||"";return ue&&":"!==ue.substr(-1)&&(ue+=":"),this.slashes||(!ue||L[ue])&&!1!==He?(He="//"+(He||""),C&&"/"!==C.charAt(0)&&(C="/"+C)):He||(He=""),Ge&&"#"!==Ge.charAt(0)&&(Ge="#"+Ge),q&&"?"!==q.charAt(0)&&(q="?"+q),ue+He+(C=C.replace(/[?#]/g,function(S){return encodeURIComponent(S)}))+(q=q.replace("#","%23"))+Ge},ce.prototype.resolve=function(O){return this.resolveObject(j(O,!1,!0)).format()},ce.prototype.resolveObject=function(O){if("string"==typeof O){var ue=new ce;ue.parse(O,!1,!0),O=ue}for(var C=new ce,Ge=Object.keys(this),He=0;He<Ge.length;He++){var at=Ge[He];C[at]=this[at]}if(C.hash=O.hash,""===O.href)return C.href=C.format(),C;if(O.slashes&&!O.protocol){for(var q=Object.keys(O),S=0;S<q.length;S++){var _=q[S];"protocol"!==_&&(C[_]=O[_])}return L[C.protocol]&&C.hostname&&!C.pathname&&(C.pathname="/",C.path=C.pathname),C.href=C.format(),C}if(O.protocol&&O.protocol!==C.protocol){if(!L[O.protocol]){for(var b=Object.keys(O),x=0;x<b.length;x++){var D=b[x];C[D]=O[D]}return C.href=C.format(),C}if(C.protocol=O.protocol,O.host||ve[O.protocol])C.pathname=O.pathname;else{for(var le=(O.pathname||"").split("/");le.length&&!(O.host=le.shift()););O.host||(O.host=""),O.hostname||(O.hostname=""),""!==le[0]&&le.unshift(""),le.length<2&&le.unshift(""),C.pathname=le.join("/")}return C.search=O.search,C.query=O.query,C.host=O.host||"",C.auth=O.auth,C.hostname=O.hostname||O.host,C.port=O.port,(C.pathname||C.search)&&(C.path=(C.pathname||"")+(C.search||"")),C.slashes=C.slashes||O.slashes,C.href=C.format(),C}var P=C.pathname&&"/"===C.pathname.charAt(0),B=O.host||O.pathname&&"/"===O.pathname.charAt(0),ee=B||P||C.host&&O.pathname,se=ee,X=C.pathname&&C.pathname.split("/")||[],we=(le=O.pathname&&O.pathname.split("/")||[],C.protocol&&!L[C.protocol]);if(we&&(C.hostname="",C.port=null,C.host&&(""===X[0]?X[0]=C.host:X.unshift(C.host)),C.host="",O.protocol&&(O.hostname=null,O.port=null,O.host&&(""===le[0]?le[0]=O.host:le.unshift(O.host)),O.host=null),ee=ee&&(""===le[0]||""===X[0])),B)C.host=O.host||""===O.host?O.host:C.host,C.hostname=O.hostname||""===O.hostname?O.hostname:C.hostname,C.search=O.search,C.query=O.query,X=le;else if(le.length)X||(X=[]),X.pop(),X=X.concat(le),C.search=O.search,C.query=O.query;else if(null!=O.search)return we&&(C.host=X.shift(),C.hostname=C.host,(Oe=!!(C.host&&C.host.indexOf("@")>0)&&C.host.split("@"))&&(C.auth=Oe.shift(),C.hostname=Oe.shift(),C.host=C.hostname)),C.search=O.search,C.query=O.query,(null!==C.pathname||null!==C.search)&&(C.path=(C.pathname?C.pathname:"")+(C.search?C.search:"")),C.href=C.format(),C;if(!X.length)return C.pathname=null,C.path=C.search?"/"+C.search:null,C.href=C.format(),C;for(var Pe=X.slice(-1)[0],xt=(C.host||O.host||X.length>1)&&("."===Pe||".."===Pe)||""===Pe,Je=0,it=X.length;it>=0;it--)"."===(Pe=X[it])?X.splice(it,1):".."===Pe?(X.splice(it,1),Je++):Je&&(X.splice(it,1),Je--);if(!ee&&!se)for(;Je--;Je)X.unshift("..");ee&&""!==X[0]&&(!X[0]||"/"!==X[0].charAt(0))&&X.unshift(""),xt&&"/"!==X.join("/").substr(-1)&&X.push("");var Oe,_t=""===X[0]||X[0]&&"/"===X[0].charAt(0);return we&&(C.hostname=_t?"":X.length?X.shift():"",C.host=C.hostname,(Oe=!!(C.host&&C.host.indexOf("@")>0)&&C.host.split("@"))&&(C.auth=Oe.shift(),C.hostname=Oe.shift(),C.host=C.hostname)),(ee=ee||C.host&&X.length)&&!_t&&X.unshift(""),X.length>0?C.pathname=X.join("/"):(C.pathname=null,C.path=null),(null!==C.pathname||null!==C.search)&&(C.path=(C.pathname?C.pathname:"")+(C.search?C.search:"")),C.auth=O.auth||C.auth,C.slashes=C.slashes||O.slashes,C.href=C.format(),C},ce.prototype.parseHost=function(){var O=this.host,ue=J.exec(O);ue&&(":"!==(ue=ue[0])&&(this.port=ue.substr(1)),O=O.substr(0,O.length-ue.length)),O&&(this.hostname=O)},pe.Qc=j,pe.DB=function ae(O,ue){return j(O,!1,!0).resolve(ue)},pe.WU=function $(O){return"string"==typeof O&&(O=j(O)),O instanceof ce?O.format():ce.prototype.format.call(O)}},654:()=>{},861:(Ce,pe,z)=>{"use strict";function A(ce,oe,J,ne,re,he,de){try{var Me=ce[he](de),ye=Me.value}catch(ge){return void J(ge)}Me.done?oe(ye):Promise.resolve(ye).then(ne,re)}function te(ce){return function(){var oe=this,J=arguments;return new Promise(function(ne,re){var he=ce.apply(oe,J);function de(ye){A(he,ne,re,de,Me,"next",ye)}function Me(ye){A(he,ne,re,de,Me,"throw",ye)}de(void 0)})}}z.d(pe,{Z:()=>te})}},Ce=>{Ce(Ce.s=494)}]);